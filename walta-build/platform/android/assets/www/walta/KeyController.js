//>>built
define("walta/KeyController","dojo/_base/declare,dojo/_base/lang,dojo/dom-construct,dojo/aspect,walta/Key,walta/KeyNode,walta/Taxon,walta/KeyNodeView,walta/TaxonView".split(","),function(c,a,d,b,e,f,g,h,i){return c(null,{keyUrl:"",divNode:null,_key:null,_view:null,constructor:function(a){c.safeMixin(this,a);this._key=new e({url:this.keyUrl})},_questionChosen:function(a){this._key.choose(a);this._initView()},_goBack:function(){this._key.back();this._initView()},_initView:function(){this._view&&this._view.destroyRecursive(!1);
this._domNode=d.create("div",null,this.divNode);if(this._key.currentDecision instanceof f)this._view=new h({keyNode:this._key.currentDecision},this._domNode),b.after(this._view,"onChoose",a.hitch(this,this._questionChosen),!0),b.after(this._view,"onBack",a.hitch(this,this._goBack),!0);else if(this._key.currentDecision instanceof g)this._view=new i({taxon:this._key.currentDecision},this._domNode),b.after(this._view,"onBack",a.hitch(this,this._goBack),!0);this._view.startup()},startIdentification:function(){this._key.load().then(a.hitch(this,
this._initView))}})});
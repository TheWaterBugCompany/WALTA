//>>built
define("walta/AppController","dojo/_base/declare,dojo/_base/lang,dojo/dom-construct,dojo/aspect,walta/Key,walta/KeyNode,walta/Taxon,walta/KeyNodeView,walta/TaxonView,walta/HomeView".split(","),function(c,b,e,d,f,g,h,i,j,k){return c(null,{keyUrl:"",divNode:null,_key:null,_currentView:null,_views:{},_decisionCounter:0,_decisionViews:[],constructor:function(a){c.safeMixin(this,a);this._key=new f({url:this.keyUrl})},_startAltKey:function(){console.log("Alt key activated");this._doTransition(this._createDecisionView(),
1)},_questionChosen:function(a){this._key.choose(a);this._doTransition(this._createDecisionView(),1)},_goBack:function(){this._key.back()?this._doTransition(this._createDecisionView(),-1):this._doTransition(this._views.home,-1)},_doTransition:function(a,b){console.log("view: "+a.get("id"));console.log("current view: "+this._currentView.get("id"));this._currentView.performTransition(a.get("id"),b,"slide");this._currentView=a},_createDecisionView:function(){console.log("createdecisionview");var a=null,
c=e.create("div",{id:"waltaDecisionView"+this._decisionCounter++},this.divNode);this._key.currentDecision instanceof g?(a=new i({keyNode:this._key.currentDecision},c),d.after(a,"onChoose",b.hitch(this,this._questionChosen),!0),d.after(a,"onBack",b.hitch(this,this._goBack),!0)):this._key.currentDecision instanceof h&&(a=new j({taxon:this._key.currentDecision},c),d.after(a,"onBack",b.hitch(this,this._goBack),!0));a.startup();this._decisionViews.unshift(a);2<this._decisionViews.length&&(this._decisionViews.pop().destroyRecursive(),
this._decisionCounter%=3);console.log("return "+a);return a},_createHomeView:function(){var a=new k({selected:!0},e.create("div",{id:"waltaHomeView"},this.divNode));d.after(a,"onAltKey",b.hitch(this,this._startAltKey));this._views.home=a;a.startup();this._currentView=a},startApp:function(){this._key.load().then(b.hitch(this,this._createHomeView))}})});
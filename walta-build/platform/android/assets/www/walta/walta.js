//>>built
require({cache:{"dojo/store/Memory":function(){define("dojo/store/Memory",["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(h,j,g){return h("dojo.store.Memory",null,{constructor:function(e){for(var d in e)this[d]=e[d];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:g,get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},put:function(e,d){var g=this.data,i=this.index,k=this.idProperty,k=e[k]=d&&
"id"in d?d.id:k in e?e[k]:Math.random();if(k in i){if(d&&!1===d.overwrite)throw Error("Object already exists");g[i[k]]=e}else i[k]=g.push(e)-1;return k},add:function(e,d){(d=d||{}).overwrite=!1;return this.put(e,d)},remove:function(e){var d=this.index,g=this.data;if(e in d)return g.splice(d[e],1),this.setData(g),!0},query:function(e,d){return j(this.queryEngine(e,d)(this.data))},setData:function(e){var a;e.items?(this.idProperty=e.identifier,a=this.data=e.items,e=a):this.data=e;this.index={};for(var d=
0,g=e.length;d<g;d++)this.index[e[d][this.idProperty]]=d}})})},"dojox/mobile/ViewController":function(){define("dojox/mobile/ViewController","dojo/_base/kernel,dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/ready,dijit/registry,./ProgressIndicator,./TransitionEvent,./viewRegistry".split(","),function(h,j,g,e,d,l,i,k,c,b,a,f,m,o,n,s){var p=e("dojox.mobile.ViewController",null,{dataHandlerClass:"dojox/mobile/dh/DataHandler",
dataSourceClass:"dojox/mobile/dh/UrlDataSource",fileTypeMapClass:"dojox/mobile/dh/SuffixFileTypeMap",constructor:function(){this.viewMap={};f(d.hitch(this,function(){a(l.body(),"startTransition",d.hitch(this,"onStartTransition"))}))},findTransitionViews:function(a){if(!a)return[];a.match(/^#?([^&?]+)(.*)/);var a=RegExp.$2,f=m.byId(RegExp.$1);if(!f)return[];for(var b=f.getParent();b;b=b.getParent())if(b.isVisible&&!b.isVisible()){var c=f.getShowingView();c&&c.id!==f.id&&f.show();f=b}return[f.getShowingView(),
f,a]},openExternalView:function(a,f){var b=new i,c=this.viewMap[a.url];if(c)return a.moveTo=c,a.noTransition?m.byId(c).hide():(new n(l.body(),a)).dispatch(),b.resolve(!0),b;for(var e=null,c=f.childNodes.length-1;0<=c;c--){var o=f.childNodes[c];if(1===o.nodeType&&"bottom"===(o.getAttribute("fixed")||m.byNode(o)&&m.byNode(o).fixed)){e=o;break}}require([a.dataHandlerClass||this.dataHandlerClass,a.dataSourceClass||this.dataSourceClass,a.fileTypeMapClass||this.fileTypeMapClass],d.hitch(this,function(c,
o,i){c=new c(new o(a.data||a.url),f,e);i=a.contentType||i.getContentType(a.url)||"html";c.processData(i,d.hitch(this,function(f){f?(this.viewMap[a.url]=a.moveTo=f,a.noTransition?m.byId(f).hide():(new n(l.body(),a)).dispatch(),b.resolve(!0)):b.reject("Failed to load "+a.url)}))}));return b},onStartTransition:function(a){a.preventDefault();if(a.detail){var f=a.detail;if(f.moveTo||f.href||f.url||f.scene)if(f.url&&!f.moveTo){var b=f.urlTarget,c=m.byId(b),b=c&&c.containerNode||k.byId(b);b||(b=(c=s.getEnclosingView(a.target))&&
c.domNode.parentNode||l.body());this.openExternalView(f,b)}else if(f.href)if(f.hrefTarget)l.global.open(f.href,f.hrefTarget);else{for(c=s.getEnclosingView(a.target);c;c=s.getParentView(c))b=c;b&&b.performTransition(null,f.transitionDir,f.transition,a.target,function(){location.href=f.href})}else if(f.scene)g.publish("/dojox/mobile/app/pushScene",[f.scene]);else{var d=this.findTransitionViews(f.moveTo),b=d[0],c=d[1],d=d[2];if(!location.hash&&!f.hashchange)s.initialView=b;if(f.moveTo&&c)f.moveTo=("#"===
f.moveTo.charAt(0)?"#"+c.id:c.id)+d;if(b&&!(f.moveTo&&b===m.byId(f.moveTo.replace(/^#?([^&?]+).*/,"$1")))){if((a=m.getEnclosingWidget(a.target))&&a.callback)f.context=a,f.method=a.callback;b.performTransition(f)}}}}});p._instance=new p;p.getInstance=function(){return p._instance};return p})},"dijit/a11y":function(){define("dijit/a11y","dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),function(h,j,g,e,d,l,i,k){var c=k._isElementShown=
function(a){var f=l.get(a);return"hidden"!=f.visibility&&"collapsed"!=f.visibility&&"none"!=f.display&&"hidden"!=d.get(a,"type")};k.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return d.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var f;try{var b=a.contentDocument;if("designMode"in b&&"on"==b.designMode)return!0;f=b.body}catch(c){try{f=a.contentWindow.document.body}catch(e){return!1}}return f&&("true"==
f.contentEditable||f.firstChild&&"true"==f.firstChild.contentEditable);default:return"true"==a.contentEditable}};var b=k.isTabNavigable=function(a){return d.get(a,"disabled")?!1:d.has(a,"tabIndex")?0<=d.get(a,"tabIndex"):k.hasDefaultTabStop(a)};k._getTabNavigable=function(a){function f(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var m,e,n,i,k,g,j={},l=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType&&c(a)){if(b(a)){var h=
+d.get(a,"tabIndex");if(!d.has(a,"tabIndex")||0==h)m||(m=a),e=a;else if(0<h){if(!n||h<i)i=h,n=a;if(!k||h>=g)g=h,k=a}h=f(a);d.get(a,"checked")&&h&&(j[h]=a)}"SELECT"!=a.nodeName.toUpperCase()&&l(a)}};c(a)&&l(a);return{first:j[f(m)]||m,last:j[f(e)]||e,lowest:j[f(n)]||n,highest:j[f(k)]||k}};k.getFirstInTabbingOrder=function(a,f){var b=k._getTabNavigable(e.byId(a,f));return b.lowest?b.lowest:b.first};k.getLastInTabbingOrder=function(a,f){var b=k._getTabNavigable(e.byId(a,f));return b.last?b.last:b.highest};
return{hasDefaultTabStop:k.hasDefaultTabStop,isTabNavigable:k.isTabNavigable,_getTabNavigable:k._getTabNavigable,getFirstInTabbingOrder:k.getFirstInTabbingOrder,getLastInTabbingOrder:k.getLastInTabbingOrder}})},"dojox/mobile/_ScrollableMixin":function(){define("dojox/mobile/_ScrollableMixin","dojo/_base/kernel,dojo/_base/config,dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/dom,dojo/dom-class,dijit/registry,./scrollable".split(","),function(h,j,g,e,d,l,i,k,c){return g("dojox.mobile._ScrollableMixin",
c,{fixedHeader:"",fixedFooter:"",scrollableParams:null,allowNestedScrolls:!0,appBars:!0,constructor:function(){this.scrollableParams={}},destroy:function(){this.cleanup();this.inherited(arguments)},startup:function(){if(!this._started){this.findAppBars();var b,a=this.scrollableParams;if(this.fixedHeader){b=l.byId(this.fixedHeader);if(b.parentNode==this.domNode)this.isLocalHeader=!0;a.fixedHeaderHeight=b.offsetHeight}if(this.fixedFooter){b=l.byId(this.fixedFooter);if(b.parentNode==this.domNode)this.isLocalFooter=
!0,b.style.bottom="0px";a.fixedFooterHeight=b.offsetHeight}this.scrollType=this.scrollType||j.mblScrollableScrollType||0;this.init(a);if(this.allowNestedScrolls)for(b=this.getParent();b;b=b.getParent())if(b&&b.scrollableParams){this.dirLock=!0;b.dirLock=!0;break}this._resizeHandle=this.subscribe("/dojox/mobile/afterResizeAll",function(){if("none"!==this.domNode.style.display){var a=d.doc.activeElement;this.isFormElement(a)&&l.isDescendant(a,this.containerNode)&&this.scrollIntoView(a)}});this.inherited(arguments)}},
findAppBars:function(){if(this.appBars){var b,a,f;for(b=0,a=d.body().childNodes.length;b<a;b++)f=d.body().childNodes[b],this.checkFixedBar(f,!1);if(this.domNode.parentNode)for(b=0,a=this.domNode.parentNode.childNodes.length;b<a;b++)f=this.domNode.parentNode.childNodes[b],this.checkFixedBar(f,!1);this.fixedFooterHeight=this.fixedFooter?this.fixedFooter.offsetHeight:0}},checkFixedBar:function(b,a){if(1===b.nodeType){var f=b.getAttribute("fixed")||k.byNode(b)&&k.byNode(b).fixed;if("top"===f){i.add(b,
"mblFixedHeaderBar");if(a)b.style.top="0px",this.fixedHeader=b;return f}if("bottom"===f)return i.add(b,"mblFixedBottomBar"),this.fixedFooter=b,f}return null}})})},"dojox/mobile/viewRegistry":function(){define("dojox/mobile/viewRegistry",["dojo/_base/array","dojo/dom-class","dijit/registry"],function(h,j,g){return{length:0,hash:{},initialView:null,add:function(e){this.hash[e.id]=e;this.length++},remove:function(e){this.hash[e]&&(delete this.hash[e],this.length--)},getViews:function(){var e=[],d;for(d in this.hash)e.push(this.hash[d]);
return e},getParentView:function(e){for(e=e.getParent();e;e=e.getParent())if(j.contains(e.domNode,"mblView"))return e;return null},getChildViews:function(e){return h.filter(this.getViews(),function(d){return this.getParentView(d)===e},this)},getEnclosingView:function(e){for(;e&&"BODY"!==e.tagName;e=e.parentNode)if(1===e.nodeType&&j.contains(e,"mblView"))return g.byNode(e);return null},getEnclosingScrollable:function(e){for(e=g.getEnclosingWidget(e);e;e=e.getParent())if(e.scrollableParams&&e._v)return e;
return null}}})},"dojox/mobile/sniff":function(){define("dojox/mobile/sniff",["dojo/_base/window","dojo/_base/sniff"],function(h,j){var g=navigator.userAgent;j.add("bb",(0<=g.indexOf("BlackBerry")||g.indexOf("BB10"))&&parseFloat(g.split("Version/")[1])||void 0,void 0,!0);j.add("android",parseFloat(g.split("Android ")[1])||void 0,void 0,!0);if(g.match(/(iPhone|iPod|iPad)/)){var e=RegExp.$1.replace(/P/,"p"),g=g.match(/OS ([\d_]+)/)?RegExp.$1:"1",g=parseFloat(g.replace(/_/,".").replace(/_/g,""));j.add(e,
g,void 0,!0);j.add("iphone",g,void 0,!0)}return j})},"dojo/store/util/SimpleQueryEngine":function(){define("dojo/store/util/SimpleQueryEngine",["../../_base/array"],function(h){return function(j,g){function e(d){var d=h.filter(d,j),e=g&&g.sort;e&&d.sort("function"==typeof e?e:function(c,b){for(var a,f=0;a=e[f];f++){var m=c[a.attribute],d=b[a.attribute];if(m!=d)return!!a.descending==(null==m||m>d)?-1:1}return 0});if(g&&(g.start||g.count)){var k=d.length,d=d.slice(g.start||0,(g.start||0)+(g.count||
Infinity));d.total=k}return d}switch(typeof j){default:throw Error("Can not query with a "+typeof j);case "object":case "undefined":var d=j,j=function(e){for(var i in d){var k=d[i];if(k&&k.test){if(!k.test(e[i],e))return!1}else if(k!=e[i])return!1}return!0};break;case "string":if(!this[j])throw Error("No filter function "+j+" was found in store");j=this[j];case "function":}e.matches=j;return e}})},"dojox/mobile/Button":function(){define("dojox/mobile/Button","dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dijit/_WidgetBase,dijit/form/_ButtonMixin,dijit/form/_FormWidgetMixin".split(","),
function(h,j,g,e,d,l,i){return j("dojox.mobile.Button",[d,i,l],{baseClass:"mblButton",_setTypeAttr:null,duration:1E3,_onClick:function(d){var c=this.inherited(arguments);if(c&&0<=this.duration){var b=this.focusNode||this.domNode,a=(this.baseClass+" "+this["class"]).split(" "),a=h.map(a,function(a){return a+"Selected"});g.add(b,a);setTimeout(function(){g.remove(b,a)},this.duration)}return c},isFocusable:function(){return!1},buildRendering:function(){if(this.srcNodeRef){if(this._cv){var d=this.srcNodeRef.firstChild;
if(d&&3===d.nodeType)d.nodeValue=this._cv(d.nodeValue)}}else this.srcNodeRef=e.create("button",{type:this.type});this.inherited(arguments);this.focusNode=this.domNode},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onclick","_onClick")},_setLabelAttr:function(d){this.inherited(arguments,[this._cv?this._cv(d):d])}})})},"dojox/mobile/TransitionEvent":function(){define("dojox/mobile/TransitionEvent",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/on","./transition"],
function(h,j,g,e,d){return h("dojox.mobile.TransitionEvent",null,{constructor:function(d,e,g){this.transitionOptions=e;this.target=d;this.triggerEvent=g||null},dispatch:function(){var l=e.emit(this.target,"startTransition",{bubbles:!0,cancelable:!0,detail:this.transitionOptions,triggerEvent:this.triggerEvent});l&&j.when(d,g.hitch(this,function(d){j.when(d.call(this,l),g.hitch(this,function(d){this.endTransition(d)}))}))},endTransition:function(d){e.emit(this.target,"endTransition",{detail:d.transitionOptions})}})})},
"dojox/mobile/Carousel":function(){define("dojox/mobile/Carousel","dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/event,dojo/_base/sniff,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dijit/registry,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,./lazyLoadUtils,./CarouselItem,./PageIndicator,./SwapView,require".split(","),function(h,j,g,e,d,l,i,k,c,b,a,f,m,o,n,s,p){return g("dojox.mobile.Carousel",[f,a,b],{numVisible:2,itemWidth:0,title:"",pageIndicator:!0,navButton:!1,height:"",
selectable:!0,baseClass:"mblCarousel",buildRendering:function(){this.containerNode=i.create("div",{className:"mblCarouselPages"});this.inherited(arguments);if(this.srcNodeRef)for(var a=0,f=this.srcNodeRef.childNodes.length;a<f;a++)this.containerNode.appendChild(this.srcNodeRef.firstChild);this.headerNode=i.create("div",{className:"mblCarouselHeaderBar"},this.domNode);if(this.navButton)this.btnContainerNode=i.create("div",{className:"mblCarouselBtnContainer"},this.headerNode),k.set(this.btnContainerNode,
"float","right"),this.prevBtnNode=i.create("button",{className:"mblCarouselBtn",title:"Previous",innerHTML:"&lt;"},this.btnContainerNode),this.nextBtnNode=i.create("button",{className:"mblCarouselBtn",title:"Next",innerHTML:"&gt;"},this.btnContainerNode),this._prevHandle=this.connect(this.prevBtnNode,"onclick","onPrevBtnClick"),this._nextHandle=this.connect(this.nextBtnNode,"onclick","onNextBtnClick");if(this.pageIndicator){if(!this.title)this.title="&nbsp;";this.piw=new n;k.set(this.piw,"float",
"right");this.headerNode.appendChild(this.piw.domNode)}this.titleNode=i.create("div",{className:"mblCarouselTitle"},this.headerNode);this.domNode.appendChild(this.containerNode);this.subscribe("/dojox/mobile/viewChanged","handleViewChanged");this._clickHandle=this.connect(this.domNode,"onclick","_onClick");this._keydownHandle=this.connect(this.domNode,"onkeydown","_onClick");this._dragstartHandle=this.connect(this.domNode,"ondragstart",e.stop);this.selectedItemIndex=-1;this.items=[]},startup:function(){if(!this._started){var a;
if("inherit"===this.height)this.domNode.offsetParent&&(a=this.domNode.offsetParent.offsetHeight+"px");else if(this.height)a=this.height;if(a)this.domNode.style.height=a;if(this.store){if(!this.setStore)throw Error("Use StoreCarousel or DataCarousel instead of Carousel.");a=this.store;this.store=null;this.setStore(a,this.query,this.queryOptions)}else this.resizeItems();this.inherited(arguments);this.currentView=h.filter(this.getChildren(),function(a){return a.isVisible()})[0]}},resizeItems:function(){var a=
0,f=this.domNode.offsetHeight-(this.headerNode?this.headerNode.offsetHeight:0),b=5/this.numVisible;h.forEach(this.getChildren(),function(c){if(c instanceof s){if(!c.lazy&&!c.domNode.getAttribute("lazy"))c._instantiated=!0;for(var c=c.containerNode.childNodes,m=0,d=c.length;m<d;m++){var e=c[m];if(1===e.nodeType){var o=this.items[a]||{};k.set(e,{width:o.width||90/this.numVisible+"%",height:o.height||f+"px",margin:"0 "+(o.margin||b+"%")});l.add(e,"mblCarouselSlot");a++}}}},this);if(this.piw)this.piw.refId=
this.containerNode.firstChild,this.piw.reset()},resize:function(){if(this.itemWidth){var a=Math.floor(this.domNode.offsetWidth/this.itemWidth);if(a!==this.numVisible)this.selectedItemIndex=this.getIndexByItemWidget(this.selectedItem),this.numVisible=a,0<this.items.length&&(this.onComplete(this.items),this.select(this.selectedItemIndex))}},fillPages:function(){h.forEach(this.getChildren(),function(a,f){for(var b="",c=0;c<this.numVisible;c++){var m,d="",e;m=f*this.numVisible+c;var o={};m<this.items.length?
(o=this.items[m],(m=this.store.getValue(o,"type"))?(d=this.store.getValue(o,"props"),e=this.store.getValue(o,"mixins")):(m="dojox.mobile.CarouselItem",h.forEach(["alt","src","headerText","footerText"],function(a){var b=this.store.getValue(o,a);void 0!==b&&(d&&(d+=","),d+=a+':"'+b+'"')},this))):(m="dojox.mobile.CarouselItem",d='src:"'+p.toUrl("dojo/resources/blank.gif")+'", className:"mblCarouselItemBlank"');b+='<div data-dojo-type="'+m+'"';d&&(b+=" data-dojo-props='"+d+"'");e&&(b+=" data-dojo-mixins='"+
e+"'");b+="></div>"}a.containerNode.innerHTML=b},this)},onComplete:function(a){h.forEach(this.getChildren(),function(a){a instanceof s&&a.destroyRecursive()});this.selectedItem=null;this.items=a;var b=Math.ceil(a.length/this.numVisible),f=this.domNode.offsetHeight-this.headerNode.offsetHeight;pg=Math.floor((-1===this.selectedItemIndex?0:this.selectedItemIndex)/this.numVisible);for(a=0;a<b;a++){var c=new s({height:f+"px",lazy:!0});this.addChild(c);a===pg?(c.show(),this.currentView=c):c.hide()}this.fillPages();
this.resizeItems();f=this.getChildren();b=pg+1>b-1?b-1:pg+1;for(a=0>pg-1?0:pg-1;a<=b;a++)this.instantiateView(f[a])},onError:function(){},onUpdate:function(){},onDelete:function(){},onSet:function(){},onNew:function(){},onStoreClose:function(){},getParentView:function(a){for(a=c.getEnclosingWidget(a);a;a=a.getParent())if(a.getParent()instanceof s)return a;return null},getIndexByItemWidget:function(a){if(!a)return-1;var b=a.getParent();return h.indexOf(this.getChildren(),b)*this.numVisible+h.indexOf(b.getChildren(),
a)},getItemWidgetByIndex:function(a){return-1===a?null:this.getChildren()[Math.floor(a/this.numVisible)].getChildren()[a%this.numVisible]},onPrevBtnClick:function(){this.currentView&&this.currentView.goTo(-1)},onNextBtnClick:function(){this.currentView&&this.currentView.goTo(1)},_onClick:function(a){if(!1!==this.onClick(a)){if(a&&"keydown"===a.type)if(39===a.keyCode)this.onNextBtnClick();else if(37===a.keyCode)this.onPrevBtnClick();else if(13!==a.keyCode)return;for(a=c.getEnclosingWidget(a.target);;a=
a.getParent()){if(!a)return;if(a.getParent()instanceof s)break}this.select(a);var b=this.getIndexByItemWidget(a);j.publish("/dojox/mobile/carouselSelect",[this,a,this.items[b],b])}},select:function(a){"number"===typeof a&&(a=this.getItemWidgetByIndex(a));if(this.selectable)this.selectedItem&&(this.selectedItem.set("selected",!1),l.remove(this.selectedItem.domNode,"mblCarouselSlotSelected")),a&&(a.set("selected",!0),l.add(a.domNode,"mblCarouselSlotSelected")),this.selectedItem=a},onClick:function(){},
instantiateView:function(a){if(a&&!a._instantiated){var b="none"===k.get(a.domNode,"display");b&&k.set(a.domNode,{visibility:"hidden",display:""});m.instantiateLazyWidgets(a.containerNode,null,function(){b&&k.set(a.domNode,{visibility:"visible",display:"none"})});a._instantiated=!0}},handleViewChanged:function(a){if(a.getParent()===this)this.currentView.nextView(this.currentView.domNode)===a?this.instantiateView(a.nextView(a.domNode)):this.instantiateView(a.previousView(a.domNode)),this.currentView=
a},_setTitleAttr:function(a){this.titleNode.innerHTML=this._cv?this._cv(a):a;this._set("title",a)}})})},"dojox/mobile/_ExecScriptMixin":function(){define("dojox/mobile/_ExecScriptMixin",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/window","dojo/dom-construct"],function(h,j,g,e){return j("dojox.mobile._ExecScriptMixin",null,{execScript:function(d){d=d.replace(/\f/g," ").replace(/<\/script>/g,"\u000c");d=d.replace(/<script [^>]*src=['"]([^'"]+)['"][^>]*>([^\f]*)\f/ig,function(d,i){e.create("script",
{type:"text/javascript",src:i},g.doc.getElementsByTagName("head")[0]);return""});return d=d.replace(/<script>([^\f]*)\f/ig,function(d,e){h.eval(e);return""})}})})},"dojox/mobile/lazyLoadUtils":function(){define("dojox/mobile/lazyLoadUtils","dojo/_base/kernel,dojo/_base/array,dojo/_base/config,dojo/_base/window,dojo/_base/Deferred,dojo/ready".split(","),function(h,j,g,e,d,l){return new function(){this._lazyNodes=[];var i=this;g.parseOnLoad&&l(90,function(){var d=j.filter(e.body().getElementsByTagName("*"),
function(a){return"true"===a.getAttribute("lazy")||(a.getAttribute("data-dojo-props")||"").match(/lazy\s*:\s*true/)}),c,b,a,f;for(c=0;c<d.length;c++)j.forEach(["dojoType","data-dojo-type"],function(m){a=j.filter(d[c].getElementsByTagName("*"),function(a){return a.getAttribute(m)});for(b=0;b<a.length;b++)f=a[b],f.setAttribute("__"+m,f.getAttribute(m)),f.removeAttribute(m),i._lazyNodes.push(f)})});l(function(){for(var d=0;d<i._lazyNodes.length;d++){var c=i._lazyNodes[d];j.forEach(["dojoType","data-dojo-type"],
function(b){c.getAttribute("__"+b)&&(c.setAttribute(b,c.getAttribute("__"+b)),c.removeAttribute("__"+b))})}delete i._lazyNodes});this.instantiateLazyWidgets=function(e,c,b){for(var a=new d,c=c?c.split(/,/):[],f=e.getElementsByTagName("*"),m=f.length,o=0;o<m;o++){var n=f[o].getAttribute("dojoType")||f[o].getAttribute("data-dojo-type");n&&(c.push(n),n=(n=f[o].getAttribute("data-dojo-mixins"))?n.split(/, */):[],c=c.concat(n))}if(0===c.length)return!0;if(h.require)return j.forEach(c,function(a){h.require(a)}),
h.parser.parse(e),b&&b(e),!0;c=j.map(c,function(a){return a.replace(/\./g,"/")});require(c,function(){h.parser.parse(e);b&&b(e);a.resolve(!0)});return a}}})},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase","require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),
function(h,j,g,e,d,l,i,k,c,b,a,f,m,o,n,s,p,u,q,v,t,r){function A(a){return function(b){k[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}var C={};return l("dijit._WidgetBase",[u,t],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:A("lang"),dir:"",_setDirAttr:A("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:e.blankGif||h.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=i.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,n.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=r.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:v.doc);this.ownerDocumentBody=v.body(this.ownerDocument);r.add(this);this.buildRendering();var f;if(this.domNode){this._applyAttributes();var c=this.srcNodeRef;c&&c.parentNode&&this.domNode!==c&&(c.parentNode.replaceChild(this.domNode,c),f=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();f&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],f;for(f in this.attributeMap)b.push(f);
var a=a.prototype,c;for(c in a)c in this.attributeMap||"_set"+c.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(c)}var d={},m;for(m in this.params||{})d[m]=this[m];j.forEach(b,function(a){a in d||this[a]&&this.set(a,this[a])},this);for(m in d)this.set(m,d[m])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");
this.isLeftToRight()||(a=a.concat(j.map(a,function(a){return a+"Rtl"})));c.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,j.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&n.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(f){f.destroyRecursive?f.destroyRecursive(a):f.destroy&&f.destroy(a)}this._beingDestroyed=
!0;this.uninitialize();j.forEach(this._connects,n.hitch(this,"disconnect"));j.forEach(this._supportingWidgets,b);this.domNode&&j.forEach(r.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);r.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?k.remove(this.domNode,"widgetId"):b.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||b.destroy(this.srcNodeRef),delete this.srcNodeRef)},
destroyDescendants:function(a){j.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;n.isObject(a)?f.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,f){f=3<=arguments.length?f:this.attributeMap[a];j.forEach(n.isArray(f)?f:[f],function(f){var d=this[f.node||f||"domNode"];switch(f.type||"attribute"){case "attribute":n.isFunction(b)&&
(b=n.hitch(this,b));f=f.attribute?f.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?k.set(d,f,b):d.set(f,b);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":d.innerHTML=b;break;case "class":c.replace(d,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var f in a)this.set(f,a[f]);return this}f=this._getAttrNames(a);var c=
this[f.s];if(n.isFunction(c))var d=c.apply(this,Array.prototype.slice.call(arguments,1));else{var c=this.focusNode&&!n.isFunction(this.focusNode)?"focusNode":"domNode",m=this[c].tagName,e;if(!(e=C[m])){e=this[c];var o={},g;for(g in e)o[g.toLowerCase()]=!0;e=C[m]=o}g=a in this.attributeMap?this.attributeMap[a]:f.s in this?this[f.s]:f.l in e&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?c:null;null!=g&&this._attrToDom(a,b,g);this._set(a,b)}return d||this},_attrPairNames:{},_getAttrNames:function(a){var b=
this._attrPairNames;if(b[a])return b[a];var f=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+f+"Attr",g:"_get"+f+"Attr",l:f.toLowerCase()}},_set:function(a,b){var f=this[a];this[a]=b;this._created&&b!==f&&(this._watchCallbacks&&this._watchCallbacks(a,f,b),this.emit("attrmodified-"+a,{detail:{prevValue:f,newValue:b}}))},emit:function(a,b,f){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail=
{};b.detail.widget=this;var c,d=this["on"+a];d&&(c=d.apply(this,f?f:[b]));this._started&&!this._beingDestroyed&&s.emit(this.domNode,a.toLowerCase(),b);return c},on:function(a,b){var f=this._onMap(a);return f?g.after(this,f,b,!0):this.own(s(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,f=b._onMap;if(!f){var f=b._onMap={},c;for(c in b.prototype)/^on/.test(c)&&(f[c.replace(/^on/,"").toLowerCase()]=c)}return f["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+
this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?r.findWidgets(this.containerNode):[]},getParent:function(){return r.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,f){return this.own(d.connect(a,b,this,f))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(q.subscribe(a,n.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:a.isBodyLtr(this.ownerDocument)},
isFocusable:function(){return this.focus&&"none"!=f.get(this.domNode,"display")},placeAt:function(a,f){var c=!a.tagName&&r.byId(a);c&&c.addChild&&(!f||"number"===typeof f)?c.addChild(this,f):(c=c?c.containerNode&&!/after|before|replace/.test(f||"")?c.containerNode:c.domNode:i.byId(a,this.ownerDocument),b.place(this.domNode,c,f),!this._started&&(this.getParent()||{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var f=setTimeout(n.hitch(this,
function(){f=null;this._destroyed||n.hitch(this,a)()}),b||0);return{remove:function(){f&&(clearTimeout(f),f=null);return null}}}})})},"dojox/mobile/View":function(){define("dojox/mobile/View","dojo/_base/array,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/_base/lang,dojo/_base/sniff,dojo/_base/window,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dijit/registry,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,./ViewController,./common,./transition,./viewRegistry".split(","),
function(h,j,g,e,d,l,i,k,c,b,a,f,m,o,n,s,p,u,q,v,t){d.getObject("dojox.mobile",!0);return e("dojox.mobile.View",[p,s,n],{selected:!1,keepScrollPos:!0,tag:"div",baseClass:"mblView",constructor:function(a,b){if(b)c.byId(b).style.visibility="hidden"},destroy:function(){t.remove(this.id);this.inherited(arguments)},buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||a.create(this.tag);this._animEndHandle=this.connect(this.domNode,"webkitAnimationEnd","onAnimationEnd");this._animStartHandle=
this.connect(this.domNode,"webkitAnimationStart","onAnimationStart");if(!j.mblCSS3Transition)this._transEndHandle=this.connect(this.domNode,"webkitTransitionEnd","onAnimationEnd");l("mblAndroid3Workaround")&&m.set(this.domNode,"webkitTransformStyle","preserve-3d");t.add(this);this.inherited(arguments)},startup:function(){if(!this._started){if(void 0===this._visible){var a=this.getSiblingViews(),b=location.hash&&location.hash.substring(1).split(/,/),f,c,d;h.forEach(a,function(a,m){-1!==h.indexOf(b,
a.id)&&(f=a);0==m&&(d=a);a.selected&&(c=a);a._visible=!1},this);(f||c||d)._visible=!0}this._visible&&(this.show(!0,!0),this.defer(function(){this.onStartView();g.publish("/dojox/mobile/startView",[this])}));if("visible"!=this.domNode.style.visibility)this.domNode.style.visibility="visible";this.inherited(arguments);a=this.getParent();(!a||!a.resize)&&this.resize();this._visible||this.hide()}},resize:function(){h.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},onStartView:function(){},
onBeforeTransitionIn:function(){},onAfterTransitionIn:function(){},onBeforeTransitionOut:function(){},onAfterTransitionOut:function(){},_clearClasses:function(a){if(a){var b=[];h.forEach(d.trim(a.className||"").split(/\s+/),function(a){(a.match(/^mbl\w*View$/)||-1===a.indexOf("mbl"))&&b.push(a)},this);a.className=b.join(" ")}},_fixViewState:function(a){for(var f=this.domNode.parentNode.childNodes,c=0;c<f.length;c++){var d=f[c];1===d.nodeType&&b.contains(d,"mblView")&&this._clearClasses(d)}this._clearClasses(a)},
convertToId:function(a){return"string"==typeof a?a.replace(/^#?([^&?]+).*/,"$1"):a},_isBookmarkable:function(a){return a.moveTo&&(j.mblForceBookmarkable||"#"===a.moveTo.charAt(0))&&!a.hashchange},performTransition:function(a,f,e,n,k){if(!this._detail){var h,s;if(a&&"object"===typeof a)h=a,s=f;else{h={moveTo:a,transitionDir:f,transition:e,context:n,method:k};s=[];for(var p=5;p<arguments.length;p++)s.push(arguments[p])}this._detail=h;this._optArgs=s;this._arguments=[h.moveTo,h.transitionDir,h.transition,
h.context,h.method];if("#"!==h.moveTo){if(h.moveTo)s=this.convertToId(h.moveTo);else{if(!this._dummyNode)this._dummyNode=i.doc.createElement("div"),i.body().appendChild(this._dummyNode);s=this._dummyNode}this.addTransitionInfo&&"string"==typeof h.moveTo&&this._isBookmarkable(h)&&this.addTransitionInfo(this.id,h.moveTo,{transitionDir:h.transitionDir,transition:h.transition});var p=this.domNode,u=p.offsetTop;if(s=this.toNode=c.byId(s)){s.style.visibility="hidden";s.style.display="";this._fixViewState(s);
var v=o.byNode(s);if(v){if(j.mblAlwaysResizeOnTransition||!v._resized)q.resizeAll(null,v),v._resized=!0;if(h.transition&&"none"!=h.transition)v.containerNode.style.paddingTop=u+"px";v.load&&v.load();v.movedFrom=p.id}l("mblAndroidWorkaround")&&!j.mblCSS3Transition&&h.transition&&"none"!=h.transition&&(m.set(s,"webkitTransformStyle","preserve-3d"),m.set(p,"webkitTransformStyle","preserve-3d"),b.add(s,"mblAndroidWorkaround"));this.onBeforeTransitionOut.apply(this,this._arguments);g.publish("/dojox/mobile/beforeTransitionOut",
[this].concat(d._toArray(this._arguments)));if(v){if(this.keepScrollPos&&!this.getParent()){u=i.body().scrollTop||i.doc.documentElement.scrollTop||i.global.pageYOffset||0;p._scrollTop=u;var t=1==h.transitionDir?0:s._scrollTop||0;s.style.top="0px";if(1<u||0!==t)p.style.top=t-u+"px",!1!==j.mblHideAddressBar&&setTimeout(function(){i.global.scrollTo(0,t||1)},0)}else s.style.top="0px";v.onBeforeTransitionIn.apply(v,this._arguments);g.publish("/dojox/mobile/beforeTransitionIn",[v].concat(d._toArray(this._arguments)))}s.style.display=
"none";s.style.visibility="visible";q.fromView=this;q.toView=v;this._doTransition(p,s,h.transition,h.transitionDir)}else console.log("dojox/mobile/View.performTransition: destination view not found: "+h.moveTo)}}},_toCls:function(a){return"mbl"+a.charAt(0).toUpperCase()+a.substring(1)},_doTransition:function(a,c,e,o){var n=-1==o?" mblReverse":"";c.style.display="";if(!e||"none"==e)this.domNode.style.display="none",this.invokeCallback();else if(j.mblCSS3Transition)k.when(v,d.hitch(this,function(b){var f=
m.get(c,"position");m.set(c,"position","absolute");k.when(b(a,c,{transition:e,reverse:-1===o?!0:!1}),d.hitch(this,function(){m.set(c,"position",f);this.invokeCallback()}))}));else{-1!=e.indexOf("cube")&&(l("ipad")?m.set(c.parentNode,{webkitPerspective:1600}):l("iphone")&&m.set(c.parentNode,{webkitPerspective:800}));var g=this._toCls(e);l("mblAndroidWorkaround")?setTimeout(function(){b.add(a,g+" mblOut"+n);b.add(c,g+" mblIn"+n);b.remove(c,"mblAndroidWorkaround");setTimeout(function(){b.add(a,"mblTransition");
b.add(c,"mblTransition")},30)},70):(b.add(a,g+" mblOut"+n),b.add(c,g+" mblIn"+n),setTimeout(function(){b.add(a,"mblTransition");b.add(c,"mblTransition")},100));var h="50% 50%",s="50% 50%",p;-1!=e.indexOf("swirl")||-1!=e.indexOf("zoom")?(h=this.keepScrollPos&&!this.getParent()?i.body().scrollTop||i.doc.documentElement.scrollTop||i.global.pageYOffset||0:-f.position(a,!0).y,p=i.global.innerHeight/2+h,h="50% "+p+"px",s="50% "+p+"px"):-1!=e.indexOf("scale")&&(h=f.position(a,!0),s=(void 0!==this.clickedPosX?
this.clickedPosX:i.global.innerWidth/2)-h.x,h=this.keepScrollPos&&!this.getParent()?i.body().scrollTop||i.doc.documentElement.scrollTop||i.global.pageYOffset||0:-h.y,p=(void 0!==this.clickedPosY?this.clickedPosY:i.global.innerHeight/2)+h,h=s+"px "+p+"px",s=s+"px "+p+"px");m.set(a,{webkitTransformOrigin:h});m.set(c,{webkitTransformOrigin:s})}},onAnimationStart:function(){},onAnimationEnd:function(a){var f=a.animationName||a.target.className;if(!(-1===f.indexOf("Out")&&-1===f.indexOf("In")&&-1===f.indexOf("Shrink"))){var c=
!1;b.contains(this.domNode,"mblOut")?(c=!0,this.domNode.style.display="none",b.remove(this.domNode,[this._toCls(this._detail.transition),"mblIn","mblOut","mblReverse"])):this.containerNode.style.paddingTop="";m.set(this.domNode,{webkitTransformOrigin:""});if(-1!==f.indexOf("Shrink"))a=a.target,a.style.display="none",b.remove(a,"mblCloseContent"),(a=t.getEnclosingScrollable(this.domNode))&&a.onTouchEnd();c&&this.invokeCallback();this._clearClasses(this.domNode);this.clickedPosX=this.clickedPosY=void 0;
if(-1!==f.indexOf("Cube")&&-1!==f.indexOf("In")&&l("iphone"))this.domNode.parentNode.style.webkitPerspective=""}},invokeCallback:function(){this.onAfterTransitionOut.apply(this,this._arguments);g.publish("/dojox/mobile/afterTransitionOut",[this].concat(this._arguments));var a=o.byNode(this.toNode);if(a)a.onAfterTransitionIn.apply(a,this._arguments),g.publish("/dojox/mobile/afterTransitionIn",[a].concat(this._arguments)),a.movedFrom=void 0,this.setFragIds&&this._isBookmarkable(this._detail)&&this.setFragIds(a);
l("mblAndroidWorkaround")&&setTimeout(d.hitch(this,function(){a&&m.set(this.toNode,"webkitTransformStyle","");m.set(this.domNode,"webkitTransformStyle","")}),0);var b=this._detail.context,f=this._detail.method;if(b||f)f||(f=b,b=null),b=b||i.global,"string"==typeof f?b[f].apply(b,this._optArgs):"function"==typeof f&&f.apply(b,this._optArgs);this._detail=this._optArgs=this._arguments=void 0},isVisible:function(a){if(a){for(a=this.domNode;"BODY"!==a.tagName;a=a.parentNode)if("none"===m.get(a,"display"))return!1;
return!0}return"none"!==m.get(this.domNode,"display")},getShowingView:function(){for(var a=this.domNode.parentNode.childNodes,f=0;f<a.length;f++){var c=a[f];if(1===c.nodeType&&b.contains(c,"mblView")&&"none"!==c.style.display)return o.byNode(c)}return null},getSiblingViews:function(){return!this.domNode.parentNode?[this]:h.map(h.filter(this.domNode.parentNode.childNodes,function(a){return 1===a.nodeType&&b.contains(a,"mblView")}),function(a){return o.byNode(a)})},show:function(a,b){var f=this.getShowingView();
a||(f&&(f.onBeforeTransitionOut(f.id),g.publish("/dojox/mobile/beforeTransitionOut",[f,f.id])),this.onBeforeTransitionIn(this.id),g.publish("/dojox/mobile/beforeTransitionIn",[this,this.id]));b?this.domNode.style.display="":h.forEach(this.getSiblingViews(),function(a){a.domNode.style.display=a===this?"":"none"},this);this.load&&this.load();a||(f&&(f.onAfterTransitionOut(f.id),g.publish("/dojox/mobile/afterTransitionOut",[f,f.id])),this.onAfterTransitionIn(this.id),g.publish("/dojox/mobile/afterTransitionIn",
[this,this.id]))},hide:function(){this.domNode.style.display="none"}})})},"dojo/_base/declare":function(){define("dojo/_base/declare",["./kernel","../has","./lang"],function(h,j,g){function e(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function d(a,b,f){var c,d,m,o,n,g,i,k=this._inherited=this._inherited||{};"string"==typeof a&&(c=a,a=b,b=f);f=0;o=a.callee;(c=c||o.nom)||e("can't deduce a name to call inherited()",this.declaredClass);n=this.constructor._meta;m=n.bases;i=k.p;if(c!=C){if(k.c!==
o&&(i=0,g=m[0],n=g._meta,n.hidden[c]!==o)){(d=n.chains)&&"string"==typeof d[c]&&e("calling chained method with inherited: "+c,this.declaredClass);do if(n=g._meta,d=g.prototype,n&&(d[c]===o&&d.hasOwnProperty(c)||n.hidden[c]===o))break;while(g=m[++i]);i=g?i:-1}if(g=m[++i])if(d=g.prototype,g._meta&&d.hasOwnProperty(c))f=d[c];else{o=v[c];do if(d=g.prototype,(f=d[c])&&(g._meta?d.hasOwnProperty(c):f!==o))break;while(g=m[++i])}f=g&&f||v[c]}else{if(k.c!==o&&(i=0,(n=m[0]._meta)&&n.ctor!==o)){d=n.chains;for((!d||
"manual"!==d.constructor)&&e("calling chained constructor with inherited",this.declaredClass);(g=m[++i])&&!((n=g._meta)&&n.ctor===o););i=g?i:-1}for(;(g=m[++i])&&!(f=(n=g._meta)?n.ctor:g););f=g&&f}k.c=f;k.p=i;if(f)return!0===b?f:f.apply(this,b||a)}function l(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function i(a,b,f){var c=this.getInherited(a,b);if(c)return c.apply(this,f||b||a)}function k(a){for(var b=this.constructor._meta.bases,f=0,c=b.length;f<c;++f)if(b[f]===
a)return!0;return this instanceof a}function c(a,b){for(var f in b)f!=C&&b.hasOwnProperty(f)&&(a[f]=b[f])}function b(a){u.safeMixin(this.prototype,a);return this}function a(a){return u([this].concat(a))}function f(a,b){return function(){var w;var f=arguments,c=f,d=f[0],m,e;e=a.length;var o;if(!(this instanceof f.callee))return p(f);if(b&&(d&&d.preamble||this.preamble)){o=Array(a.length);o[0]=f;for(m=0;;){if(d=f[0])(d=d.preamble)&&(f=d.apply(this,f)||f);d=a[m].prototype;(d=d.hasOwnProperty("preamble")&&
d.preamble)&&(f=d.apply(this,f)||f);if(++m==e)break;o[m]=f}}for(m=e-1;0<=m;--m)d=a[m],(w=(e=d._meta)?e.ctor:d,d=w)&&d.apply(this,o?o[m]:f);(d=this.postscript)&&d.apply(this,c)}}function m(a,f){return function(){var b=arguments,c=b,d=b[0];if(!(this instanceof b.callee))return p(b);if(f){if(d)(d=d.preamble)&&(c=d.apply(this,c)||c);(d=this.preamble)&&d.apply(this,c)}a&&a.apply(this,b);(d=this.postscript)&&d.apply(this,b)}}function o(a){return function(){var w;var f=arguments,b=0,c,d;if(!(this instanceof
f.callee))return p(f);for(;c=a[b];++b)if(w=(d=c._meta)?d.ctor:c,c=w){c.apply(this,f);break}(c=this.postscript)&&c.apply(this,f)}}function n(a,f,b){return function(){var c,d,m=0,e=1;b&&(m=f.length-1,e=-1);for(;c=f[m];m+=e)d=c._meta,(c=(d?d.hidden:c.prototype)[a])&&c.apply(this,arguments)}}function s(a){r.prototype=a.prototype;a=new r;r.prototype=null;return a}function p(a){var f=a.callee,b=s(f);f.apply(b,a);return b}function u(i,h,j){"string"!=typeof i&&(j=h,h=i,i="");var j=j||{},p,r,w,z,G,y,D,H=1,
Q=h;if("[object Array]"==t.call(h)){H=i;w=[];z=[{cls:0,refs:[]}];y={};for(var J=1,L=h.length,F=0,B,K,x,E;F<L;++F){(B=h[F])?"[object Function]"!=t.call(B)&&e("mixin #"+F+" is not a callable constructor.",H):e("mixin #"+F+" is unknown. Did you use dojo.require to pull it in?",H);K=B._meta?B._meta.bases:[B];x=0;for(B=K.length-1;0<=B;--B){E=K[B].prototype;if(!E.hasOwnProperty("declaredClass"))E.declaredClass="uniqName_"+A++;E=E.declaredClass;y.hasOwnProperty(E)||(y[E]={count:0,refs:[],cls:K[B]},++J);
E=y[E];x&&x!==E&&(E.refs.push(x),++x.count);x=E}++x.count;z[0].refs.push(x)}for(;z.length;){x=z.pop();w.push(x.cls);for(--J;r=x.refs,1==r.length;){x=r[0];if(!x||--x.count){x=0;break}w.push(x.cls);--J}if(x)for(F=0,L=r.length;F<L;++F)x=r[F],--x.count||z.push(x)}J&&e("can't build consistent linearization",H);B=h[0];w[0]=B?B._meta&&B===w[w.length-B._meta.bases.length]?B._meta.bases.length:1:0;y=w;w=y[0];H=y.length-w;h=y[H]}else y=[0],h?"[object Function]"==t.call(h)?(w=h._meta,y=y.concat(w?w.bases:h)):
e("base class is not a callable constructor.",i):null!==h&&e("unknown base class. Did you use dojo.require to pull it in?",i);if(h)for(r=H-1;;--r){p=s(h);if(!r)break;w=y[r];(w._meta?c:q)(p,w.prototype);z=new Function;z.superclass=h;z.prototype=p;h=p.constructor=z}else p={};u.safeMixin(p,j);w=j.constructor;if(w!==v.constructor)w.nom=C,p.constructor=w;for(r=H-1;r;--r)(w=y[r]._meta)&&w.chains&&(D=q(D||{},w.chains));p["-chains-"]&&(D=q(D||{},p["-chains-"]));w=!D||!D.hasOwnProperty(C);y[0]=z=D&&"manual"===
D.constructor?o(y):1==y.length?m(j.constructor,w):f(y,w);z._meta={bases:y,hidden:j,chains:D,parents:Q,ctor:j.constructor};z.superclass=h&&h.prototype;z.extend=b;z.createSubclass=a;z.prototype=p;p.constructor=z;p.getInherited=l;p.isInstanceOf=k;p.inherited=I;p.__inherited=d;if(i)p.declaredClass=i,g.setObject(i,z);if(D)for(G in D)if(p[G]&&"string"==typeof D[G]&&G!=C)w=p[G]=n(G,y,"after"===D[G]),w.nom=G;return z}var q=g.mixin,v=Object.prototype,t=v.toString,r=new Function,A=0,C="constructor",I=h.config.isDebug?
i:d;h.safeMixin=u.safeMixin=function(a,f){var b,c;for(b in f)if(c=f[b],(c!==v[b]||!(b in v))&&b!=C){if("[object Function]"==t.call(c))c.nom=b;a[b]=c}return a};return h.declare=u})},"dojox/mobile/transition":function(){define("dojox/mobile/transition",["dojo/_base/Deferred","dojo/_base/config"],function(h,j){if(j.mblCSS3Transition){var g=new h;require([j.mblCSS3Transition],function(e){g.resolve(e)});return g}return null})},"walta/SpeedBugView":function(){define("walta/SpeedBugView","dojo/_base/declare,dojo/_base/array,dojo/dom-construct,dojox/mobile/parser,dojo/store/Memory,dojox/mobile/View,dojox/mobile/StoreCarousel,walta/AnchorBar".split(","),
function(h,j,g,e,d,l,i,k){return h("walta.SpeedBugView",[l],{speedBug:null,"class":"waltaSpeedBug",postMixInProperties:function(){this.inherited(arguments);this._speedBugData=[];j.forEach(this.speedBug.bugsList,this._renderGroupOrBug,this);this._store=new d({data:this._speedBugData})},postCreate:function(){this.addChild(new k({title:"SpeedBug"}));this.addChild(new i({navButton:!1,height:"100%",pageIndicator:!1,numVisible:2,store:this._store}))},_renderGroupOrBug:function(c){c.groupRef?j.forEach(c.bugs,
this._renderBug,this):this._renderBug(c)},_renderBug:function(c){this._speedBugData.push({type:"walta/SpeedBugTile",props:'image:"'+c.image+'",ref:"'+c.ref+'"'})}})})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(h,j){var g,e={};g=function(c){var b;if(1==c.nodeType){var a=c.ownerDocument.defaultView;b=a.getComputedStyle(c,null);if(!b&&c.style)c.style.display="",b=a.getComputedStyle(c,null)}return b||{}};e.getComputedStyle=g;var d;d=function(c,b){return parseFloat(b)||
0};e.toPixelValue=d;var l={left:!0,top:!0},i=/margin|padding|width|height|max|min|offset/,k={cssFloat:"cssFloat",styleFloat:"cssFloat","float":"cssFloat"};e.get=function(c,b){var a=j.byId(c),f=arguments.length;if(2==f&&"opacity"==b)return g(a).opacity;var b=k[b]||b,m=e.getComputedStyle(a);1==f?a=m:(m=m[b]||a.style[b],f=b.toLowerCase(),f in l||(l[f]=i.test(f)),a=l[f]?d(a,m):m);return a};e.set=function(c,b,a){var f=j.byId(c),d=arguments.length,o="opacity"==b,b=k[b]||b;if(3==d)return o?f.style.opacity=
a:f.style[b]=a;for(var n in b)e.set(c,n,b[n]);return e.getComputedStyle(f)};return e})},"dojo/dom-geometry":function(){define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(h,j,g,e){function d(b,a,f,c,d,e){e=e||"px";b=b.style;if(!isNaN(a))b.left=a+e;if(!isNaN(f))b.top=f+e;if(0<=c)b.width=c+e;if(0<=d)b.height=d+e}function l(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function i(b){return"border-box"==
k.boxModel||"table"==b.tagName.toLowerCase()||l(b)}var k={boxModel:"content-box",getPadExtents:function(b,a){var b=g.byId(b),f=a||e.getComputedStyle(b),c=e.toPixelValue,d=c(b,f.paddingLeft),n=c(b,f.paddingTop),i=c(b,f.paddingRight),f=c(b,f.paddingBottom);return{l:d,t:n,r:i,b:f,w:d+i,h:n+f}},getBorderExtents:function(b,a){var b=g.byId(b),f=e.toPixelValue,c=a||e.getComputedStyle(b),d="none"!=c.borderLeftStyle?f(b,c.borderLeftWidth):0,n="none"!=c.borderTopStyle?f(b,c.borderTopWidth):0,i="none"!=c.borderRightStyle?
f(b,c.borderRightWidth):0,f="none"!=c.borderBottomStyle?f(b,c.borderBottomWidth):0;return{l:d,t:n,r:i,b:f,w:d+i,h:n+f}},getPadBorderExtents:function(b,a){var b=g.byId(b),f=a||e.getComputedStyle(b),c=k.getPadExtents(b,f),f=k.getBorderExtents(b,f);return{l:c.l+f.l,t:c.t+f.t,r:c.r+f.r,b:c.b+f.b,w:c.w+f.w,h:c.h+f.h}},getMarginExtents:function(b,a){var b=g.byId(b),f=a||e.getComputedStyle(b),c=e.toPixelValue,d=c(b,f.marginLeft),n=c(b,f.marginTop),i=c(b,f.marginRight),f=c(b,f.marginBottom);return{l:d,t:n,
r:i,b:f,w:d+i,h:n+f}},getMarginBox:function(b,a){var b=g.byId(b),f=a||e.getComputedStyle(b),f=k.getMarginExtents(b,f),c=b.offsetLeft-f.l,d=b.offsetTop-f.t,n=b.parentNode,i=e.toPixelValue;h("opera")&&n&&(n=e.getComputedStyle(n),c-="none"!=n.borderLeftStyle?i(b,n.borderLeftWidth):0,d-="none"!=n.borderTopStyle?i(b,n.borderTopWidth):0);return{l:c,t:d,w:b.offsetWidth+f.w,h:b.offsetHeight+f.h}},getContentBox:function(b,a){var b=g.byId(b),f=a||e.getComputedStyle(b),c=b.clientWidth,d=k.getPadExtents(b,f),
n=k.getBorderExtents(b,f);c?(f=b.clientHeight,n.w=n.h=0):(c=b.offsetWidth,f=b.offsetHeight);h("opera")&&(d.l+=n.l,d.t+=n.t);return{l:d.l,t:d.t,w:c-d.w-n.w,h:f-d.h-n.h}},setContentSize:function(b,a,f){var b=g.byId(b),c=a.w,a=a.h;i(b)&&(f=k.getPadBorderExtents(b,f),0<=c&&(c+=f.w),0<=a&&(a+=f.h));d(b,NaN,NaN,c,a)}},c={l:0,t:0,w:0,h:0};k.setMarginBox=function(b,a,f){var b=g.byId(b),m=f||e.getComputedStyle(b),f=a.w,o=a.h,n=i(b)?c:k.getPadBorderExtents(b,m),m=k.getMarginExtents(b,m);if(l(b)){var h=b.style;
if(0<=f&&!h.width)h.width="4px";if(0<=o&&!h.height)h.height="4px"}0<=f&&(f=Math.max(f-n.w-m.w,0));0<=o&&(o=Math.max(o-n.h-m.h,0));d(b,a.l,a.t,f,o)};k.isBodyLtr=function(b){b=b||j.doc;return"ltr"==(j.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};k.docScroll=function(b){var b=b||j.doc,a=j.doc.parentWindow||j.doc.defaultView;return"pageXOffset"in a?{x:a.pageXOffset,y:a.pageYOffset}:(a=b.documentElement)&&{x:k.fixIeBiDiScrollLeft(a.scrollLeft||0,b),y:a.scrollTop||0}};k.fixIeBiDiScrollLeft=
function(b){return b};k.position=function(b,a){b=g.byId(b);j.body(b.ownerDocument);var f=b.getBoundingClientRect(),f={x:f.left,y:f.top,w:f.right-f.left,h:f.bottom-f.top};if(a){var c=k.docScroll(b.ownerDocument);f.x+=c.x;f.y+=c.y}return f};k.getMarginSize=function(b,a){var b=g.byId(b),f=k.getMarginExtents(b,a||e.getComputedStyle(b)),c=b.getBoundingClientRect();return{w:c.right-c.left+f.w,h:c.bottom-c.top+f.h}};k.normalizeEvent=function(b){if(!("layerX"in b))b.layerX=b.offsetX,b.layerY=b.offsetY};return k})},
"dojo/Stateful":function(){define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(h,j,g,e){return h("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(d){var e=this._attrPairNames;return e[d]?e[d]:e[d]={s:"_"+d+"Setter",g:"_"+d+"Getter"}},postscript:function(d){d&&this.set(d)},_get:function(d,e){return"function"===typeof this[e.g]?this[e.g]():this[d]},get:function(d){return this._get(d,this._getAttrNames(d))},set:function(d,g){if("object"===typeof d){for(var i in d)d.hasOwnProperty(i)&&
"_watchCallbacks"!=i&&this.set(i,d[i]);return this}i=this._getAttrNames(d);var h=this._get(d,i);i=this[i.s];var c;"function"===typeof i?c=i.apply(this,Array.prototype.slice.call(arguments,1)):this[d]=g;if(this._watchCallbacks){var b=this;e(c,function(){b._watchCallbacks(d,h,g)})}return this},_changeAttrValue:function(d,e){var g=this.get(d);this[d]=e;this._watchCallbacks&&this._watchCallbacks(d,g,e);return this},watch:function(d,e){var i=this._watchCallbacks;if(!i)var h=this,i=this._watchCallbacks=
function(a,f,b,c){var d=function(c){if(c)for(var c=c.slice(),d=0,e=c.length;d<e;d++)c[d].call(h,a,f,b)};d(i["_"+a]);c||d(i["*"])};!e&&"function"===typeof d?(e=d,d="*"):d="_"+d;var c=i[d];"object"!==typeof c&&(c=i[d]=[]);c.push(e);var b={};b.unwatch=b.remove=function(){var a=g.indexOf(c,e);-1<a&&c.splice(a,1)};return b}})})},"dojo/dom-prop":function(){define("dojo/dom-prop","exports,./_base/kernel,./sniff,./_base/lang,./dom,./dom-style,./dom-construct,./_base/connect".split(","),function(h,j,g,e,d,
l,i,k){var c={},b=0,a=j._scopeName+"attrid";h.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};h.get=function(a,b){var a=d.byId(a),c=b.toLowerCase();return a[h.names[c]||b]};h.set=function(f,m,g){f=d.byId(f);if(2==arguments.length&&"string"!=typeof m){for(var n in m)h.set(f,n,m[n]);return f}n=m.toLowerCase();n=h.names[n]||m;if("style"==n&&"string"!=typeof g)return l.set(f,g),f;if("innerHTML"==
n)return f[n]=g,f;if(e.isFunction(g)){var i=f[a];i||(i=b++,f[a]=i);c[i]||(c[i]={});var j=c[i][n];if(j)k.disconnect(j);else try{delete f[n]}catch(u){}g?c[i][n]=k.connect(f,n,g):f[n]=null;return f}f[n]=g;return f}})},"walta/XmlDocument":function(){define("walta/XmlDocument",["dojo/_base/declare","dojo/_base/lang","dojo/request/xhr"],function(h,j,g){return h(null,{namespaceMap:null,url:null,_xml:null,_xmlNSResolver:null,constructor:function(e){h.safeMixin(this,e)},load:function(){this._xmlNSResolver=
j.hitch(this,function(e){return this.namespaceMap[e]||null});return g(this.url,{handleAs:"xml"}).then(j.hitch(this,function(e){this._xml=e}))},getString:function(e,d){return this._xml.evaluate(d,null===e?this._xml.documentElement:e,this._xmlNSResolver,XPathResult.STRING_TYPE,null).stringValue},getNumber:function(e,d){return this._xml.evaluate(d,null===e?this._xml.documentElement:e,this._xmlNSResolver,XPathResult.NUMBER_TYPE,null).numberValue},getStringArray:function(e,d){for(var g=this._xml.evaluate(d,
null===e?this._xml.documentElement:e,this._xmlNSResolver,XPathResult.ANY_TYPE,null),i=[],h;h=g.iterateNext();)i.push(h.value);return i},getNode:function(e,d){return this._xml.evaluate(d,null===e?this._xml.documentElement:e,this._xmlNSResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}})})},"walta/TaxonView":function(){define("walta/TaxonView","dojo/_base/declare,dojo/aspect,dojo/_base/lang,dojo/dom-construct,dojox/mobile/View,dojox/mobile/Button,walta/AnchorBar,walta/MediaView".split(","),
function(h,j,g,e,d,l,i,k){return h("walta.TaxonView",[d],{taxon:null,"class":"waltaTaxon waltaFullscreen",onBack:function(){},buildRendering:function(){this.inherited(arguments);this.addChild(new i({title:"ALT Key"}));e.create("h5",{innerHTML:this.taxon.name},this.containerNode);e.create("h5",{innerHTML:"("+this.taxon.commonName+")"},this.containerNode);var c=e.create("div",{"class":"waltaPanel"},this.containerNode);this._buildNamedField(c,"Size","Up to "+this.taxon.size+"mm.");this._buildNamedField(c,
"Habitat",this.taxon.habitat);this._buildNamedField(c,"Movement",this.taxon.movement);this._buildNamedField(c,"Confused with",this.taxon.confusedWith);this._buildNamedField(c,"SIGNAL score",this.taxon.signalScore);this.taxon.mediaUrls[0]&&this.addChild(new k({mediaUrls:this.taxon.mediaUrls}));this._buildButton("Go back and try again","waltaGoBack",g.hitch(this,function(){this.onBack()}));this._buildButton("Photo gallery","waltaGallery",g.hitch(this,function(){this.onBack()}))},_buildNamedField:function(c,
b,a){""!=a&&(c=e.create("p",{},c),e.create("strong",{innerHTML:b+":"},c),e.create("span",{innerHTML:a},c))},_buildButton:function(c,b,a){c=new l({label:c,"class":"waltaActionIcon "+b,duration:500});j.after(c,"onClick",a);this.addChild(c)}})})},"dojo/dom-attr":function(){define("dojo/dom-attr","exports,./sniff,./_base/lang,./dom,./dom-style,./dom-prop".split(","),function(h,j,g,e,d,l){function i(b,a){var f=b.getAttributeNode&&b.getAttributeNode(a);return f&&f.specified}var k={innerHTML:1,className:1,
htmlFor:void 0,value:1},c={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};h.has=function(b,a){var f=a.toLowerCase();return k[l.names[f]||a]||i(e.byId(b),c[f]||a)};h.get=function(b,a){var b=e.byId(b),f=a.toLowerCase(),d=l.names[f]||a,o=b[d];if(k[d]&&"undefined"!=typeof o||"href"!=d&&("boolean"==typeof o||g.isFunction(o)))return o;f=c[f]||a;return i(b,f)?b.getAttribute(f):null};h.set=function(b,a,f){b=e.byId(b);if(2==arguments.length){for(var m in a)h.set(b,m,a[m]);return b}m=
a.toLowerCase();var i=l.names[m]||a,n=k[i];if("style"==i&&"string"!=typeof f)return d.set(b,f),b;if(n||"boolean"==typeof f||g.isFunction(f))return l.set(b,a,f);b.setAttribute(c[m]||a,f);return b};h.remove=function(b,a){e.byId(b).removeAttribute(c[a.toLowerCase()]||a)};h.getNodeProp=function(b,a){var b=e.byId(b),f=a.toLowerCase(),d=l.names[f]||a;if(d in b&&"href"!=d)return b[d];f=c[f]||a;return i(b,f)?b.getAttribute(f):null}})},"dojo/dom-construct":function(){define("dojo/dom-construct","exports,./_base/kernel,./sniff,./_base/window,./dom,./dom-attr,./on".split(","),
function(h,j,g,e,d,l){function i(a,b){var f=b.parentNode;f&&f.insertBefore(a,b)}var k={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,b={},a=0,f="__"+j._scopeName+"ToDomId",m;for(m in k)if(k.hasOwnProperty(m))j=k[m],j.pre="option"==m?'<select multiple="multiple">':"<"+j.join("><")+">",j.post="</"+
j.reverse().join("></")+">";h.toDom=function(d,m){var m=m||e.doc,g=m[f];g||(m[f]=g=++a+"",b[g]=m.createElement("div"));var d=d+"",i=d.match(c),h=i?i[1].toLowerCase():"",g=b[g];if(i&&k[h]){i=k[h];g.innerHTML=i.pre+d+i.post;for(i=i.length;i;--i)g=g.firstChild}else g.innerHTML=d;if(1==g.childNodes.length)return g.removeChild(g.firstChild);for(h=m.createDocumentFragment();i=g.firstChild;)h.appendChild(i);return h};h.place=function(a,b,f){b=d.byId(b);"string"==typeof a&&(a=/^\s*</.test(a)?h.toDom(a,b.ownerDocument):
d.byId(a));if("number"==typeof f){var c=b.childNodes;!c.length||c.length<=f?b.appendChild(a):i(a,c[0>f?0:f])}else switch(f){case "before":i(a,b);break;case "after":f=a;(c=b.parentNode)&&(c.lastChild==b?c.appendChild(f):c.insertBefore(f,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":h.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){i(a,b.firstChild);break}default:b.appendChild(a)}return a};h.create=function(a,b,f,c){var m=e.doc;if(f)f=d.byId(f),
m=f.ownerDocument;"string"==typeof a&&(a=m.createElement(a));b&&l.set(a,b);f&&h.place(a,f,c);return a};h.empty=function(a){d.byId(a).innerHTML=""};h.destroy=function(a){if(a=d.byId(a)){var b=a,a=a.parentNode;if(b.firstChild)b.innerHTML="";a&&a.removeChild(b)}}})},"dojox/mobile/parser":function(){define("dojox/mobile/parser","dojo/_base/kernel,dojo/_base/array,dojo/_base/config,dojo/_base/lang,dojo/_base/window,dojo/ready".split(","),function(h,j,g,e,d,l){var i=e.getObject("dojox.mobile",!0),k=new function(){var c=
{},b=function(a,d){if("string"===typeof d){var g=a+":"+d.replace(/ /g,"");return c[g]||(c[g]=b(a).createSubclass(j.map(d.split(/, */),b)))}return c[a]||(c[a]=e.getObject(a)||require(a))},a=function(a){return eval(a)};this.instantiate=function(f,c,d){var c=c||{},d=d||{},g,i=[];if(f){for(g=0;g<f.length;g++){var h=f[g],k=b(h._type,h.getAttribute("data-dojo-mixins")),j=k.prototype,l={},t,r,A;e.mixin(l,a.call(d.propsThis,"({"+(h.getAttribute("data-dojo-props")||"")+"})"));e.mixin(l,d.defaults);e.mixin(l,
c);for(t in j)if(r=(r=h.getAttributeNode(t))&&r.nodeValue,A=typeof j[t],r||!("boolean"!==A||""!==r))e.isArray(j[t])?l[t]=r.split(/\s*,\s*/):"string"===A?l[t]=r:"number"===A?l[t]=r-0:"boolean"===A?l[t]="false"!==r:"object"===A?l[t]=eval("("+r+")"):"function"===A&&(l[t]=e.getObject(r,!1)||new Function(r),h.removeAttribute(t));l["class"]=h.className;if(!l.style)l.style=h.style.cssText;if(r=h.getAttribute("data-dojo-attach-point"))l.dojoAttachPoint=r;if(r=h.getAttribute("data-dojo-attach-event"))l.dojoAttachEvent=
r;k=new k(l,h);i.push(k);(h=h.getAttribute("jsId")||h.getAttribute("data-dojo-id"))&&e.setObject(h,k)}for(g=0;g<i.length;g++)f=i[g],!d.noStart&&f.startup&&!f._started&&f.startup()}return i};this.parse=function(a,c){if(a){if(!c&&a.rootNode)c=a,a=a.rootNode}else a=d.body();var e=a.getElementsByTagName("*"),g,i,h=[];for(g=0;g<e.length;g++){var k=e[g];if(i=k._type=k.getAttribute("dojoType")||k.getAttribute("data-dojo-type"))if(k._skip)k._skip="";else{if(b(i).prototype.stopParser&&(!c||!c.template)){var j=
k.getElementsByTagName("*");for(i=0;i<j.length;i++)j[i]._skip="1"}h.push(k)}}return this.instantiate(h,c&&c.template?{template:!0}:null,c)}};g.parseOnLoad&&l(100,function(){try{require("dojo/parser")||k.parse()}catch(c){k.parse()}});i.parser=k;h.parser=h.parser||k;return k})},"walta/KeyNode":function(){define("walta/KeyNode",["dojo/_base/declare","walta/Question"],function(h,j){var g=h(null,{questions:[],back:null,constructor:function(e,d,h){this.questions=[new j(g,e,d,d.getNode(h,"tax:question[@num=1]")),
new j(g,e,d,d.getNode(h,"tax:question[@num=2]"))];this.back=function(){var i=d.getNode(h,"../..");return"keyNode"==i.tagName?new g(e,d,i):null}}});return g})},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(h,j,g,e){return h("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(d){if(this.disabled)return g.stop(d),!1;var h=!1===this.onClick(d);if(!h&&"submit"==this.type&&!(this.valueNode||
this.focusNode).form)for(var i=this.domNode;i.parentNode;i=i.parentNode){var k=e.byNode(i);if(k&&"function"==typeof k._onSubmit){k._onSubmit(d);h=!0;break}}h&&d.preventDefault();return!h},postCreate:function(){this.inherited(arguments);j.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(d){this._set("label",d);(this.containerNode||this.focusNode).innerHTML=d}})})},"walta/KeyNodeView":function(){define("walta/KeyNodeView","dojo/_base/declare,dojo/_base/lang,dojo/aspect,dojo/dom-construct,dojox/mobile/View,dojox/mobile/Button,dojox/mobile/Container,walta/QuestionView,walta/AnchorBar".split(","),
function(h,j,g,e,d,l,i,k,c){return h("walta.KeyNodeView",[d],{keyNode:null,"class":"waltaFullscreen waltaKey",onChoose:function(){},onBack:function(){},_createAndBindQuestion:function(b,a){var f=new k({question:this.keyNode.questions[b]});g.after(f,"onClick",j.hitch(this,function(){this.onChoose(b)}));a.addChild(f)},buildRendering:function(){this.inherited(arguments);this.addChild(new c({title:"ALT Key"}));e.create("h4",{innerHTML:"Choose the best match"},this.containerNode);for(var b=new i({"class":"waltaQuestionContainer"}),
a=0;a<this.keyNode.questions.length;a++)this._createAndBindQuestion(a,b);this.addChild(b);b=new l({label:"No match? Go back","class":"waltaBackButton",duration:500});g.after(b,"onClick",j.hitch(this,function(){this.onBack()}));this.addChild(b)}})})},"dojo/keys":function(){define("dojo/keys",["./_base/kernel","./sniff"],function(h,j){return h.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:91,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,
UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,
LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:j("mac")?j("safari")?91:224:17}})},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(h,j,g,e,d){var l={},i={},k={length:0,add:function(c){if(i[c.id])throw Error("Tried to register widget with id=="+c.id+" but that id is already registered");i[c.id]=c;this.length++},remove:function(c){i[c]&&(delete i[c],this.length--)},byId:function(c){return"string"==typeof c?i[c]:c},
byNode:function(c){return i[c.getAttribute("widgetId")]},toArray:function(){var c=[],b;for(b in i)c.push(i[b]);return c},getUniqueId:function(c){var b;do b=c+"_"+(c in l?++l[c]:l[c]=0);while(i[b]);return"dijit"==d._scopeName?b:d._scopeName+"_"+b},findWidgets:function(c,b){function a(c){for(c=c.firstChild;c;c=c.nextSibling)if(1==c.nodeType){var d=c.getAttribute("widgetId");d?(d=i[d])&&f.push(d):c!==b&&a(c)}}var f=[];a(c);return f},_destroyAll:function(){d._curFocus=null;d._prevFocus=null;d._activeStack=
[];h.forEach(k.findWidgets(e.body()),function(c){c._destroyed||(c.destroyRecursive?c.destroyRecursive():c.destroy&&c.destroy())})},getEnclosingWidget:function(c){for(;c;){var b=1==c.nodeType&&c.getAttribute("widgetId");if(b)return i[b];c=c.parentNode}return null},_hash:i};return d.registry=k})},"dojox/mobile/Pane":function(){define("dojox/mobile/Pane",["dojo/_base/array","dojo/_base/declare","dijit/_Contained","dijit/_WidgetBase"],function(h,j,g,e){return j("dojox.mobile.Pane",[e,g],{baseClass:"mblPane",
buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},resize:function(){h.forEach(this.getChildren(),function(d){d.resize&&d.resize()})}})})},"dojox/mobile/common":function(){define("dojox/mobile/common","dojo/_base/array,dojo/_base/config,dojo/_base/connect,dojo/_base/lang,dojo/_base/window,dojo/dom-class,dojo/dom-construct,dojo/ready,dijit/registry,./sniff,./uacss".split(","),function(h,j,g,e,d,l,i,k,c,b){var a=e.getObject("dojox.mobile",!0);
a.getScreenSize=function(){return{h:d.global.innerHeight||d.doc.documentElement.clientHeight,w:d.global.innerWidth||d.doc.documentElement.clientWidth}};a.updateOrient=function(){var b=a.getScreenSize();l.replace(d.doc.documentElement,b.h>b.w?"dj_portrait":"dj_landscape",b.h>b.w?"dj_landscape":"dj_portrait")};a.updateOrient();a.tabletSize=500;a.detectScreenSize=function(b){var f=a.getScreenSize(),c=Math.min(f.w,f.h),e,i;if(c>=a.tabletSize&&(b||!this._sz||this._sz<a.tabletSize))e="phone",i="tablet";
else if(c<a.tabletSize&&(b||!this._sz||this._sz>=a.tabletSize))e="tablet",i="phone";i&&(l.replace(d.doc.documentElement,"dj_"+i,"dj_"+e),g.publish("/dojox/mobile/screenSize/"+i,[f]));this._sz=c};a.detectScreenSize();a.hideAddressBarWait="number"===typeof j.mblHideAddressBarWait?j.mblHideAddressBarWait:1500;a.hide_1=function(){scrollTo(0,1);a._hidingTimer=0==a._hidingTimer?200:2*a._hidingTimer;setTimeout(function(){a.isAddressBarHidden()||a._hidingTimer>a.hideAddressBarWait?(a.resizeAll(),a._hiding=
!1):setTimeout(a.hide_1,a._hidingTimer)},50)};a.hideAddressBar=function(){if(!a.disableHideAddressBar&&!a._hiding){a._hiding=!0;a._hidingTimer=b("iphone")?200:0;var f=screen.availHeight;if(b("android")){f=outerHeight/devicePixelRatio;if(0==f)a._hiding=!1,setTimeout(function(){a.hideAddressBar()},200);f<=innerHeight&&(f=outerHeight);if(3>b("android"))d.doc.documentElement.style.overflow=d.body().style.overflow="visible"}if(d.body().offsetHeight<f)d.body().style.minHeight=f+"px",a._resetMinHeight=!0;
setTimeout(a.hide_1,a._hidingTimer)}};a.isAddressBarHidden=function(){return 1===pageYOffset};a.resizeAll=function(b,f){if(!a.disableResizeAll){g.publish("/dojox/mobile/resizeAll",[b,f]);g.publish("/dojox/mobile/beforeResizeAll",[b,f]);if(a._resetMinHeight)d.body().style.minHeight=a.getScreenSize().h+"px";a.updateOrient();a.detectScreenSize();var e=function(a){var b=a.getParent&&a.getParent();return!(b&&b.resize||!a.resize)},i=function(a){h.forEach(a.getChildren(),function(a){e(a)&&a.resize();i(a)})};
f?(f.resize&&f.resize(),i(f)):h.forEach(h.filter(c.toArray(),e),function(a){a.resize()});g.publish("/dojox/mobile/afterResizeAll",[b,f])}};a.openWindow=function(a,b){d.global.open(a,b||"_blank")};!1!==j.mblApplyPageStyles&&l.add(d.doc.documentElement,"mobile");b("chrome")&&l.add(d.doc.documentElement,"dj_chrome");if(d.global._no_dojo_dm){var e=d.global._no_dojo_dm,f;for(f in e)a[f]=e[f];a.deviceTheme.setDm(a)}b.add("mblAndroidWorkaround",!1!==j.mblAndroidWorkaround&&3>b("android"),void 0,!0);b.add("mblAndroid3Workaround",
!1!==j.mblAndroid3Workaround&&3<=b("android"),void 0,!0);k(function(){a.detectScreenSize(!0);!1!==j.mblAndroidWorkaroundButtonStyle&&b("android")&&i.create("style",{innerHTML:"BUTTON,INPUT[type='button'],INPUT[type='submit'],INPUT[type='reset'],INPUT[type='file']::-webkit-file-upload-button{-webkit-appearance:none;}"},d.doc.head,"first");b("mblAndroidWorkaround")&&i.create("style",{innerHTML:".mblView.mblAndroidWorkaround{position:absolute;top:-9999px !important;left:-9999px !important;}"},d.doc.head,
"last");var f=a.resizeAll;if(!1!==j.mblHideAddressBar&&-1!=navigator.appVersion.indexOf("Mobile")||!0===j.mblForceHideAddressBar)if(a.hideAddressBar(),!0===j.mblAlwaysHideAddressBar)f=a.hideAddressBar;var c=6<=b("iphone");if((b("android")||c)&&void 0!==d.global.onorientationchange){var e=f,f=function(){var a=g.connect(null,"onresize",null,function(b){g.disconnect(a);e(b)})},h=a.getScreenSize(),k=c?20:100,l=null,q=null;c&&(g.connect(null,"onkeyup",null,function(){l=(new Date).getTime()}),q=function(a){if(a&&
1!==a.nodeType)a=a.parentNode;if(!a||1!==a.nodeType)return!1;a=a.tagName;return"SELECT"===a||"INPUT"===a||"TEXTAREA"===a||"BUTTON"===a});g.connect(null,"onresize",null,function(b){var f=a.getScreenSize();if(f.w==h.w&&Math.abs(f.h-h.h)>=k&&(!c||!(l&&400>(new Date).getTime()-l||q(d.doc.activeElement))))c&&1<pageYOffset?a.resizeAll():e(b);h=f})}g.connect(null,void 0!==d.global.onorientationchange?"onorientationchange":"onresize",null,f);d.body().style.visibility="visible"});return a})},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",
"dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/sniff,dojo/window,../a11y".split(","),function(h,j,g,e,d,l,i,k){return j("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(c){this._set("disabled",c);g.set(this.focusNode,"disabled",c);this.valueNode&&g.set(this.valueNode,
"disabled",c);this.focusNode.setAttribute("aria-disabled",c?"true":"false");c?(this._set("hovering",!1),this._set("active",!1),c="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",h.forEach(d.isArray(c)?c:[c],function(b){this[b].setAttribute("tabIndex","-1")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(c){if("mouse"==c&&this.isFocusable())var b=this.connect(this.focusNode,"onfocus",function(){this.disconnect(a);
this.disconnect(b)}),a=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(a);this.disconnect(b);this.focused&&this.focus()});this.scrollOnFocus&&this.defer(function(){k.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=e.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(c){}},compare:function(c,b){return"number"==typeof c&&"number"==
typeof b?isNaN(c)&&isNaN(b)?0:c-b:c>b?1:c<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(c,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=c;this._pendingOnChange=this._pendingOnChange||typeof c!=typeof this._lastValueReported||0!=this.compare(c,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)if(this._lastValueReported=c,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&
this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(c)})},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dojo/window":function(){define("dojo/window","./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style".split(","),function(h,j,g,e,d,l){var i={getBox:function(e){var e=
e||g.doc,c="BackCompat"==e.compatMode?g.body(e):e.documentElement,b=d.docScroll(e),e=i.get(e);return{l:b.x,t:b.y,w:e.innerWidth||c.clientWidth,h:e.innerHeight||c.clientHeight}},get:function(d){return d.parentWindow||d.defaultView},scrollIntoView:function(i,c){try{var i=e.byId(i),b=i.ownerDocument||g.doc,a=g.body(b),f=b.documentElement||a.parentNode;if((i==a||i==f)&&"undefined"!=typeof i.scrollIntoView)i.scrollIntoView(!1);else{var m="BackCompat"==b.compatMode?a:f,h=m.clientWidth,j=m.clientHeight,
s=!d.isBodyLtr(b),p=c||d.position(i),u=i.parentNode;if("fixed"!=l.get(i,"position").toLowerCase())for(;u;){u==a&&(u=a);var q=d.position(u),v="fixed"==l.get(u,"position").toLowerCase();if(u==a)q.w=h,q.h=j,q.x=0,q.y=0;else{var t=d.getPadBorderExtents(u);q.w-=t.w;q.h-=t.h;q.x+=t.l;q.y+=t.t;var r=u.clientWidth,A=q.w-r;if(0<r&&0<A)q.w=r,q.x+=s&&u.clientLeft>t.l?A:0;r=u.clientHeight;A=q.h-r;if(0<r&&0<A)q.h=r}if(v){if(0>q.y)q.h+=q.y,q.y=0;if(0>q.x)q.w+=q.x,q.x=0;if(q.y+q.h>j)q.h=j-q.y;if(q.x+q.w>h)q.w=h-
q.x}var C=p.x-q.x,I=p.y-Math.max(q.y,0),M=C+p.w-q.w,N=I+p.h-q.h;if(0<M*C){var O=Math[0>C?"max":"min"](C,M);p.x+=u.scrollLeft;u.scrollLeft+=O;p.x-=u.scrollLeft}0<N*I&&(p.y+=u.scrollTop,u.scrollTop+=Math[0>I?"max":"min"](I,N),p.y-=u.scrollTop);u=u!=a&&!v&&u.parentNode}}}catch(P){console.error("scrollIntoView: "+P),i.scrollIntoView(!1)}}};h.setObject("dojo.window",i);return i})},"dojo/mouse":function(){define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(h,j,g,e,d){function l(d,
g){var c=function(b,a){return j(b,d,function(f){if(g)return g(f,a);if(!e.isDescendant(f.relatedTarget,b))return a.call(this,f)})};c.bubble=function(b){return l(d,function(a,f){var c=b(a.target),d=a.relatedTarget;if(c&&c!=(d&&1==d.nodeType&&b(d)))return f.call(c,a)})};return c}g.add("events-mousewheel",d.doc&&"onmousewheel"in d.doc);d={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(d,e){return d.button==e},isLeft:function(d){return 0==d.button},isMiddle:function(d){return 1==d.button},isRight:function(d){return 2==
d.button}};h.mouseButtons=d;h=g("events-mousewheel")?"mousewheel":function(d,e){return j(d,"DOMMouseScroll",function(c){c.wheelDelta=-c.detail;e.call(this,c)})};return{_eventHandler:l,enter:l("mouseover"),leave:l("mouseout"),wheel:h,isLeft:d.isLeft,isMiddle:d.isMiddle,isRight:d.isRight}})},"dojo/topic":function(){define("dojo/topic",["./Evented"],function(h){var j=new h;return{publish:function(g,e){return j.emit.apply(j,arguments)},subscribe:function(g,e){return j.on.apply(j,arguments)}}})},"dojo/_base/unload":function(){define("dojo/_base/unload",
["./kernel","./lang","../on"],function(h,j,g){var e=window,d={addOnWindowUnload:function(d,i){if(!h.windowUnloaded)g(e,"unload",h.windowUnloaded=function(){});g(e,"unload",j.hitch(d,i))},addOnUnload:function(d,i){g(e,"beforeunload",j.hitch(d,i))}};h.addOnWindowUnload=d.addOnWindowUnload;h.addOnUnload=d.addOnUnload;return d})},"dojox/mobile/ContentPane":function(){define("dojox/mobile/ContentPane",["dojo/_base/declare","./Container","./_ContentPaneMixin"],function(h,j,g){return h("dojox.mobile.ContentPane",
[j,g],{baseClass:"mblContentPane"})})},"walta/AppController":function(){define("walta/AppController","dojo/_base/declare,dojo/_base/lang,dojo/dom-construct,dojo/aspect,dojo/topic,walta/Key,walta/KeyNode,walta/Taxon,walta/KeyNodeView,walta/TaxonView,walta/HomeView,walta/SpeedBug,walta/SpeedBugView".split(","),function(h,j,g,e,d,l,i,k,c,b,a,f,m){return h(null,{keyUrl:"",divNode:null,_key:null,_speedBug:null,_currentView:null,_views:{},_decisionCounter:0,_decisionViews:[],constructor:function(a){h.safeMixin(this,
a);this._key=new l({url:this.keyUrl})},_startAltKey:function(){this._doTransition(this._createDecisionView(),1)},_questionChosen:function(a){this._key.choose(a);this._doTransition(this._createDecisionView(),1)},_goBack:function(){this._key.back()?this._doTransition(this._createDecisionView(),-1):this._doTransition(this._views.home,-1)},_doTransition:function(a,b){this._currentView.performTransition(a.get("id"),b,"slide");this._currentView=a},_createDecisionView:function(){var a=null,f=g.create("div",
{id:"waltaDecisionView"+this._decisionCounter++},this.divNode);this._key.currentDecision instanceof i?(a=new c({keyNode:this._key.currentDecision},f),e.after(a,"onChoose",j.hitch(this,this._questionChosen),!0),e.after(a,"onBack",j.hitch(this,this._goBack),!0)):this._key.currentDecision instanceof k&&(a=new b({taxon:this._key.currentDecision},f),e.after(a,"onBack",j.hitch(this,this._goBack),!0));a.startup();this._decisionViews.unshift(a);2<this._decisionViews.length&&(this._decisionViews.pop().destroyRecursive(),
this._decisionCounter%=3);return a},_createHomeView:function(){var b=new a({selected:!0},g.create("div",{id:"waltaHomeView"},this.divNode));this._views.home=b;b.startup();this._currentView=b},_createSpeedBug:function(){this._speedBug=new f(this._key.url,this._key._xml);var a=new m({speedBug:this._speedBug},g.create("div",{id:"waltaSpeedBug"},this.divNode));this._views.speedBug=a;a.startup()},startApp:function(){this._key.load().then(j.hitch(this,this._createHomeView)).then(j.hitch(this,this._createSpeedBug));
d.subscribe("anchorbar/home",j.hitch(this,function(){this._doTransition(this._views.home,-1)}));d.subscribe("key/jump",j.hitch(this,function(a){this._key.lookupNode(a);this._doTransition(this._createDecisionView(),1)}));d.subscribe("key/start",j.hitch(this,function(){this._key.reset();this._startAltKey()}));d.subscribe("speedbug/open",j.hitch(this,function(){this._doTransition(this._views.speedBug,1)}))}})})},"dojox/mobile/SwapView":function(){define("dojox/mobile/SwapView","dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-class,dijit/registry,./View,./_ScrollableMixin,./sniff".split(","),
function(h,j,g,e,d,l,i,k){return g("dojox.mobile.SwapView",[i,k],{scrollDir:"f",weight:1.2,buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"mblSwapView");this.setSelectable(this.domNode,!1);this.containerNode=this.domNode;this.subscribe("/dojox/mobile/nextPage","handleNextPage");this.subscribe("/dojox/mobile/prevPage","handlePrevPage");this.noResize=!0},startup:function(){this._started||this.inherited(arguments)},resize:function(){this.inherited(arguments);h.forEach(this.getChildren(),
function(c){c.resize&&c.resize()})},onTouchStart:function(c){var b=this.domNode.offsetTop,a=this.nextView(this.domNode);if(a)a.stopAnimation(),d.add(a.domNode,"mblIn"),a.containerNode.style.paddingTop=b+"px";if(a=this.previousView(this.domNode))a.stopAnimation(),d.add(a.domNode,"mblIn"),a.containerNode.style.paddingTop=b+"px";this.inherited(arguments)},handleNextPage:function(c){this.domNode.parentNode!==(c.refId&&e.byId(c.refId)||c.domNode).parentNode||this.getShowingView()!==this||this.goTo(1)},
handlePrevPage:function(c){this.domNode.parentNode!==(c.refId&&e.byId(c.refId)||c.domNode).parentNode||this.getShowingView()!==this||this.goTo(-1)},goTo:function(c,b){var a=b?l.byId(b):1==c?this.nextView(this.domNode):this.previousView(this.domNode);if(a&&a!==this)this.stopAnimation(),a.stopAnimation(),this.domNode._isShowing=!1,a.domNode._isShowing=!0,this.performTransition(a.id,c,"slide",null,function(){j.publish("/dojox/mobile/viewChanged",[a])})},isSwapView:function(c){return c&&1===c.nodeType&&
d.contains(c,"mblSwapView")},nextView:function(c){for(c=c.nextSibling;c;c=c.nextSibling)if(this.isSwapView(c))return l.byNode(c);return null},previousView:function(c){for(c=c.previousSibling;c;c=c.previousSibling)if(this.isSwapView(c))return l.byNode(c);return null},scrollTo:function(c){if(!this._beingFlipped){var b,a;0>c.x?(b=this.nextView(this.domNode),a=c.x+this.domNode.offsetWidth):(b=this.previousView(this.domNode),a=c.x-this.domNode.offsetWidth);if(b){if("none"===b.domNode.style.display)b.domNode.style.display=
"",b.resize();b._beingFlipped=!0;b.scrollTo({x:a});b._beingFlipped=!1}}this.inherited(arguments)},findDisp:function(c){if(!d.contains(c,"mblSwapView"))return this.inherited(arguments);if(!c.parentNode)return null;for(var b=c.parentNode.childNodes,a=0;a<b.length;a++){var f=b[a];if(1===f.nodeType&&d.contains(f,"mblSwapView")&&!d.contains(f,"mblIn")&&"none"!==f.style.display)return f}return c},slideTo:function(c,b,a,f){if(!this._beingFlipped){var d=this.domNode.offsetWidth,e=f||this.getPos(),g,i;if(0>
e.x)if(g=this.nextView(this.domNode),e.x<-d/4){if(g)c.x=-d,i=0}else g&&(i=d);else if(g=this.previousView(this.domNode),e.x>d/4){if(g)c.x=d,i=0}else g&&(i=-d);if(g)g._beingFlipped=!0,g.slideTo({x:i},b,a),g._beingFlipped=!1,g.domNode._isShowing=g&&0===i;this.domNode._isShowing=!(g&&0===i)}this.inherited(arguments)},onAnimationEnd:function(c){(!c||!c.target||!d.contains(c.target,"mblScrollableScrollTo2"))&&this.inherited(arguments)},onFlickAnimationEnd:function(c){if(!c||!c.target||d.contains(c.target,
"mblScrollableScrollTo2"))if(this.inherited(arguments),this.domNode._isShowing)h.forEach(this.domNode.parentNode.childNodes,function(b){if(this.isSwapView(b)&&(d.remove(b,"mblIn"),!b._isShowing))b.style.display="none",b.style.webkitTransform="",b.style.left="0px"},this),j.publish("/dojox/mobile/viewChanged",[this]),this.containerNode.style.paddingTop=""}})})},"walta/MediaView":function(){define("walta/MediaView","dojo/_base/declare,dojo/_base/array,dojo/on,dojo/aspect,dojo/dom-construct,dojo/_base/lang,dojox/mobile/ContentPane,dojox/mobile/SwapView,dojox/mobile/Carousel".split(","),
function(h,j,g,e,d,l,i,k,c){return h("walta.MediaView",[i],{mediaUrls:[],"class":"waltaImageContainer",_carousel:null,buildRendering:function(){this.inherited(arguments);if(this.mediaUrls[0]){var b=d.create("div",{"class":"waltaImageInner"},this.containerNode);d.create("img",{src:this.mediaUrls[0]},b);d.create("div",{"class":"waltaZoom"},b);g(b,"click",l.hitch(this,function(a){this._openCarousel();a.stopPropagation()}))}},_openCarousel:function(){if(!this._carousel){this._carousel=new c({navButton:!1,
numVisible:1,"class":"waltaCarousel"});j.forEach(this.mediaUrls,l.hitch(this,function(a){this._carousel.addChild(this._buildImageView(a))}));var b=d.create("div",{"class":"waltaCloseButton"},this._carousel.containerNode);g(b,"click",l.hitch(this,function(a){this._carousel.destroyRecursive();this._carousel=null;a.stopPropagation()}));g(this._carousel.domNode,"click",function(a){a.stopPropagation()});this.addChild(this._carousel);this._carousel.startup()}},_buildImageView:function(b){var a=new k({"class":"waltaZoomedImage"});
d.create("img",{src:b},a.containerNode);return a}})})},"dojox/mobile/uacss":function(){define("dojox/mobile/uacss",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/window","./sniff"],function(h,j,g,e){g=g.doc.documentElement;g.className=j.trim(g.className+" "+[e("bb")?"dj_bb":"",e("android")?"dj_android":"",e("iphone")?"dj_iphone":"",e("ipod")?"dj_ipod":"",e("ipad")?"dj_ipad":""].join(" ").replace(/ +/g," "));return h})},"dojox/mobile/ProgressIndicator":function(){define("dojox/mobile/ProgressIndicator",
"dojo/_base/config,dojo/_base/declare,dojo/_base/lang,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dijit/_Contained,dijit/_WidgetBase".split(","),function(h,j,g,e,d,l,i,k,c,b){var a=j("dojox.mobile.ProgressIndicator",[b,c],{interval:100,size:40,removeOnStop:!0,startSpinning:!1,center:!0,colors:null,baseClass:"mblProgressIndicator",constructor:function(){this.colors=[];this._bars=[]},buildRendering:function(){this.inherited(arguments);this.center&&e.add(this.domNode,
"mblProgressIndicatorCenter");this.containerNode=d.create("div",{className:"mblProgContainer"},this.domNode);this.spinnerNode=d.create("div",null,this.containerNode);for(var a=0;12>a;a++)this._bars.push(d.create("div",{className:"mblProg mblProg"+a},this.spinnerNode));this.scale(this.size);this.startSpinning&&this.start()},scale:function(a){var b=a/40;i.set(this.containerNode,{webkitTransform:"scale("+b+")",webkitTransformOrigin:"0 0"});l.setMarginBox(this.domNode,{w:a,h:a});l.setMarginBox(this.containerNode,
{w:a/b,h:a/b})},start:function(){if(this.imageNode){var a=this.imageNode,b=Math.round((this.containerNode.offsetWidth-a.offsetWidth)/2),c=Math.round((this.containerNode.offsetHeight-a.offsetHeight)/2);a.style.margin=c+"px "+b+"px"}else{var d=0,g=this;this.timer=setInterval(function(){d--;d=0>d?11:d;for(var a=g.colors,b=0;12>b;b++){var f=(d+b)%12;a[f]?g._bars[b].style.backgroundColor=a[f]:e.replace(g._bars[b],"mblProg"+f+"Color","mblProg"+(11===f?0:f+1)+"Color")}},this.interval)}},stop:function(){this.timer&&
clearInterval(this.timer);this.timer=null;this.removeOnStop&&this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)},setImage:function(a){if(a)this.imageNode=d.create("img",{src:a},this.containerNode),this.spinnerNode.style.display="none";else{if(this.imageNode)this.containerNode.removeChild(this.imageNode),this.imageNode=null;this.spinnerNode.style.display=""}},destroy:function(){this.inherited(arguments);if(this===a._instance)a._instance=null}});a._instance=null;
a.getInstance=function(b){if(!a._instance)a._instance=new a(b);return a._instance};return a})},"dojox/mobile/CarouselItem":function(){define("dojox/mobile/CarouselItem","dojo/_base/declare,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dijit/_Contained,dijit/_WidgetBase".split(","),function(h,j,g,e,d,l){return h("dojox.mobile.CarouselItem",[l,d],{alt:"",src:"",headerText:"",footerText:"",baseClass:"mblCarouselItem",buildRendering:function(){this.inherited(arguments);this.domNode.tabIndex="0";
this.headerTextNode=j.create("div",{className:"mblCarouselItemHeaderText"},this.domNode);this.imageNode=j.create("img",{className:"mblCarouselItemImage"},this.domNode);this.footerTextNode=j.create("div",{className:"mblCarouselItemFooterText"},this.domNode)},startup:function(){this._started||(this.inherited(arguments),this.resize())},resize:function(){var d=g.getMarginBox(this.domNode);if(0!==d.h){var e=g.getMarginBox(this.headerTextNode).h,c=g.getMarginBox(this.footerTextNode).h;g.setMarginBox(this.imageNode,
{h:d.h-e-c})}},select:function(){var d=this.imageNode;e.set(d,"opacity",0.4);setTimeout(function(){e.set(d,"opacity",1)},1E3)},_setAltAttr:function(d){this._set("alt",d);this.imageNode.alt=d},_setSrcAttr:function(d){this._set("src",d);this.imageNode.src=d},_setHeaderTextAttr:function(d){this._set("headerText",d);this.headerTextNode.innerHTML=this._cv?this._cv(d):d},_setFooterTextAttr:function(d){this._set("footerText",d);this.footerTextNode.innerHTML=this._cv?this._cv(d):d}})})},"dojo/selector/lite":function(){define("dojo/selector/lite",
["../has","../_base/kernel"],function(h,j){var g=document.createElement("div"),e=g.matchesSelector||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector,d=g.querySelectorAll,l=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g,i=function(c,b){var a=b?b.ownerDocument||b:j.doc||document,f=(d?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(c),b=b||a;if(f){if(f[2]){var e=j.byId?j.byId(f[2]):a.getElementById(f[2]);
if(!e||f[1]&&f[1]!=e.tagName.toLowerCase())return[];if(b!=a)for(a=e;a!=b;)if(a=a.parentNode,!a)return[];return f[3]?i(f[3],e):[e]}if(f[3]&&b.getElementsByClassName)return b.getElementsByClassName(f[4]);if(f[5])if(e=b.getElementsByTagName(f[5]),f[4]||f[6])c=(f[4]||"")+f[6];else return e}if(d)return 1===b.nodeType&&"object"!==b.nodeName.toLowerCase()?k(b,c,b.querySelectorAll):b.querySelectorAll(c);e||(e=b.getElementsByTagName("*"));for(var f=[],a=0,g=e.length;a<g;a++){var h=e[a];1==h.nodeType&&(void 0)(h,
c,b)&&f.push(h)}return f},k=function(c,b,a){var f=c,d=c.getAttribute("id"),e=d||"__dojo__",g=c.parentNode,i=/^\s*[+~]/.test(b);if(i&&!g)return[];d?e=e.replace(/'/g,"\\$&"):c.setAttribute("id",e);if(i&&g)c=c.parentNode;b=b.match(l);for(g=0;g<b.length;g++)b[g]="[id='"+e+"'] "+b[g];b=b.join(",");try{return a.call(c,b)}finally{d||f.removeAttribute("id")}};i.match=e?function(c,b,a){return a&&9!=a.nodeType?k(a,b,function(a){return e.call(c,a)}):e.call(c,b)}:void 0;return i})},"walta/HomeView":function(){define("walta/HomeView",
"dojo/_base/declare,dojo/on,dojo/topic,dojo/dom-construct,dojo/_base/lang,dojox/mobile/View".split(","),function(h,j,g,e,d,l){return h("walta.HomeView",[l],{"class":"waltaHomeView waltaFullscreen",buildRendering:function(){this.inherited(arguments);var d=e.create("div",{"class":"waltaPanel waltaHeader"},this.domNode);e.create("div",{"class":"waltaLogo"},d);e.create("h1",{innerHTML:"WALTA"},d);e.create("h3",{innerHTML:"Waterbug ALT App"},d);var h=this.domNode,d=e.create("div",{"class":"waltaPanel waltaMenu"},
h);e.create("div",{"class":"waltaMenuIcon waltaSpeedbugLogo"},d);e.create("h2",{innerHTML:"Speedbug"},d);e.create("p",{innerHTML:"Look at silhouettes of bugs to choose the best match."},d);var c=e.create("div",{"class":"waltaPanel waltaMenu"},h);e.create("div",{"class":"waltaMenuIcon waltaAltKeyLogo"},c);e.create("h2",{innerHTML:"ALT key"},c);e.create("p",{innerHTML:"Questions to help identify your waterbug."},c);var b=e.create("div",{"class":"waltaPanel waltaMenu"},h);e.create("div",{"class":"waltaMenuIcon waltaBrowseLogo"},
b);e.create("h2",{innerHTML:"Browse list"},b);e.create("p",{innerHTML:"If you know the name or scientific name of your bug."},b);var a=e.create("div",{"class":"waltaPanel waltaMenu waltaSecondary"},h);e.create("h2",{innerHTML:"Help"},a);e.create("p",{innerHTML:"Info to get you started."},a);var f=e.create("div",{"class":"waltaPanel waltaMenu waltaSecondary"},h);e.create("h2",{innerHTML:"Gallery"},f);e.create("p",{innerHTML:"Browse photos & videos."},f);h=e.create("div",{"class":"waltaPanel waltaMenu waltaSecondary"},
h);e.create("h2",{innerHTML:"About"},h);e.create("p",{innerHTML:"About the app."},h);j(h,"click",function(){g.publish("about/open")});j(a,"click",function(){g.publish("help/open")});j(b,"click",function(){g.publish("browse/open")});j(c,"click",function(){g.publish("key/start")});j(d,"click",function(){g.publish("speedbug/open")})}})})},"dojox/mobile/Container":function(){define("dojox/mobile/Container",["dojo/_base/declare","dijit/_Container","./Pane"],function(h,j,g){return h("dojox.mobile.Container",
[g,j],{baseClass:"mblContainer"})})},"dojox/mobile/StoreCarousel":function(){define("dojox/mobile/StoreCarousel",["dojo/_base/declare","./Carousel","./_StoreMixin"],function(h,j,g){return h("dojox.mobile.StoreCarousel",[j,g],{})})},"walta/Key":function(){define("walta/Key","dojo/_base/declare,dojo/request/xhr,dojo/_base/lang,walta/XmlDocument,walta/KeyNode,walta/Taxon".split(","),function(h,j,g,e,d,l){return h(null,{url:null,name:null,currentDecision:null,_xml:null,_startNode:null,load:function(){this._xml=
new e({url:this.url+"/key.xml",namespaceMap:{tax:"http://thewaterbug.net/taxonomy"}});return this._xml.load().then(g.hitch(this,function(){this.name=this._xml.getString(null,"/tax:key/@name");this._startNode=this.currentDecision=new d(this.url,this._xml,this._xml.getNode(null,"/tax:key/tax:keyNode"))}))},choose:function(d){return this.currentDecision=this.currentDecision.questions[d].outcome()},back:function(){var d=this.currentDecision.back();if(null!=d)this.currentDecision=d;return d},reset:function(){this.currentDecision=
this._startNode},lookupNode:function(e){var e=this._xml.getNode(null,"/tax:key//tax:taxon[@id='"+e+"'] | /tax:key//tax:keyNode[@id='"+e+"']"),g=null;if("taxon"===e.tagName)g=this._xml.getNode(e,".."),g=new l(d,this.url,this._xml,g,e);else if("keyNode"===e.tagName)g=new d(this.url,this._xml,e);else throw"Error: not a taxon or keyNode element!";return this.currentDecision=g},constructor:function(d){h.safeMixin(this,d)}})})},"walta/Taxon":function(){define("walta/Taxon",["dojo/_base/declare","dojo/_base/array",
"dojo/_base/lang","walta/KeyNode"],function(h,j,g){return h(null,{id:null,name:"",commonName:"",size:0,signalScore:0,habitat:"",movement:"",confusedWith:"",mediaUrls:[],back:null,_buildBackFunction:function(e,d,g,h){return function(){return new e(d,g,h)}},constructor:function(e,d,h,i,k){this.id=h.getString(k,"@id");this.name=h.getString(k,"@name");this.commonName=h.getString(k,"@commonName");this.size=h.getNumber(k,"@size");this.signalScore=h.getNumber(k,"@signalScore");this.habitat=h.getString(k,
"tax:habitat");this.movement=h.getString(k,"tax:movement");this.confusedWith=h.getString(k,"tax:confusedWith");this.mediaUrls=[];j.forEach(h.getStringArray(k,"child::tax:mediaRef/@url"),g.hitch(this,function(c){this.mediaUrls.push(d+"/media/"+c)}));this.back=this._buildBackFunction(e,d,h,i)}})})},"dojox/mobile/_ContentPaneMixin":function(){define("dojox/mobile/_ContentPaneMixin","dojo/_base/declare,dojo/_base/Deferred,dojo/_base/lang,dojo/_base/window,dojo/_base/xhr,./_ExecScriptMixin,./ProgressIndicator,./lazyLoadUtils".split(","),
function(h,j,g,e,d,l,i,k){return h("dojox.mobile._ContentPaneMixin",l,{href:"",lazy:!1,content:"",parseOnLoad:!0,prog:!0,executeScripts:!0,constructor:function(){if(this.prog)this._p=i.getInstance()},loadHandler:function(c){this.set("content",c)},errorHandler:function(){this._p&&this._p.stop()},load:function(){this.lazy=!1;this.set("href",this.href)},onLoad:function(){return!0},_setHrefAttr:function(c){if(this.lazy||!c||c===this._loaded)return this.lazy=!1,null;var b=this._p;b&&(e.body().appendChild(b.domNode),
b.start());this._set("href",c);this._loaded=c;return d.get({url:c,handleAs:"text",load:g.hitch(this,"loadHandler"),error:g.hitch(this,"errorHandler")})},_setContentAttr:function(c){this.destroyDescendants();"object"===typeof c?this.containerNode.appendChild(c):(this.executeScripts&&(c=this.execScript(c)),this.containerNode.innerHTML=c);if(this.parseOnLoad){var b=this;return j.when(k.instantiateLazyWidgets(b.containerNode),function(){b._p&&b._p.stop();return b.onLoad()})}this._p&&this._p.stop();return this.onLoad()}})})},
"dojox/mobile/_StoreMixin":function(){define("dojox/mobile/_StoreMixin",["dojo/_base/Deferred","dojo/_base/declare"],function(h,j){return j("dojox.mobile._StoreMixin",null,{store:null,query:null,queryOptions:null,labelProperty:"label",childrenProperty:"children",setStore:function(g,e,d){if(g===this.store)return null;if(g)g.getValue=function(d,e){return d[e]};this.store=g;this._setQuery(e,d);return this.refresh()},setQuery:function(g,e){this._setQuery(g,e);return this.refresh()},_setQuery:function(g,
e){this.query=g;this.queryOptions=e||this.queryOptions},refresh:function(){if(!this.store)return null;var g=this,e=this.store.query(this.query,this.queryOptions);h.when(e,function(d){if(d.items)d=d.items;e.observe&&e.observe(function(d,e,h){if(-1<e)g.onDelete(d,e);else if(-1<h)g.onUpdate(d,h)});g.onComplete(d)},function(d){g.onError(d)});return e}})})},"walta/SpeedBug":function(){define("walta/SpeedBug",["dojo/_base/declare","dojo/_base/array"],function(h,j){return h(null,{bugsList:[],_baseUri:"",
_parseSpeedBugGroup:function(g){var e={groupRef:g.getAttribute("ref")};e.bugs=j.map(this._removeTextNodes(g.childNodes),this._parseSpeedBugLinkOrGroup,this);return e},_parseSpeedBugLink:function(g){return{image:this._baseUri+"/media/"+g.getAttribute("image"),ref:g.getAttribute("ref")}},_parseSpeedBugLinkOrGroup:function(g){if("speedBugGroup"===g.tagName)return this._parseSpeedBugGroup(g);if("speedBugLink"===g.tagName)return this._parseSpeedBugLink(g);throw"Expecting element speedBugGroup or speedBugLink";
},_removeTextNodes:function(g){return j.filter(g,function(e){return e.tagName})},constructor:function(g,e){this._baseUri=g;var d=e.getNode(null,"tax:speedBugIndex");if(d)this.bugsList=j.map(this._removeTextNodes(d.childNodes),this._parseSpeedBugLinkOrGroup,this);else throw"Unable to find tax:speedBugIndex in taxonomy description!";}})})},"walta/QuestionView":function(){define("walta/QuestionView","dojo/_base/declare,dojo/on,dojo/dom-construct,dojo/_base/lang,dojox/mobile/Container,walta/MediaView".split(","),
function(h,j,g,e,d,l){return h("walta.QuestionView",[d],{question:null,onClick:function(){},"class":"waltaQuestion",buildRendering:function(){this.inherited(arguments);g.create("p",{innerHTML:this.question.text},this.containerNode);this.question.mediaUrls[0]&&this.addChild(new l({mediaUrls:this.question.mediaUrls}));j(this.containerNode,"click",e.hitch(this,function(){this.onClick()}))}})})},"walta/Question":function(){define("walta/Question",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang",
"walta/Taxon"],function(h,j,g,e){return h(null,{text:null,mediaUrls:[],outcome:null,constructor:function(d,e,h,k){this.text=h.getString(k,"tax:text");this.mediaUrls=[];j.forEach(h.getStringArray(k,"child::tax:mediaRef/@url"),g.hitch(this,function(c){this.mediaUrls.push(e+"/media/"+c)}));this.outcome=this._buildOutcomeFunction(d,e,h,k,h.getNumber(k,"@num"))},_buildOutcomeFunction:function(d,g,h,j,c){return function(){var b=h.getNode(j,"../tax:outcome[@for="+c+"]/*");if("taxonLink"===b.tagName){var b=
h.getString(b,"@ref"),b=h.getNode(null,"/tax:key//tax:taxon[@id='"+b+"']"),a=h.getNode(j,"..");return new e(d,g,h,a,b)}if("keyNode"===b.tagName)return new d(g,h,b);if("keyNodeLink"===b.tagName)return b=h.getString(b,"@ref"),b=h.getNode(null,"/tax:key//tax:keyNode[@id='"+b+"']"),new d(g,h,b)}}})})},"dojo/store/util/QueryResults":function(){define("dojo/store/util/QueryResults",["../../_base/array","../../_base/lang","../../_base/Deferred"],function(h,j,g){var e=function(d){function l(i){d[i]||(d[i]=
function(){var j=arguments;return g.when(d,function(c){Array.prototype.unshift.call(j,c);return e(h[i].apply(h,j))})})}if(!d)return d;d.then&&(d=j.delegate(d));l("forEach");l("filter");l("map");if(!d.total)d.total=g.when(d,function(d){return d.length});return d};j.setObject("dojo.store.util.QueryResults",e);return e})},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(h,j){return h("dijit._Contained",null,{_getSibling:function(g){var e=this.domNode;
do e=e[g+"Sibling"];while(e&&1!=e.nodeType);return e&&j.byNode(e)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var g=this.getParent();return!g||!g.getIndexOfChild?-1:g.getIndexOfChild(this)}})})},"dojox/mobile/scrollable":function(){define("dojox/mobile/scrollable","dojo/_base/kernel,dojo/_base/connect,dojo/_base/event,dojo/_base/lang,dojo/_base/window,dojo/dom-class,dojo/dom-construct,dojo/dom-style,./sniff".split(","),
function(h,j,g,e,d,l,i,k,c){var b=e.getObject("dojox.mobile",!0);c.add("translate3d",function(){var a=d.doc.createElement("div");a.style.webkitTransform="translate3d(0px,1px,0px)";d.doc.documentElement.appendChild(a);var b=d.doc.defaultView.getComputedStyle(a,"")["-webkit-transform"],b=b&&0===b.indexOf("matrix");d.doc.documentElement.removeChild(a);return b});h=function(){};e.extend(h,{fixedHeaderHeight:0,fixedFooterHeight:0,isLocalFooter:!1,scrollBar:!0,scrollDir:"v",weight:0.6,fadeScrollBar:!0,
disableFlashScrollBar:!1,threshold:4,constraint:!0,touchNode:null,propagatable:!0,dirLock:!1,height:"",scrollType:0,init:function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=("domNode"==b||"containerNode"==b)&&"string"==typeof a[b]?d.doc.getElementById(a[b]):a[b]);this.touchNode=this.touchNode||this.containerNode;this._v=-1!=this.scrollDir.indexOf("v");this._h=-1!=this.scrollDir.indexOf("h");this._f="f"==this.scrollDir;this._ch=[];this._ch.push(j.connect(this.touchNode,"ontouchstart",this,
"onTouchStart"));this._useTopLeft=this.scrollType?2===this.scrollType:3>c("android");if(!this._useTopLeft)this._useTransformTransition=this.scrollType?3===this.scrollType:6<=c("iphone");if(this._useTopLeft)this._ch.push(j.connect(this.domNode,"webkitTransitionEnd",this,"onFlickAnimationEnd")),this._ch.push(j.connect(this.domNode,"webkitTransitionStart",this,"onFlickAnimationStart"));else{if(this._useTransformTransition)this._ch.push(j.connect(this.domNode,"webkitTransitionEnd",this,"onFlickAnimationEnd")),
this._ch.push(j.connect(this.domNode,"webkitTransitionStart",this,"onFlickAnimationStart"));else{this._ch.push(j.connect(this.domNode,"webkitAnimationEnd",this,"onFlickAnimationEnd"));this._ch.push(j.connect(this.domNode,"webkitAnimationStart",this,"onFlickAnimationStart"));for(a=0;3>a;a++)this.setKeyframes(null,null,a)}c("translate3d")&&k.set(this.containerNode,"webkitTransform","translate3d(0,0,0)")}this._speed={x:0,y:0};this._appFooterHeight=0;this.isTopLevel()&&!this.noResize&&this.resize();var e=
this;setTimeout(function(){e.flashScrollBar()},600)},isTopLevel:function(){return!0},cleanup:function(){if(this._ch){for(var a=0;a<this._ch.length;a++)j.disconnect(this._ch[a]);this._ch=null}},findDisp:function(a){if(!a.parentNode)return null;if(1===a.nodeType&&l.contains(a,"mblSwapView")&&"none"!==a.style.display)return a;for(var b=a.parentNode.childNodes,c=0;c<b.length;c++){var d=b[c];if(1===d.nodeType&&l.contains(d,"mblView")&&"none"!==d.style.display)return d}return a},getScreenSize:function(){return{h:d.global.innerHeight||
d.doc.documentElement.clientHeight||d.doc.documentElement.offsetHeight,w:d.global.innerWidth||d.doc.documentElement.clientWidth||d.doc.documentElement.offsetWidth}},resize:function(){this._appFooterHeight=this.fixedFooterHeight&&!this.isLocalFooter?this.fixedFooterHeight:0;if(this.isLocalHeader)this.containerNode.style.marginTop=this.fixedHeaderHeight+"px";for(var a=0,b=this.domNode;b&&"BODY"!=b.tagName;b=b.offsetParent){b=this.findDisp(b);if(!b)break;a+=b.offsetTop}var c,b=this.getScreenSize().h,
a=b-a-this._appFooterHeight;if("inherit"===this.height)this.domNode.offsetParent&&(c=this.domNode.offsetParent.offsetHeight+"px");else if("auto"===this.height){if(c=this.domNode.offsetParent){this.domNode.style.height="0px";c=c.getBoundingClientRect();var a=this.domNode.getBoundingClientRect(),d=c.bottom-this._appFooterHeight,a=a.bottom>=d?b-(a.top-c.top)-this._appFooterHeight:d-a.bottom}b=Math.max(this.domNode.scrollHeight,this.containerNode.scrollHeight);c=(b?Math.min(b,a):a)+"px"}else if(this.height)c=
this.height;c||(c=a+"px");if("-"!==c.charAt(0)&&"default"!==c)this.domNode.style.height=c;this.onTouchEnd()},onFlickAnimationStart:function(a){g.stop(a)},onFlickAnimationEnd:function(a){var b=a&&a.animationName;if(b&&-1===b.indexOf("scrollableViewScroll2"))if(-1!==b.indexOf("scrollableViewScroll0"))this._scrollBarNodeV&&l.remove(this._scrollBarNodeV,"mblScrollableScrollTo0");else if(-1!==b.indexOf("scrollableViewScroll1"))this._scrollBarNodeH&&l.remove(this._scrollBarNodeH,"mblScrollableScrollTo1");
else{if(this._scrollBarNodeV)this._scrollBarNodeV.className="";if(this._scrollBarNodeH)this._scrollBarNodeH.className=""}else{if(this._useTransformTransition||this._useTopLeft)if(b=a.target,b===this._scrollBarV||b===this._scrollBarH){a="mblScrollableScrollTo"+(b===this._scrollBarV?"0":"1");l.contains(b,a)?l.remove(b,a):b.className="";return}a&&a.srcElement&&g.stop(a);this.stopAnimation();if(this._bounce){var c=this,d=c._bounce;setTimeout(function(){c.slideTo(d,0.3,"ease-out")},0);c._bounce=void 0}else this.hideScrollBar(),
this.removeCover()}},isFormElement:function(a){if(a&&1!==a.nodeType)a=a.parentNode;if(!a||1!==a.nodeType)return!1;a=a.tagName;return"SELECT"===a||"INPUT"===a||"TEXTAREA"===a||"BUTTON"===a},onTouchStart:function(a){if(!(this.disableTouchScroll||this._conn&&500>(new Date).getTime()-this.startTime)){if(!this._conn)this._conn=[],this._conn.push(j.connect(d.doc,"ontouchmove",this,"onTouchMove")),this._conn.push(j.connect(d.doc,"ontouchend",this,"onTouchEnd"));this._aborted=!1;if(l.contains(this.containerNode,
"mblScrollableScrollTo2"))this.abort();else{if(this._scrollBarNodeV)this._scrollBarNodeV.className="";if(this._scrollBarNodeH)this._scrollBarNodeH.className=""}this.touchStartX=a.touches?a.touches[0].pageX:a.clientX;this.touchStartY=a.touches?a.touches[0].pageY:a.clientY;this.startTime=(new Date).getTime();this.startPos=this.getPos();this._dim=this.getDim();this._time=[0];this._posX=[this.touchStartX];this._posY=[this.touchStartY];this._locked=!1;this.isFormElement(a.target)||(this.propagatable?a.preventDefault():
g.stop(a))}},onTouchMove:function(a){if(!this._locked){var b=a.touches?a.touches[0].pageX:a.clientX,a=a.touches?a.touches[0].pageY:a.clientY,c=b-this.touchStartX,d=a-this.touchStartY,e={x:this.startPos.x+c,y:this.startPos.y+d},g=this._dim,c=Math.abs(c),d=Math.abs(d);if(1==this._time.length){if(this.dirLock&&(this._v&&!this._h&&c>=this.threshold&&c>=d||(this._h||this._f)&&!this._v&&d>=this.threshold&&d>=c)){this._locked=!0;return}if(this._v&&this._h){if(d<this.threshold&&c<this.threshold)return}else if(this._v&&
d<this.threshold||(this._h||this._f)&&c<this.threshold)return;this.addCover();this.showScrollBar()}c=this.weight;if(this._v&&this.constraint)if(0<e.y)e.y=Math.round(e.y*c);else if(e.y<-g.o.h)e.y=g.c.h<g.d.h?Math.round(e.y*c):-g.o.h-Math.round((-g.o.h-e.y)*c);if((this._h||this._f)&&this.constraint)if(0<e.x)e.x=Math.round(e.x*c);else if(e.x<-g.o.w)e.x=g.c.w<g.d.w?Math.round(e.x*c):-g.o.w-Math.round((-g.o.w-e.x)*c);this.scrollTo(e);e=this._time.length;if(2<=e){var h,i;this._v&&!this._h?(h=this._posY[e-
1]-this._posY[e-2],i=a-this._posY[e-1]):!this._v&&this._h&&(h=this._posX[e-1]-this._posX[e-2],i=b-this._posX[e-1]);if(0>h*i)this._time=[this._time[e-1]],this._posX=[this._posX[e-1]],this._posY=[this._posY[e-1]],e=1}10==e&&(this._time.shift(),this._posX.shift(),this._posY.shift());this._time.push((new Date).getTime()-this.startTime);this._posX.push(b);this._posY.push(a)}},onTouchEnd:function(a){if(!this._locked){var b=this._speed={x:0,y:0},e=this._dim,g=this.getPos(),h={};if(a){if(!this._conn)return;
for(b=0;b<this._conn.length;b++)j.disconnect(this._conn[b]);this._conn=null;var b=this._time.length,i=!1;this._aborted||(1>=b?i=!0:2==b&&4>Math.abs(this._posY[1]-this._posY[0])&&(i=!0));if(i){this.hideScrollBar();this.removeCover();if(!this.isFormElement(a.target)&&!(4.1<=c("android"))){var k=a.target;if(1!=k.nodeType)k=k.parentNode;var l=d.doc.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,d.global,1,a.screenX,a.screenY,a.clientX,a.clientY);setTimeout(function(){k.dispatchEvent(l)},0)}return}b=
this._speed=this.getSpeed()}else{if(0==g.x&&0==g.y)return;e=this.getDim()}if(this._v)h.y=g.y+b.y;if(this._h||this._f)h.x=g.x+b.x;if(!1!==this.adjustDestination(h,g,e))if("v"==this.scrollDir&&e.c.h<e.d.h)this.slideTo({y:0},0.3,"ease-out");else if("h"==this.scrollDir&&e.c.w<e.d.w)this.slideTo({x:0},0.3,"ease-out");else if(this._v&&this._h&&e.c.h<e.d.h&&e.c.w<e.d.w)this.slideTo({x:0,y:0},0.3,"ease-out");else{var q,i="ease-out",v={};if(this._v&&this.constraint)if(0<h.y)0<g.y?(q=0.3,h.y=0):(h.y=Math.min(h.y,
20),i="linear",v.y=0);else if(-b.y>e.o.h- -g.y)g.y<-e.o.h?(q=0.3,h.y=e.c.h<=e.d.h?0:-e.o.h):(h.y=Math.max(h.y,-e.o.h-20),i="linear",v.y=-e.o.h);if((this._h||this._f)&&this.constraint)if(0<h.x)0<g.x?(q=0.3,h.x=0):(h.x=Math.min(h.x,20),i="linear",v.x=0);else if(-b.x>e.o.w- -g.x)g.x<-e.o.w?(q=0.3,h.x=e.c.w<=e.d.w?0:-e.o.w):(h.x=Math.max(h.x,-e.o.w-20),i="linear",v.x=-e.o.w);this._bounce=void 0!==v.x||void 0!==v.y?v:void 0;if(void 0===q){var t,r;if(this._v&&this._h)r=Math.sqrt(b.x*b.x+b.y*b.y),t=Math.sqrt(Math.pow(h.y-
g.y,2)+Math.pow(h.x-g.x,2));else if(this._v)r=b.y,t=h.y-g.y;else if(this._h)r=b.x,t=h.x-g.x;if(0===t&&!a)return;q=0!==r?Math.abs(t/r):0.01}this.slideTo(h,q,i)}}},adjustDestination:function(){return!0},abort:function(){this.scrollTo(this.getPos());this.stopAnimation();this._aborted=!0},stopAnimation:function(){l.remove(this.containerNode,"mblScrollableScrollTo2");if(this._scrollBarV)this._scrollBarV.className="";if(this._scrollBarH)this._scrollBarH.className="";if(this._useTransformTransition||this._useTopLeft){this.containerNode.style.webkitTransition=
"";if(this._scrollBarV)this._scrollBarV.style.webkitTransition="";if(this._scrollBarH)this._scrollBarH.style.webkitTransition=""}},scrollIntoView:function(a,b,c){if(this._v){for(var d=this.containerNode,e=this.getDim().d.h,g=0,h=a;h!==d;h=h.offsetParent){if(!h||"BODY"===h.tagName)return;g+=h.offsetTop}a=b?Math.max(e-d.offsetHeight,-g):Math.min(0,e-g-a.offsetHeight);c&&"number"===typeof c?this.slideTo({y:a},c,"ease-out"):this.scrollTo({y:a})}},getSpeed:function(){var a=0,b=0,c=this._time.length;if(2<=
c&&500>(new Date).getTime()-this.startTime-this._time[c-1])var a=this._posX[c-(3<c?2:1)]-this._posX[0<=c-6?c-6:0],d=this._time[c-(3<c?2:1)]-this._time[0<=c-6?c-6:0],b=this.calcSpeed(this._posY[c-(3<c?2:1)]-this._posY[0<=c-6?c-6:0],d),a=this.calcSpeed(a,d);return{x:a,y:b}},calcSpeed:function(a,b){return 4*Math.round(100*(a/b))},scrollTo:function(a,b,c){c=(c||this.containerNode).style;if(this._useTopLeft){c.webkitTransition="";if(this._v)c.top=a.y+"px";if(this._h||this._f)c.left=a.x+"px"}else{if(this._useTransformTransition)c.webkitTransition=
"";c.webkitTransform=this.makeTranslateStr(a)}b||this.scrollScrollBarTo(this.calcScrollBarPos(a))},slideTo:function(a,b,c){this._runSlideAnimation(this.getPos(),a,b,c,this.containerNode,2);this.slideScrollBarTo(a,b,c)},makeTranslateStr:function(a){var b=this._v&&"number"==typeof a.y?a.y+"px":"0px",a=(this._h||this._f)&&"number"==typeof a.x?a.x+"px":"0px";return c("translate3d")?"translate3d("+a+","+b+",0px)":"translate("+a+","+b+")"},getPos:function(){var a=d.doc.defaultView.getComputedStyle(this.containerNode,
"");if(this._useTopLeft)return{x:parseInt(a.left)||0,y:parseInt(a.top)||0};return(a=a["-webkit-transform"])&&0===a.indexOf("matrix")?(a=a.split(/[,\s\)]+/),{y:a[5]-0,x:a[4]-0}):{x:0,y:0}},getDim:function(){var a={};a.c={h:this.containerNode.offsetHeight,w:this.containerNode.offsetWidth};a.v={h:this.domNode.offsetHeight+this._appFooterHeight,w:this.domNode.offsetWidth};a.d={h:a.v.h-this.fixedHeaderHeight-this.fixedFooterHeight,w:a.v.w};a.o={h:a.c.h-a.v.h+this.fixedHeaderHeight+this.fixedFooterHeight,
w:a.c.w-a.v.w};return a},showScrollBar:function(){if(this.scrollBar){var a=this._dim;if(!("v"==this.scrollDir&&a.c.h<=a.d.h||"h"==this.scrollDir&&a.c.w<=a.d.w))if(!this._v||!this._h||!(a.c.h<=a.d.h&&a.c.w<=a.d.w)){a=function(a,b){var c=a["_scrollBarNode"+b];if(!c){var c=i.create("div",null,a.domNode),d={position:"absolute",overflow:"hidden"};"V"==b?(d.right="2px",d.width="5px"):(d.bottom=(a.isLocalFooter?a.fixedFooterHeight:0)+2+"px",d.height="5px");k.set(c,d);c.className="mblScrollBarWrapper";a["_scrollBarWrapper"+
b]=c;c=i.create("div",null,c);k.set(c,{opacity:0.6,position:"absolute",backgroundColor:"#606060",fontSize:"1px",webkitBorderRadius:"2px",MozBorderRadius:"2px",webkitTransformOrigin:"0 0",zIndex:2147483647});k.set(c,"V"==b?{width:"5px"}:{height:"5px"});a["_scrollBarNode"+b]=c}return c};if(this._v&&!this._scrollBarV)this._scrollBarV=a(this,"V");if(this._h&&!this._scrollBarH)this._scrollBarH=a(this,"H");this.resetScrollBar()}}},hideScrollBar:function(){if(this.fadeScrollBar&&!b._fadeRule){var a=i.create("style",
null,d.doc.getElementsByTagName("head")[0]);a.textContent=".mblScrollableFadeScrollBar{  -webkit-animation-duration: 1s;  -webkit-animation-name: scrollableViewFadeScrollBar;}@-webkit-keyframes scrollableViewFadeScrollBar{  from { opacity: 0.6; }  to { opacity: 0; }}";b._fadeRule=a.sheet.cssRules[1]}if(this.scrollBar){a=function(a,b){k.set(a,{opacity:0,webkitAnimationDuration:""});if(!b._useTopLeft||!c("android"))a.className="mblScrollableFadeScrollBar"};if(this._scrollBarV)a(this._scrollBarV,this),
this._scrollBarV=null;if(this._scrollBarH)a(this._scrollBarH,this),this._scrollBarH=null}},calcScrollBarPos:function(a){var b={},c=this._dim,d=function(a,b,c,d,f){c=Math.round((d-b-8)/(d-f)*c);c<-b+5&&(c=-b+5);c>a-5&&(c=a-5);return c};if("number"==typeof a.y&&this._scrollBarV)b.y=d(this._scrollBarWrapperV.offsetHeight,this._scrollBarV.offsetHeight,a.y,c.d.h,c.c.h);if("number"==typeof a.x&&this._scrollBarH)b.x=d(this._scrollBarWrapperH.offsetWidth,this._scrollBarH.offsetWidth,a.x,c.d.w,c.c.w);return b},
scrollScrollBarTo:function(a){if(this.scrollBar){if(this._v&&this._scrollBarV&&"number"==typeof a.y)if(this._useTopLeft)k.set(this._scrollBarV,{webkitTransition:"",top:a.y+"px"});else{if(this._useTransformTransition)this._scrollBarV.style.webkitTransition="";this._scrollBarV.style.webkitTransform=this.makeTranslateStr({y:a.y})}if(this._h&&this._scrollBarH&&"number"==typeof a.x)if(this._useTopLeft)k.set(this._scrollBarH,{webkitTransition:"",left:a.x+"px"});else{if(this._useTransformTransition)this._scrollBarH.style.webkitTransition=
"";this._scrollBarH.style.webkitTransform=this.makeTranslateStr({x:a.x})}}},slideScrollBarTo:function(a,b,c){if(this.scrollBar){var d=this.calcScrollBarPos(this.getPos()),a=this.calcScrollBarPos(a);this._v&&this._scrollBarV&&this._runSlideAnimation({y:d.y},{y:a.y},b,c,this._scrollBarV,0);this._h&&this._scrollBarH&&this._runSlideAnimation({x:d.x},{x:a.x},b,c,this._scrollBarH,1)}},_runSlideAnimation:function(a,b,c,d,e,g){if(this._useTopLeft)k.set(e,{webkitTransitionProperty:"top, left",webkitTransitionDuration:c+
"s",webkitTransitionTimingFunction:d}),setTimeout(function(){k.set(e,{top:(b.y||0)+"px",left:(b.x||0)+"px"})},0),l.add(e,"mblScrollableScrollTo"+g);else if(this._useTransformTransition){if(void 0===b.x)b.x=a.x;if(void 0===b.y)b.y=a.y;if(b.x!==a.x||b.y!==a.y){k.set(e,{webkitTransitionProperty:"-webkit-transform",webkitTransitionDuration:c+"s",webkitTransitionTimingFunction:d});var h=this.makeTranslateStr(b);setTimeout(function(){k.set(e,{webkitTransform:h})},0);l.add(e,"mblScrollableScrollTo"+g)}else this.hideScrollBar(),
this.removeCover()}else this.setKeyframes(a,b,g),k.set(e,{webkitAnimationDuration:c+"s",webkitAnimationTimingFunction:d}),l.add(e,"mblScrollableScrollTo"+g),2==g?this.scrollTo(b,!0,e):this.scrollScrollBarTo(b)},resetScrollBar:function(){var a=function(a,b,c,d,f,e){if(b){var g={};g[e?"top":"left"]=f+4+"px";f=0>=c-8?1:c-8;g[e?"height":"width"]=f+"px";k.set(a,g);a=Math.round(c*c/d);a=Math.min(Math.max(a-8,5),f);b.style[e?"height":"width"]=a+"px";k.set(b,{opacity:0.6})}},b=this.getDim();a(this._scrollBarWrapperV,
this._scrollBarV,b.d.h,b.c.h,this.fixedHeaderHeight,!0);a(this._scrollBarWrapperH,this._scrollBarH,b.d.w,b.c.w,0);this.createMask()},createMask:function(){var a;if(this._scrollBarWrapperV){var b=this._scrollBarWrapperV.offsetHeight;a=d.doc.getCSSCanvasContext("2d","scrollBarMaskV",5,b);a.fillStyle="rgba(0,0,0,0.5)";a.fillRect(1,0,3,2);a.fillRect(0,1,5,1);a.fillRect(0,b-2,5,1);a.fillRect(1,b-1,3,2);a.fillStyle="rgb(0,0,0)";a.fillRect(0,2,5,b-4);this._scrollBarWrapperV.style.webkitMaskImage="-webkit-canvas(scrollBarMaskV)"}if(this._scrollBarWrapperH)b=
this._scrollBarWrapperH.offsetWidth,a=d.doc.getCSSCanvasContext("2d","scrollBarMaskH",b,5),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,1,2,3),a.fillRect(1,0,1,5),a.fillRect(b-2,0,1,5),a.fillRect(b-1,1,2,3),a.fillStyle="rgb(0,0,0)",a.fillRect(2,0,b-4,5),this._scrollBarWrapperH.style.webkitMaskImage="-webkit-canvas(scrollBarMaskH)"},flashScrollBar:function(){if(!this.disableFlashScrollBar&&this.domNode&&(this._dim=this.getDim(),!(0>=this._dim.d.h))){this.showScrollBar();var a=this;setTimeout(function(){a.hideScrollBar()},
300)}},addCover:function(){},removeCover:function(){},setKeyframes:function(a,c,e){if(!b._rule)b._rule=[];if(!b._rule[e]){var g=i.create("style",null,d.doc.getElementsByTagName("head")[0]);g.textContent=".mblScrollableScrollTo"+e+"{-webkit-animation-name: scrollableViewScroll"+e+";}@-webkit-keyframes scrollableViewScroll"+e+"{}";b._rule[e]=g.sheet.cssRules[1]}if(e=b._rule[e])if(a&&(e.deleteRule("from"),e.insertRule("from { -webkit-transform: "+this.makeTranslateStr(a)+"; }")),c){if(void 0===c.x)c.x=
a.x;if(void 0===c.y)c.y=a.y;e.deleteRule("to");e.insertRule("to { -webkit-transform: "+this.makeTranslateStr(c)+"; }")}},setSelectable:function(a,b){a.style.KhtmlUserSelect=b?"auto":"none";a.style.MozUserSelect=b?"":"none";a.onselectstart=b?null:function(){return!1}}});e.setObject("dojox.mobile.scrollable",h);return h})},"dojox/mobile/PageIndicator":function(){define("dojox/mobile/PageIndicator","dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/dom-construct,dijit/registry,dijit/_Contained,dijit/_WidgetBase".split(","),
function(h,j,g,e,d,l,i,k){return j("dojox.mobile.PageIndicator",[k,i],{refId:"",baseClass:"mblPageIndicator",buildRendering:function(){this.inherited(arguments);this._tblNode=d.create("table",{className:"mblPageIndicatorContainer"},this.domNode);this._tblNode.insertRow(-1);this._clickHandle=this.connect(this.domNode,"onclick","_onClick");this.subscribe("/dojox/mobile/viewChanged",function(){this.reset()})},startup:function(){var c=this;setTimeout(function(){c.reset()},0)},reset:function(){var c=this._tblNode.rows[0],
b,a,f=[],h=(this.refId&&g.byId(this.refId)||this.domNode).parentNode.childNodes;for(b=0;b<h.length;b++)a=h[b],this.isView(a)&&f.push(a);if(c.cells.length!==f.length){d.empty(c);for(b=0;b<f.length;b++)a=d.create("div",{className:"mblPageIndicatorDot"}),c.insertCell(-1).appendChild(a)}if(0!==f.length){h=l.byNode(f[0]).getShowingView();for(b=0;b<c.cells.length;b++)a=c.cells[b].firstChild,f[b]===h.domNode?e.add(a,"mblPageIndicatorDotSelected"):e.remove(a,"mblPageIndicatorDotSelected")}},isView:function(c){return c&&
1===c.nodeType&&e.contains(c,"mblView")},_onClick:function(c){!1===this.onClick(c)||c.target!==this.domNode||(c.layerX<this._tblNode.offsetLeft?h.publish("/dojox/mobile/prevPage",[this]):c.layerX>this._tblNode.offsetLeft+this._tblNode.offsetWidth&&h.publish("/dojox/mobile/nextPage",[this]))},onClick:function(){}})})},"dojo/dom-class":function(){define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(h,j,g){function e(c){if("string"==typeof c||c instanceof String){if(c&&!l.test(c))return i[0]=
c,i;c=c.split(l);c.length&&!c[0]&&c.shift();c.length&&!c[c.length-1]&&c.pop();return c}return!c?[]:j.filter(c,function(b){return b})}var d,l=/\s+/,i=[""],k={};return d={contains:function(c,b){return 0<=(" "+g.byId(c).className+" ").indexOf(" "+b+" ")},add:function(c,b){var c=g.byId(c),b=e(b),a=c.className,d,a=a?" "+a+" ":" ";d=a.length;for(var h=0,i=b.length,j;h<i;++h)(j=b[h])&&0>a.indexOf(" "+j+" ")&&(a+=j+" ");d<a.length&&(c.className=a.substr(1,a.length-2))},remove:function(c,b){var c=g.byId(c),
a;if(void 0!==b){b=e(b);a=" "+c.className+" ";for(var d=0,i=b.length;d<i;++d)a=a.replace(" "+b[d]+" "," ");a=h.trim(a)}else a="";c.className!=a&&(c.className=a)},replace:function(c,b,a){c=g.byId(c);k.className=c.className;d.remove(k,a);d.add(k,b);c.className!==k.className&&(c.className=k.className)},toggle:function(c,b,a){c=g.byId(c);if(void 0===a)for(var b=e(b),f=0,h=b.length,i;f<h;++f)i=b[f],d[d.contains(c,i)?"remove":"add"](c,i);else d[a?"add":"remove"](c,b);return a}}})},"dijit/main":function(){define("dijit/main",
["dojo/_base/kernel"],function(h){return h.dijit})},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,j,g){return g("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){h.forEach(arguments,function(e){var d="destroyRecursive"in e?"destroyRecursive":"destroy"in e?"destroy":"remove",g=j.before(this,"destroy",function(g){e[d](g)}),h=j.after(e,d,function(){g.remove();h.remove()},!0)},this);return arguments}})})},
"dojox/mobile/deviceTheme":function(){("undefined"===typeof define?function(h,j){j()}:define)(["dojo/_base/config","dojo/_base/lang","dojo/_base/window","require"],function(h,j,g,e){var d=j&&j.getObject("dojox.mobile",!0)||{},j=new function(){if(!g)g=window,g.doc=document,g._no_dojo_dm=d;h=h||g.mblConfig||{};for(var j=g.doc.getElementsByTagName("script"),i=0;i<j.length;i++){var k=j[i],c=k.getAttribute("src")||"";if(c.match(/\/deviceTheme\.js/i)){h.baseUrl=c.replace("deviceTheme.js","../../dojo/");
if(j=k.getAttribute("data-dojo-config")||k.getAttribute("djConfig")){var j=eval("({ "+j+" })"),b;for(b in j)h[b]=j[b]}break}else if(c.match(/\/dojo\.js/i)){h.baseUrl=c.replace("dojo.js","");break}}this.loadCssFile=function(a){var b=g.doc.createElement("link");b.href=a;b.type="text/css";b.rel="stylesheet";a=g.doc.getElementsByTagName("head")[0];a.insertBefore(b,a.firstChild);d.loadedCssFiles.push(b)};this.toUrl=function(a){return e?e.toUrl(a):h.baseUrl+"../"+a};this.setDm=function(a){d=a};this.themeMap=
h.themeMap||[["Android","android",[]],["BlackBerry","blackberry",[]],["BB10","blackberry",[]],["iPhone","iphone",[]],["iPad","iphone",[this.toUrl("dojox/mobile/themes/iphone/ipad.css")]],["Custom","custom",[]],[".*","iphone",[]]];d.loadedCssFiles=[];this.loadDeviceTheme=function(a){var b=h.mblThemeFiles||d.themeFiles||["@theme"],c,e;e=this.themeMap;var i=a||h.mblUserAgent||(location.search.match(/theme=(\w+)/)?RegExp.$1:navigator.userAgent);for(c=0;c<e.length;c++)if(i.match(RegExp(e[c][0]))){var i=
e[c][1],j=g.doc.documentElement.className,j=j.replace(RegExp(" *"+d.currentTheme+"_theme"),"")+" "+i+"_theme";g.doc.documentElement.className=j;d.currentTheme=i;c=[].concat(e[c][2]);for(e=0;e<b.length;e++){var k=b[e]instanceof Array||"array"==typeof b[e];!k&&-1!==b[e].indexOf("/")?j=b[e]:(j=k?(b[e][0]||"").replace(/\./g,"/"):"dojox/mobile",k=(k?b[e][1]:b[e]).replace(/\./g,"/"),j=j+"/"+("themes/"+i+"/"+("@theme"===k?i:k)+".css"));c.unshift(this.toUrl(j))}for(b=0;b<d.loadedCssFiles.length;b++)i=d.loadedCssFiles[b],
i.parentNode.removeChild(i);d.loadedCssFiles=[];for(e=0;e<c.length;e++)this.loadCssFile(c[e].toString());a&&d.loadCompatCssFiles&&d.loadCompatCssFiles();break}}};j.loadDeviceTheme();return window.deviceTheme=d.deviceTheme=j})},"dojo/_base/event":function(){define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(h,j,g,e){if(j._fixEvent){var d=j._fixEvent;j._fixEvent=function(g,h){(g=d(g,h))&&e.normalizeEvent(g);return g}}g={fix:function(d,e){return j._fixEvent?j._fixEvent(d,
e):d},stop:function(d){d.preventDefault();d.stopPropagation()}};h.fixEvent=g.fix;h.stopEvent=g.stop;return g})},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(h,j,g){return j("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(e,d){var h=this.containerNode;if(d&&"number"==typeof d){var i=this.getChildren();if(i&&i.length>=
d)h=i[d-1].domNode,d="after"}g.place(e.domNode,h,d);this._started&&!e._started&&e.startup()},removeChild:function(e){"number"==typeof e&&(e=this.getChildren()[e]);if(e)(e=e.domNode)&&e.parentNode&&e.parentNode.removeChild(e)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(e,d){var g=this.getChildren(),i=h.indexOf(this.getChildren(),e);return g[i+d]},getIndexOfChild:function(e){return h.indexOf(this.getChildren(),e)}})})},"dojo/_base/connect":function(){define("dojo/_base/connect",
"./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),function(h,j,g,e,d,l,i,k){function c(a,b,c,d,f){d=k.hitch(c,d);if(!a||!a.addEventListener&&!a.attachEvent)return e.after(a||h.global,b,d,!0);"string"==typeof b&&"on"==b.substring(0,2)&&(b=b.substring(2));if(!a)a=h.global;if(!f)switch(b){case "keypress":b=o;break;case "mouseenter":b=l.enter;break;case "mouseleave":b=l.leave}return j(a,b,d,f)}function b(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=
a.keyChar||a.keyCode}var a={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},f=i("mac")?"metaKey":"ctrlKey",m=function(a,c){var d=k.mixin({},a,c);b(d);d.preventDefault=function(){a.preventDefault()};d.stopPropagation=function(){a.stopPropagation()};return d},o;o=function(b,c){var d=j(b,"keydown",function(b){var d=b.keyCode,e=13!=d&&32!=d&&(48>d||90<d)&&(96>d||111<d)&&(186>d||192<d)&&(219>d||222<d)&&229!=d;if(e||b.ctrlKey){e=e?0:d;if(b.ctrlKey){if(3==
d||13==d)return c.call(b.currentTarget,b);e=95<e&&106>e?e-48:!b.shiftKey&&65<=e&&90>=e?e+32:a[e]||e}d=m(b,{type:"keypress",faux:!0,charCode:e});c.call(b.currentTarget,d)}}),e=j(b,"keypress",function(a){var b=a.charCode,a=m(a,{charCode:32<=b?b:0,faux:!0});return c.call(this,a)});return{remove:function(){d.remove();e.remove()}}};var n={_keypress:o,connect:function(a,b,d,e,f){var g=arguments,h=[],i=0;h.push("string"==typeof g[0]?null:g[i++],g[i++]);var j=g[i+1];h.push("string"==typeof j||"function"==
typeof j?g[i++]:null,g[i++]);for(j=g.length;i<j;i++)h.push(g[i]);return c.apply(this,h)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return g.subscribe(a,k.hitch(b,c))},publish:function(a,b){return g.publish.apply(g,[a].concat(b))},connectPublisher:function(a,b,c){var d=function(){n.publish(a,arguments)};return c?n.connect(b,c,d):n.connect(b,d)},isCopyKey:function(a){return a[f]}};n.unsubscribe=n.disconnect;k.mixin(h,n);return n})},"dojo/ready":function(){define("dojo/ready",["./_base/kernel",
"./has","require","./domReady","./_base/lang"],function(h,j,g,e,d){var l=0,i,k=[],c=0,b=function(){if(l&&!c&&k.length){c=1;var a=k.shift();try{a()}finally{c=0}c=0;k.length&&i(b)}};g.on("idle",b);i=function(){g.idle()&&b()};var j=h.ready=h.addOnLoad=function(a,b,c){var e=d._toArray(arguments);"number"!=typeof a?(c=b,b=a,a=1E3):e.shift();c=c?d.hitch.apply(h,e):function(){b()};c.priority=a;for(e=0;e<k.length&&a>=k[e].priority;e++);k.splice(e,0,c);i()},a=h.config.addOnLoad;if(a)j[d.isArray(a)?"apply":
"call"](h,a);h.config.parseOnLoad&&!h.isAsync&&j(99,function(){h.parser||(h.deprecated("Add explicit require(['dojo/parser']);","","2.0"),g(["dojo/parser"]))});e(function(){l=1;h._postLoad=h.config.afterOnLoad=!0;k.length&&i(b)});return j})},"walta/AnchorBar":function(){define("walta/AnchorBar","dojo/_base/declare,dojo/on,dojo/dom-construct,dojo/_base/lang,dojo/topic,dojox/mobile/Container".split(","),function(h,j,g,e,d,l){return h("walta.AnchorBar",[l],{title:"","class":"waltaAnchorBar",buildRendering:function(){this.inherited(arguments);
var h=g.create("div",{"class":"waltaAnchorBarIcon waltaHome"},this.containerNode),k=g.create("div",{"class":"waltaAnchorBarIcon waltaInfo"},this.containerNode),c=g.create("div",{"class":"waltaAnchorBarIcon waltaSettings"},this.containerNode);g.create("h1",{innerHTML:this.title},this.containerNode);j(h,"click",e.hitch(this,function(){d.publish("anchorbar/home")}));j(c,"click",e.hitch(this,function(){d.publish("anchorbar/settings")}));j(k,"click",e.hitch(this,function(){d.publish("anchorbar/info")}))}})})}}});
define("walta/walta",[],1);
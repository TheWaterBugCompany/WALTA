//>>built
require({cache:{"dojo/store/Memory":function(){define("dojo/store/Memory",["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(h,k,g){return h("dojo.store.Memory",null,{constructor:function(d){for(var c in d)this[c]=d[c];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:g,get:function(d){return this.data[this.index[d]]},getIdentity:function(d){return d[this.idProperty]},put:function(d,c){var g=this.data,j=this.index,l=this.idProperty,l=d[l]=c&&
"id"in c?c.id:l in d?d[l]:Math.random();if(l in j){if(c&&!1===c.overwrite)throw Error("Object already exists");g[j[l]]=d}else j[l]=g.push(d)-1;return l},add:function(d,c){(c=c||{}).overwrite=!1;return this.put(d,c)},remove:function(d){var c=this.index,g=this.data;if(d in c)return g.splice(c[d],1),this.setData(g),!0},query:function(d,c){return k(this.queryEngine(d,c)(this.data))},setData:function(d){var a;d.items?(this.idProperty=d.identifier,a=this.data=d.items,d=a):this.data=d;this.index={};for(var c=
0,g=d.length;c<g;c++)this.index[d[c][this.idProperty]]=c}})})},"dojox/mobile/ViewController":function(){define("dojox/mobile/ViewController","dojo/_base/kernel,dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/on,dojo/ready,dijit/registry,./ProgressIndicator,./TransitionEvent,./viewRegistry".split(","),function(h,k,g,d,c,m,j,l,e,b,a,f,i,o,n,s){var p=d("dojox.mobile.ViewController",null,{dataHandlerClass:"dojox/mobile/dh/DataHandler",
dataSourceClass:"dojox/mobile/dh/UrlDataSource",fileTypeMapClass:"dojox/mobile/dh/SuffixFileTypeMap",constructor:function(){this.viewMap={};f(c.hitch(this,function(){a(m.body(),"startTransition",c.hitch(this,"onStartTransition"))}))},findTransitionViews:function(a){if(!a)return[];a.match(/^#?([^&?]+)(.*)/);var a=RegExp.$2,b=i.byId(RegExp.$1);if(!b)return[];for(var f=b.getParent();f;f=f.getParent())if(f.isVisible&&!f.isVisible()){var e=b.getShowingView();e&&e.id!==b.id&&b.show();b=f}return[b.getShowingView(),
b,a]},openExternalView:function(a,b){var f=new j,e=this.viewMap[a.url];if(e)return a.moveTo=e,a.noTransition?i.byId(e).hide():(new n(m.body(),a)).dispatch(),f.resolve(!0),f;for(var d=null,e=b.childNodes.length-1;0<=e;e--){var o=b.childNodes[e];if(1===o.nodeType&&"bottom"===(o.getAttribute("fixed")||i.byNode(o)&&i.byNode(o).fixed)){d=o;break}}require([a.dataHandlerClass||this.dataHandlerClass,a.dataSourceClass||this.dataSourceClass,a.fileTypeMapClass||this.fileTypeMapClass],c.hitch(this,function(e,
o,j){e=new e(new o(a.data||a.url),b,d);j=a.contentType||j.getContentType(a.url)||"html";e.processData(j,c.hitch(this,function(b){b?(this.viewMap[a.url]=a.moveTo=b,a.noTransition?i.byId(b).hide():(new n(m.body(),a)).dispatch(),f.resolve(!0)):f.reject("Failed to load "+a.url)}))}));return f},onStartTransition:function(a){a.preventDefault();if(a.detail){var b=a.detail;if(b.moveTo||b.href||b.url||b.scene)if(b.url&&!b.moveTo){var f=b.urlTarget,e=i.byId(f),f=e&&e.containerNode||l.byId(f);f||(f=(e=s.getEnclosingView(a.target))&&
e.domNode.parentNode||m.body());this.openExternalView(b,f)}else if(b.href)if(b.hrefTarget)m.global.open(b.href,b.hrefTarget);else{for(e=s.getEnclosingView(a.target);e;e=s.getParentView(e))f=e;f&&f.performTransition(null,b.transitionDir,b.transition,a.target,function(){location.href=b.href})}else if(b.scene)g.publish("/dojox/mobile/app/pushScene",[b.scene]);else{var c=this.findTransitionViews(b.moveTo),f=c[0],e=c[1],c=c[2];if(!location.hash&&!b.hashchange)s.initialView=f;if(b.moveTo&&e)b.moveTo=("#"===
b.moveTo.charAt(0)?"#"+e.id:e.id)+c;if(f&&!(b.moveTo&&f===i.byId(b.moveTo.replace(/^#?([^&?]+).*/,"$1")))){if((a=i.getEnclosingWidget(a.target))&&a.callback)b.context=a,b.method=a.callback;f.performTransition(b)}}}}});p._instance=new p;p.getInstance=function(){return p._instance};return p})},"dijit/a11y":function(){define("dijit/a11y","dojo/_base/array,dojo/_base/config,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-style,dojo/sniff,./main".split(","),function(h,k,g,d,c,m,j,l){var e=l._isElementShown=
function(a){var b=m.get(a);return"hidden"!=b.visibility&&"collapsed"!=b.visibility&&"none"!=b.display&&"hidden"!=c.get(a,"type")};l.hasDefaultTabStop=function(a){switch(a.nodeName.toLowerCase()){case "a":return c.has(a,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var b;try{var i=a.contentDocument;if("designMode"in i&&"on"==i.designMode)return!0;b=i.body}catch(e){try{b=a.contentWindow.document.body}catch(d){return!1}}return b&&("true"==
b.contentEditable||b.firstChild&&"true"==b.firstChild.contentEditable);default:return"true"==a.contentEditable}};var b=l.isTabNavigable=function(a){return c.get(a,"disabled")?!1:c.has(a,"tabIndex")?0<=c.get(a,"tabIndex"):l.hasDefaultTabStop(a)};l._getTabNavigable=function(a){function f(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var i,d,n,j,l,g,k={},m=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType&&e(a)){if(b(a)){var h=
+c.get(a,"tabIndex");if(!c.has(a,"tabIndex")||0==h)i||(i=a),d=a;else if(0<h){if(!n||h<j)j=h,n=a;if(!l||h>=g)g=h,l=a}h=f(a);c.get(a,"checked")&&h&&(k[h]=a)}"SELECT"!=a.nodeName.toUpperCase()&&m(a)}};e(a)&&m(a);return{first:k[f(i)]||i,last:k[f(d)]||d,lowest:k[f(n)]||n,highest:k[f(l)]||l}};l.getFirstInTabbingOrder=function(a,b){var i=l._getTabNavigable(d.byId(a,b));return i.lowest?i.lowest:i.first};l.getLastInTabbingOrder=function(a,b){var i=l._getTabNavigable(d.byId(a,b));return i.last?i.last:i.highest};
return{hasDefaultTabStop:l.hasDefaultTabStop,isTabNavigable:l.isTabNavigable,_getTabNavigable:l._getTabNavigable,getFirstInTabbingOrder:l.getFirstInTabbingOrder,getLastInTabbingOrder:l.getLastInTabbingOrder}})},"dojox/mobile/_ScrollableMixin":function(){define("dojox/mobile/_ScrollableMixin","dojo/_base/kernel,dojo/_base/config,dojo/_base/declare,dojo/_base/lang,dojo/_base/window,dojo/dom,dojo/dom-class,dijit/registry,./scrollable".split(","),function(h,k,g,d,c,m,j,l,e){return g("dojox.mobile._ScrollableMixin",
e,{fixedHeader:"",fixedFooter:"",scrollableParams:null,allowNestedScrolls:!0,appBars:!0,constructor:function(){this.scrollableParams={}},destroy:function(){this.cleanup();this.inherited(arguments)},startup:function(){if(!this._started){this.findAppBars();var b,a=this.scrollableParams;if(this.fixedHeader){b=m.byId(this.fixedHeader);if(b.parentNode==this.domNode)this.isLocalHeader=!0;a.fixedHeaderHeight=b.offsetHeight}if(this.fixedFooter){b=m.byId(this.fixedFooter);if(b.parentNode==this.domNode)this.isLocalFooter=
!0,b.style.bottom="0px";a.fixedFooterHeight=b.offsetHeight}this.scrollType=this.scrollType||k.mblScrollableScrollType||0;this.init(a);if(this.allowNestedScrolls)for(b=this.getParent();b;b=b.getParent())if(b&&b.scrollableParams){this.dirLock=!0;b.dirLock=!0;break}this._resizeHandle=this.subscribe("/dojox/mobile/afterResizeAll",function(){if("none"!==this.domNode.style.display){var a=c.doc.activeElement;this.isFormElement(a)&&m.isDescendant(a,this.containerNode)&&this.scrollIntoView(a)}});this.inherited(arguments)}},
findAppBars:function(){if(this.appBars){var b,a,f;for(b=0,a=c.body().childNodes.length;b<a;b++)f=c.body().childNodes[b],this.checkFixedBar(f,!1);if(this.domNode.parentNode)for(b=0,a=this.domNode.parentNode.childNodes.length;b<a;b++)f=this.domNode.parentNode.childNodes[b],this.checkFixedBar(f,!1);this.fixedFooterHeight=this.fixedFooter?this.fixedFooter.offsetHeight:0}},checkFixedBar:function(b,a){if(1===b.nodeType){var f=b.getAttribute("fixed")||l.byNode(b)&&l.byNode(b).fixed;if("top"===f){j.add(b,
"mblFixedHeaderBar");if(a)b.style.top="0px",this.fixedHeader=b;return f}if("bottom"===f)return j.add(b,"mblFixedBottomBar"),this.fixedFooter=b,f}return null}})})},"dojox/mobile/viewRegistry":function(){define("dojox/mobile/viewRegistry",["dojo/_base/array","dojo/dom-class","dijit/registry"],function(h,k,g){return{length:0,hash:{},initialView:null,add:function(d){this.hash[d.id]=d;this.length++},remove:function(d){this.hash[d]&&(delete this.hash[d],this.length--)},getViews:function(){var d=[],c;for(c in this.hash)d.push(this.hash[c]);
return d},getParentView:function(d){for(d=d.getParent();d;d=d.getParent())if(k.contains(d.domNode,"mblView"))return d;return null},getChildViews:function(d){return h.filter(this.getViews(),function(c){return this.getParentView(c)===d},this)},getEnclosingView:function(d){for(;d&&"BODY"!==d.tagName;d=d.parentNode)if(1===d.nodeType&&k.contains(d,"mblView"))return g.byNode(d);return null},getEnclosingScrollable:function(d){for(d=g.getEnclosingWidget(d);d;d=d.getParent())if(d.scrollableParams&&d._v)return d;
return null}}})},"dojox/mobile/sniff":function(){define("dojox/mobile/sniff",["dojo/_base/window","dojo/_base/sniff"],function(h,k){var g=navigator.userAgent;k.add("bb",(0<=g.indexOf("BlackBerry")||g.indexOf("BB10"))&&parseFloat(g.split("Version/")[1])||void 0,void 0,!0);k.add("android",parseFloat(g.split("Android ")[1])||void 0,void 0,!0);if(g.match(/(iPhone|iPod|iPad)/)){var d=RegExp.$1.replace(/P/,"p"),g=g.match(/OS ([\d_]+)/)?RegExp.$1:"1",g=parseFloat(g.replace(/_/,".").replace(/_/g,""));k.add(d,
g,void 0,!0);k.add("iphone",g,void 0,!0)}return k})},"dojo/store/util/SimpleQueryEngine":function(){define("dojo/store/util/SimpleQueryEngine",["../../_base/array"],function(h){return function(k,g){function d(c){var c=h.filter(c,k),d=g&&g.sort;d&&c.sort("function"==typeof d?d:function(e,b){for(var a,f=0;a=d[f];f++){var i=e[a.attribute],c=b[a.attribute];if(i!=c)return!!a.descending==(null==i||i>c)?-1:1}return 0});if(g&&(g.start||g.count)){var l=c.length,c=c.slice(g.start||0,(g.start||0)+(g.count||
Infinity));c.total=l}return c}switch(typeof k){default:throw Error("Can not query with a "+typeof k);case "object":case "undefined":var c=k,k=function(d){for(var j in c){var l=c[j];if(l&&l.test){if(!l.test(d[j],d))return!1}else if(l!=d[j])return!1}return!0};break;case "string":if(!this[k])throw Error("No filter function "+k+" was found in store");k=this[k];case "function":}d.matches=k;return d}})},"dojox/mobile/Button":function(){define("dojox/mobile/Button","dojo/_base/array,dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dijit/_WidgetBase,dijit/form/_ButtonMixin,dijit/form/_FormWidgetMixin".split(","),
function(h,k,g,d,c,m,j){return k("dojox.mobile.Button",[c,j,m],{baseClass:"mblButton",_setTypeAttr:null,duration:1E3,_onClick:function(c){var e=this.inherited(arguments);if(e&&0<=this.duration){var b=this.focusNode||this.domNode,a=(this.baseClass+" "+this["class"]).split(" "),a=h.map(a,function(a){return a+"Selected"});g.add(b,a);setTimeout(function(){g.remove(b,a)},this.duration)}return e},isFocusable:function(){return!1},buildRendering:function(){if(this.srcNodeRef){if(this._cv){var c=this.srcNodeRef.firstChild;
if(c&&3===c.nodeType)c.nodeValue=this._cv(c.nodeValue)}}else this.srcNodeRef=d.create("button",{type:this.type});this.inherited(arguments);this.focusNode=this.domNode},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onclick","_onClick")},_setLabelAttr:function(c){this.inherited(arguments,[this._cv?this._cv(c):c])}})})},"dojox/mobile/TransitionEvent":function(){define("dojox/mobile/TransitionEvent",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/lang","dojo/on","./transition"],
function(h,k,g,d,c){return h("dojox.mobile.TransitionEvent",null,{constructor:function(c,d,g){this.transitionOptions=d;this.target=c;this.triggerEvent=g||null},dispatch:function(){var m=d.emit(this.target,"startTransition",{bubbles:!0,cancelable:!0,detail:this.transitionOptions,triggerEvent:this.triggerEvent});m&&k.when(c,g.hitch(this,function(c){k.when(c.call(this,m),g.hitch(this,function(c){this.endTransition(c)}))}))},endTransition:function(c){d.emit(this.target,"endTransition",{detail:c.transitionOptions})}})})},
"dojox/mobile/Carousel":function(){define("dojox/mobile/Carousel","dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/_base/event,dojo/_base/sniff,dojo/dom-class,dojo/dom-construct,dojo/dom-style,dijit/registry,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,./lazyLoadUtils,./CarouselItem,./PageIndicator,./SwapView,require".split(","),function(h,k,g,d,c,m,j,l,e,b,a,f,i,o,n,s,p){return g("dojox.mobile.Carousel",[f,a,b],{numVisible:2,itemWidth:0,title:"",pageIndicator:!0,navButton:!1,height:"",
selectable:!0,baseClass:"mblCarousel",buildRendering:function(){this.containerNode=j.create("div",{className:"mblCarouselPages"});this.inherited(arguments);if(this.srcNodeRef)for(var a=0,b=this.srcNodeRef.childNodes.length;a<b;a++)this.containerNode.appendChild(this.srcNodeRef.firstChild);this.headerNode=j.create("div",{className:"mblCarouselHeaderBar"},this.domNode);if(this.navButton)this.btnContainerNode=j.create("div",{className:"mblCarouselBtnContainer"},this.headerNode),l.set(this.btnContainerNode,
"float","right"),this.prevBtnNode=j.create("button",{className:"mblCarouselBtn",title:"Previous",innerHTML:"&lt;"},this.btnContainerNode),this.nextBtnNode=j.create("button",{className:"mblCarouselBtn",title:"Next",innerHTML:"&gt;"},this.btnContainerNode),this._prevHandle=this.connect(this.prevBtnNode,"onclick","onPrevBtnClick"),this._nextHandle=this.connect(this.nextBtnNode,"onclick","onNextBtnClick");if(this.pageIndicator){if(!this.title)this.title="&nbsp;";this.piw=new n;l.set(this.piw,"float",
"right");this.headerNode.appendChild(this.piw.domNode)}this.titleNode=j.create("div",{className:"mblCarouselTitle"},this.headerNode);this.domNode.appendChild(this.containerNode);this.subscribe("/dojox/mobile/viewChanged","handleViewChanged");this._clickHandle=this.connect(this.domNode,"onclick","_onClick");this._keydownHandle=this.connect(this.domNode,"onkeydown","_onClick");this._dragstartHandle=this.connect(this.domNode,"ondragstart",d.stop);this.selectedItemIndex=-1;this.items=[]},startup:function(){if(!this._started){this._updateHeight();
if(this.store){if(!this.setStore)throw Error("Use StoreCarousel or DataCarousel instead of Carousel.");var a=this.store;this.store=null;this.setStore(a,this.query,this.queryOptions)}else this.resizeItems();this.inherited(arguments);this.currentView=h.filter(this.getChildren(),function(a){return a.isVisible()})[0]}},_updateHeight:function(){var a;if("inherit"===this.height)this.domNode.offsetParent&&(a=this.domNode.offsetParent.offsetHeight+"px");else if(this.height)a=this.height;if(a)this.domNode.style.height=
a},resizeItems:function(){var a=0,b=this.domNode.offsetHeight-(this.headerNode?this.headerNode.offsetHeight:0),f=5/this.numVisible;h.forEach(this.getChildren(),function(i){if(i instanceof s){if(!i.lazy&&!i.domNode.getAttribute("lazy"))i._instantiated=!0;for(var i=i.containerNode.childNodes,e=0,c=i.length;e<c;e++){var d=i[e];if(1===d.nodeType){var o=this.items[a]||{};l.set(d,{width:o.width||90/this.numVisible+"%",height:o.height||b+"px",margin:"0 "+(o.margin||f+"%")});m.add(d,"mblCarouselSlot");a++}}}},
this);if(this.piw)this.piw.refId=this.containerNode.firstChild,this.piw.reset()},resize:function(){if(this.itemWidth)this.numVisible=Math.floor(this.domNode.offsetWidth/this.itemWidth);this.selectedItemIndex=this.getIndexByItemWidget(this.selectedItem);this._updateHeight();0<this.items.length&&(this.onComplete(this.items),this.select(this.selectedItemIndex))},fillPages:function(){h.forEach(this.getChildren(),function(a,b){for(var f="",i=0;i<this.numVisible;i++){var e,c="",d;e=b*this.numVisible+i;
var o={};e<this.items.length?(o=this.items[e],(e=this.store.getValue(o,"type"))?(c=this.store.getValue(o,"props"),d=this.store.getValue(o,"mixins")):(e="dojox.mobile.CarouselItem",h.forEach(["alt","src","headerText","footerText"],function(a){var b=this.store.getValue(o,a);void 0!==b&&(c&&(c+=","),c+=a+':"'+b+'"')},this))):(e="dojox.mobile.CarouselItem",c='src:"'+p.toUrl("dojo/resources/blank.gif")+'", className:"mblCarouselItemBlank"');f+='<div data-dojo-type="'+e+'"';c&&(f+=" data-dojo-props='"+
c+"'");d&&(f+=" data-dojo-mixins='"+d+"'");f+="></div>"}a.containerNode.innerHTML=f},this)},onComplete:function(a){h.forEach(this.getChildren(),function(a){a instanceof s&&a.destroyRecursive()});this.selectedItem=null;this.items=a;var b=Math.ceil(a.length/this.numVisible),f=this.domNode.offsetHeight-this.headerNode.offsetHeight;pg=Math.floor((-1===this.selectedItemIndex?0:this.selectedItemIndex)/this.numVisible);for(a=0;a<b;a++){var i=new s({height:f+"px",lazy:!0});this.addChild(i);a===pg?(i.show(),
this.currentView=i):i.hide()}this.fillPages();this.resizeItems();f=this.getChildren();b=pg+1>b-1?b-1:pg+1;for(a=0>pg-1?0:pg-1;a<=b;a++)this.instantiateView(f[a])},onError:function(){},onUpdate:function(){},onDelete:function(){},onSet:function(){},onNew:function(){},onStoreClose:function(){},getParentView:function(a){for(a=e.getEnclosingWidget(a);a;a=a.getParent())if(a.getParent()instanceof s)return a;return null},getIndexByItemWidget:function(a){if(!a)return-1;var b=a.getParent();return h.indexOf(this.getChildren(),
b)*this.numVisible+h.indexOf(b.getChildren(),a)},getItemWidgetByIndex:function(a){return-1===a?null:this.getChildren()[Math.floor(a/this.numVisible)].getChildren()[a%this.numVisible]},onPrevBtnClick:function(){this.currentView&&this.currentView.goTo(-1)},onNextBtnClick:function(){this.currentView&&this.currentView.goTo(1)},_onClick:function(a){if(!1!==this.onClick(a)){if(a&&"keydown"===a.type)if(39===a.keyCode)this.onNextBtnClick();else if(37===a.keyCode)this.onPrevBtnClick();else if(13!==a.keyCode)return;
for(a=e.getEnclosingWidget(a.target);;a=a.getParent()){if(!a)return;if(a.getParent()instanceof s)break}this.select(a);var b=this.getIndexByItemWidget(a);k.publish("/dojox/mobile/carouselSelect",[this,a,this.items[b],b])}},select:function(a){"number"===typeof a&&(a=this.getItemWidgetByIndex(a));if(this.selectable)this.selectedItem&&(this.selectedItem.set("selected",!1),m.remove(this.selectedItem.domNode,"mblCarouselSlotSelected")),a&&(a.set("selected",!0),m.add(a.domNode,"mblCarouselSlotSelected")),
this.selectedItem=a},onClick:function(){},instantiateView:function(a){if(a&&!a._instantiated){var b="none"===l.get(a.domNode,"display");b&&l.set(a.domNode,{visibility:"hidden",display:""});i.instantiateLazyWidgets(a.containerNode,null,function(){b&&l.set(a.domNode,{visibility:"visible",display:"none"})});a._instantiated=!0}},handleViewChanged:function(a){if(a.getParent()===this)this.currentView.nextView(this.currentView.domNode)===a?this.instantiateView(a.nextView(a.domNode)):this.instantiateView(a.previousView(a.domNode)),
this.currentView=a},_setTitleAttr:function(a){this.titleNode.innerHTML=this._cv?this._cv(a):a;this._set("title",a)}})})},"dojox/mobile/_ExecScriptMixin":function(){define("dojox/mobile/_ExecScriptMixin",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/window","dojo/dom-construct"],function(h,k,g,d){return k("dojox.mobile._ExecScriptMixin",null,{execScript:function(c){c=c.replace(/\f/g," ").replace(/<\/script>/g,"\u000c");c=c.replace(/<script [^>]*src=['"]([^'"]+)['"][^>]*>([^\f]*)\f/ig,function(c,
j){d.create("script",{type:"text/javascript",src:j},g.doc.getElementsByTagName("head")[0]);return""});return c=c.replace(/<script>([^\f]*)\f/ig,function(c,d){h.eval(d);return""})}})})},"dojox/mobile/lazyLoadUtils":function(){define("dojox/mobile/lazyLoadUtils","dojo/_base/kernel,dojo/_base/array,dojo/_base/config,dojo/_base/window,dojo/_base/Deferred,dojo/ready".split(","),function(h,k,g,d,c,m){return new function(){this._lazyNodes=[];var j=this;g.parseOnLoad&&m(90,function(){var c=k.filter(d.body().getElementsByTagName("*"),
function(a){return"true"===a.getAttribute("lazy")||(a.getAttribute("data-dojo-props")||"").match(/lazy\s*:\s*true/)}),e,b,a,f;for(e=0;e<c.length;e++)k.forEach(["dojoType","data-dojo-type"],function(i){a=k.filter(c[e].getElementsByTagName("*"),function(a){return a.getAttribute(i)});for(b=0;b<a.length;b++)f=a[b],f.setAttribute("__"+i,f.getAttribute(i)),f.removeAttribute(i),j._lazyNodes.push(f)})});m(function(){for(var c=0;c<j._lazyNodes.length;c++){var e=j._lazyNodes[c];k.forEach(["dojoType","data-dojo-type"],
function(b){e.getAttribute("__"+b)&&(e.setAttribute(b,e.getAttribute("__"+b)),e.removeAttribute("__"+b))})}delete j._lazyNodes});this.instantiateLazyWidgets=function(d,e,b){for(var a=new c,e=e?e.split(/,/):[],f=d.getElementsByTagName("*"),i=f.length,o=0;o<i;o++){var n=f[o].getAttribute("dojoType")||f[o].getAttribute("data-dojo-type");n&&(e.push(n),n=(n=f[o].getAttribute("data-dojo-mixins"))?n.split(/, */):[],e=e.concat(n))}if(0===e.length)return!0;if(h.require)return k.forEach(e,function(a){h.require(a)}),
h.parser.parse(d),b&&b(d),!0;e=k.map(e,function(a){return a.replace(/\./g,"/")});require(e,function(){h.parser.parse(d);b&&b(d);a.resolve(!0)});return a}}})},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase","require,dojo/_base/array,dojo/aspect,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-attr,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dojo/_base/kernel,dojo/_base/lang,dojo/on,dojo/ready,dojo/Stateful,dojo/topic,dojo/_base/window,./Destroyable,./registry".split(","),
function(h,k,g,d,c,m,j,l,e,b,a,f,i,o,n,s,p,t,q,u,w,r){function A(a){return function(b){l[b?"set":"remove"](this.domNode,a,b);this._set(a,b)}}var C={};return m("dijit._WidgetBase",[t,w],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:A("lang"),dir:"",_setDirAttr:A("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:d.blankGif||h.toUrl("dojo/resources/blank.gif"),postscript:function(a,b){this.create(a,b)},create:function(a,b){this.srcNodeRef=j.byId(b);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&"string"==typeof this.srcNodeRef.id)this.id=this.srcNodeRef.id;if(a)this.params=a,n.mixin(this,a);this.postMixInProperties();if(!this.id)this.id=r.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id;this.ownerDocument=this.ownerDocument||
(this.srcNodeRef?this.srcNodeRef.ownerDocument:u.doc);this.ownerDocumentBody=u.body(this.ownerDocument);r.add(this);this.buildRendering();var f;if(this.domNode){this._applyAttributes();var i=this.srcNodeRef;i&&i.parentNode&&this.domNode!==i&&(i.parentNode.replaceChild(this.domNode,i),f=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();f&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a=this.constructor,b=a._setterAttrs;if(!b){var b=a._setterAttrs=[],f;for(f in this.attributeMap)b.push(f);
var a=a.prototype,i;for(i in a)i in this.attributeMap||"_set"+i.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()})+"Attr"in a&&b.push(i)}var c={},e;for(e in this.params||{})c[e]=this[e];k.forEach(b,function(a){a in c||this[a]&&this.set(a,this[a])},this);for(e in c)this.set(e,c[e])},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode)this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");if(this.baseClass){var a=this.baseClass.split(" ");
this.isLeftToRight()||(a=a.concat(k.map(a,function(a){return a+"Rtl"})));e.add(this.domNode,a)}},postCreate:function(){},startup:function(){if(!this._started)this._started=!0,k.forEach(this.getChildren(),function(a){if(!a._started&&!a._destroyed&&n.isFunction(a.startup))a.startup(),a._started=!0})},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function b(f){f.destroyRecursive?f.destroyRecursive(a):f.destroy&&f.destroy(a)}this._beingDestroyed=
!0;this.uninitialize();k.forEach(this._connects,n.hitch(this,"disconnect"));k.forEach(this._supportingWidgets,b);this.domNode&&k.forEach(r.findWidgets(this.domNode,this.containerNode),b);this.destroyRendering(a);r.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?l.remove(this.domNode,"widgetId"):b.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||b.destroy(this.srcNodeRef),delete this.srcNodeRef)},
destroyDescendants:function(a){k.forEach(this.getChildren(),function(b){b.destroyRecursive&&b.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var b=this.domNode;n.isObject(a)?f.set(b,a):b.style.cssText=b.style.cssText?b.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,b,f){f=3<=arguments.length?f:this.attributeMap[a];k.forEach(n.isArray(f)?f:[f],function(f){var i=this[f.node||f||"domNode"];switch(f.type||"attribute"){case "attribute":n.isFunction(b)&&
(b=n.hitch(this,b));f=f.attribute?f.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;i.tagName?l.set(i,f,b):i.set(f,b);break;case "innerText":i.innerHTML="";i.appendChild(this.ownerDocument.createTextNode(b));break;case "innerHTML":i.innerHTML=b;break;case "class":e.replace(i,b,this[a])}},this)},get:function(a){var b=this._getAttrNames(a);return this[b.g]?this[b.g]():this[a]},set:function(a,b){if("object"===typeof a){for(var f in a)this.set(f,a[f]);return this}f=this._getAttrNames(a);var i=
this[f.s];if(n.isFunction(i))var e=i.apply(this,Array.prototype.slice.call(arguments,1));else{var i=this.focusNode&&!n.isFunction(this.focusNode)?"focusNode":"domNode",c=this[i].tagName,d;if(!(d=C[c])){d=this[i];var o={},g;for(g in d)o[g.toLowerCase()]=!0;d=C[c]=o}g=a in this.attributeMap?this.attributeMap[a]:f.s in this?this[f.s]:f.l in d&&"function"!=typeof b||/^aria-|^data-|^role$/.test(a)?i:null;null!=g&&this._attrToDom(a,b,g);this._set(a,b)}return e||this},_attrPairNames:{},_getAttrNames:function(a){var b=
this._attrPairNames;if(b[a])return b[a];var f=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return b[a]={n:a+"Node",s:"_set"+f+"Attr",g:"_get"+f+"Attr",l:f.toLowerCase()}},_set:function(a,b){var f=this[a];this[a]=b;this._created&&b!==f&&(this._watchCallbacks&&this._watchCallbacks(a,f,b),this.emit("attrmodified-"+a,{detail:{prevValue:f,newValue:b}}))},emit:function(a,b,f){b=b||{};if(void 0===b.bubbles)b.bubbles=!0;if(void 0===b.cancelable)b.cancelable=!0;if(!b.detail)b.detail=
{};b.detail.widget=this;var i,c=this["on"+a];c&&(i=c.apply(this,f?f:[b]));this._started&&!this._beingDestroyed&&s.emit(this.domNode,a.toLowerCase(),b);return i},on:function(a,b){var f=this._onMap(a);return f?g.after(this,f,b,!0):this.own(s(this.domNode,a,b))[0]},_onMap:function(a){var b=this.constructor,f=b._onMap;if(!f){var f=b._onMap={},i;for(i in b.prototype)/^on/.test(i)&&(f[i.replace(/^on/,"").toLowerCase()]=i)}return f["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+
this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?r.findWidgets(this.containerNode):[]},getParent:function(){return r.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,b,f){return this.own(c.connect(a,b,this,f))[0]},disconnect:function(a){a.remove()},subscribe:function(a,b){return this.own(q.subscribe(a,n.hitch(this,b)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:a.isBodyLtr(this.ownerDocument)},
isFocusable:function(){return this.focus&&"none"!=f.get(this.domNode,"display")},placeAt:function(a,f){var i=!a.tagName&&r.byId(a);i&&i.addChild&&(!f||"number"===typeof f)?i.addChild(this,f):(i=i?i.containerNode&&!/after|before|replace/.test(f||"")?i.containerNode:i.domNode:j.byId(a,this.ownerDocument),b.place(this.domNode,i,f),!this._started&&(this.getParent()||{})._started&&this.startup());return this},getTextDir:function(a,b){return b},applyTextDir:function(){},defer:function(a,b){var f=setTimeout(n.hitch(this,
function(){f=null;this._destroyed||n.hitch(this,a)()}),b||0);return{remove:function(){f&&(clearTimeout(f),f=null);return null}}}})})},"dojox/mobile/View":function(){define("dojox/mobile/View","dojo/_base/array,dojo/_base/config,dojo/_base/connect,dojo/_base/declare,dojo/_base/lang,dojo/_base/sniff,dojo/_base/window,dojo/_base/Deferred,dojo/dom,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dijit/registry,dijit/_Contained,dijit/_Container,dijit/_WidgetBase,./ViewController,./common,./transition,./viewRegistry".split(","),
function(h,k,g,d,c,m,j,l,e,b,a,f,i,o,n,s,p,t,q,u,w){c.getObject("dojox.mobile",!0);return d("dojox.mobile.View",[p,s,n],{selected:!1,keepScrollPos:!0,tag:"div",baseClass:"mblView",constructor:function(a,b){if(b)e.byId(b).style.visibility="hidden"},destroy:function(){w.remove(this.id);this.inherited(arguments)},buildRendering:function(){this.domNode=this.containerNode=this.srcNodeRef||a.create(this.tag);this._animEndHandle=this.connect(this.domNode,"webkitAnimationEnd","onAnimationEnd");this._animStartHandle=
this.connect(this.domNode,"webkitAnimationStart","onAnimationStart");if(!k.mblCSS3Transition)this._transEndHandle=this.connect(this.domNode,"webkitTransitionEnd","onAnimationEnd");m("mblAndroid3Workaround")&&i.set(this.domNode,"webkitTransformStyle","preserve-3d");w.add(this);this.inherited(arguments)},startup:function(){if(!this._started){if(void 0===this._visible){var a=this.getSiblingViews(),b=location.hash&&location.hash.substring(1).split(/,/),f,i,c;h.forEach(a,function(a,e){-1!==h.indexOf(b,
a.id)&&(f=a);0==e&&(c=a);a.selected&&(i=a);a._visible=!1},this);(f||i||c)._visible=!0}this._visible&&(this.show(!0,!0),this.defer(function(){this.onStartView();g.publish("/dojox/mobile/startView",[this])}));if("visible"!=this.domNode.style.visibility)this.domNode.style.visibility="visible";this.inherited(arguments);a=this.getParent();(!a||!a.resize)&&this.resize();this._visible||this.hide()}},resize:function(){h.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},onStartView:function(){},
onBeforeTransitionIn:function(){},onAfterTransitionIn:function(){},onBeforeTransitionOut:function(){},onAfterTransitionOut:function(){},_clearClasses:function(a){if(a){var b=[];h.forEach(c.trim(a.className||"").split(/\s+/),function(a){(a.match(/^mbl\w*View$/)||-1===a.indexOf("mbl"))&&b.push(a)},this);a.className=b.join(" ")}},_fixViewState:function(a){for(var f=this.domNode.parentNode.childNodes,i=0;i<f.length;i++){var c=f[i];1===c.nodeType&&b.contains(c,"mblView")&&this._clearClasses(c)}this._clearClasses(a)},
convertToId:function(a){return"string"==typeof a?a.replace(/^#?([^&?]+).*/,"$1"):a},_isBookmarkable:function(a){return a.moveTo&&(k.mblForceBookmarkable||"#"===a.moveTo.charAt(0))&&!a.hashchange},performTransition:function(a,f,d,n,l){if(!this._detail){var h,s;if(a&&"object"===typeof a)h=a,s=f;else{h={moveTo:a,transitionDir:f,transition:d,context:n,method:l};s=[];for(var p=5;p<arguments.length;p++)s.push(arguments[p])}this._detail=h;this._optArgs=s;this._arguments=[h.moveTo,h.transitionDir,h.transition,
h.context,h.method];if("#"!==h.moveTo){if(h.moveTo)s=this.convertToId(h.moveTo);else{if(!this._dummyNode)this._dummyNode=j.doc.createElement("div"),j.body().appendChild(this._dummyNode);s=this._dummyNode}this.addTransitionInfo&&"string"==typeof h.moveTo&&this._isBookmarkable(h)&&this.addTransitionInfo(this.id,h.moveTo,{transitionDir:h.transitionDir,transition:h.transition});var p=this.domNode,t=p.offsetTop;if(s=this.toNode=e.byId(s)){s.style.visibility="hidden";s.style.display="";this._fixViewState(s);
var u=o.byNode(s);if(u){if(k.mblAlwaysResizeOnTransition||!u._resized)q.resizeAll(null,u),u._resized=!0;if(h.transition&&"none"!=h.transition)u.containerNode.style.paddingTop=t+"px";u.load&&u.load();u.movedFrom=p.id}m("mblAndroidWorkaround")&&!k.mblCSS3Transition&&h.transition&&"none"!=h.transition&&(i.set(s,"webkitTransformStyle","preserve-3d"),i.set(p,"webkitTransformStyle","preserve-3d"),b.add(s,"mblAndroidWorkaround"));this.onBeforeTransitionOut.apply(this,this._arguments);g.publish("/dojox/mobile/beforeTransitionOut",
[this].concat(c._toArray(this._arguments)));if(u){if(this.keepScrollPos&&!this.getParent()){t=j.body().scrollTop||j.doc.documentElement.scrollTop||j.global.pageYOffset||0;p._scrollTop=t;var w=1==h.transitionDir?0:s._scrollTop||0;s.style.top="0px";if(1<t||0!==w)p.style.top=w-t+"px",!1!==k.mblHideAddressBar&&setTimeout(function(){j.global.scrollTo(0,w||1)},0)}else s.style.top="0px";u.onBeforeTransitionIn.apply(u,this._arguments);g.publish("/dojox/mobile/beforeTransitionIn",[u].concat(c._toArray(this._arguments)))}s.style.display=
"none";s.style.visibility="visible";q.fromView=this;q.toView=u;this._doTransition(p,s,h.transition,h.transitionDir)}else console.log("dojox/mobile/View.performTransition: destination view not found: "+h.moveTo)}}},_toCls:function(a){return"mbl"+a.charAt(0).toUpperCase()+a.substring(1)},_doTransition:function(a,e,d,o){var n=-1==o?" mblReverse":"";e.style.display="";if(!d||"none"==d)this.domNode.style.display="none",this.invokeCallback();else if(k.mblCSS3Transition)l.when(u,c.hitch(this,function(b){var f=
i.get(e,"position");i.set(e,"position","absolute");l.when(b(a,e,{transition:d,reverse:-1===o?!0:!1}),c.hitch(this,function(){i.set(e,"position",f);this.invokeCallback()}))}));else{-1!=d.indexOf("cube")&&(m("ipad")?i.set(e.parentNode,{webkitPerspective:1600}):m("iphone")&&i.set(e.parentNode,{webkitPerspective:800}));var g=this._toCls(d);m("mblAndroidWorkaround")?setTimeout(function(){b.add(a,g+" mblOut"+n);b.add(e,g+" mblIn"+n);b.remove(e,"mblAndroidWorkaround");setTimeout(function(){b.add(a,"mblTransition");
b.add(e,"mblTransition")},30)},70):(b.add(a,g+" mblOut"+n),b.add(e,g+" mblIn"+n),setTimeout(function(){b.add(a,"mblTransition");b.add(e,"mblTransition")},100));var h="50% 50%",s="50% 50%",p;-1!=d.indexOf("swirl")||-1!=d.indexOf("zoom")?(h=this.keepScrollPos&&!this.getParent()?j.body().scrollTop||j.doc.documentElement.scrollTop||j.global.pageYOffset||0:-f.position(a,!0).y,p=j.global.innerHeight/2+h,h="50% "+p+"px",s="50% "+p+"px"):-1!=d.indexOf("scale")&&(h=f.position(a,!0),s=(void 0!==this.clickedPosX?
this.clickedPosX:j.global.innerWidth/2)-h.x,h=this.keepScrollPos&&!this.getParent()?j.body().scrollTop||j.doc.documentElement.scrollTop||j.global.pageYOffset||0:-h.y,p=(void 0!==this.clickedPosY?this.clickedPosY:j.global.innerHeight/2)+h,h=s+"px "+p+"px",s=s+"px "+p+"px");i.set(a,{webkitTransformOrigin:h});i.set(e,{webkitTransformOrigin:s})}},onAnimationStart:function(){},onAnimationEnd:function(a){var f=a.animationName||a.target.className;if(!(-1===f.indexOf("Out")&&-1===f.indexOf("In")&&-1===f.indexOf("Shrink"))){var e=
!1;b.contains(this.domNode,"mblOut")?(e=!0,this.domNode.style.display="none",b.remove(this.domNode,[this._toCls(this._detail.transition),"mblIn","mblOut","mblReverse"])):this.containerNode.style.paddingTop="";i.set(this.domNode,{webkitTransformOrigin:""});if(-1!==f.indexOf("Shrink"))a=a.target,a.style.display="none",b.remove(a,"mblCloseContent"),(a=w.getEnclosingScrollable(this.domNode))&&a.onTouchEnd();e&&this.invokeCallback();this._clearClasses(this.domNode);this.clickedPosX=this.clickedPosY=void 0;
if(-1!==f.indexOf("Cube")&&-1!==f.indexOf("In")&&m("iphone"))this.domNode.parentNode.style.webkitPerspective=""}},invokeCallback:function(){this.onAfterTransitionOut.apply(this,this._arguments);g.publish("/dojox/mobile/afterTransitionOut",[this].concat(this._arguments));var a=o.byNode(this.toNode);if(a)a.onAfterTransitionIn.apply(a,this._arguments),g.publish("/dojox/mobile/afterTransitionIn",[a].concat(this._arguments)),a.movedFrom=void 0,this.setFragIds&&this._isBookmarkable(this._detail)&&this.setFragIds(a);
m("mblAndroidWorkaround")&&setTimeout(c.hitch(this,function(){a&&i.set(this.toNode,"webkitTransformStyle","");i.set(this.domNode,"webkitTransformStyle","")}),0);var b=this._detail.context,f=this._detail.method;if(b||f)f||(f=b,b=null),b=b||j.global,"string"==typeof f?b[f].apply(b,this._optArgs):"function"==typeof f&&f.apply(b,this._optArgs);this._detail=this._optArgs=this._arguments=void 0},isVisible:function(a){if(a){for(a=this.domNode;"BODY"!==a.tagName;a=a.parentNode)if("none"===i.get(a,"display"))return!1;
return!0}return"none"!==i.get(this.domNode,"display")},getShowingView:function(){for(var a=this.domNode.parentNode.childNodes,f=0;f<a.length;f++){var i=a[f];if(1===i.nodeType&&b.contains(i,"mblView")&&"none"!==i.style.display)return o.byNode(i)}return null},getSiblingViews:function(){return!this.domNode.parentNode?[this]:h.map(h.filter(this.domNode.parentNode.childNodes,function(a){return 1===a.nodeType&&b.contains(a,"mblView")}),function(a){return o.byNode(a)})},show:function(a,b){var f=this.getShowingView();
a||(f&&(f.onBeforeTransitionOut(f.id),g.publish("/dojox/mobile/beforeTransitionOut",[f,f.id])),this.onBeforeTransitionIn(this.id),g.publish("/dojox/mobile/beforeTransitionIn",[this,this.id]));b?this.domNode.style.display="":h.forEach(this.getSiblingViews(),function(a){a.domNode.style.display=a===this?"":"none"},this);this.load&&this.load();a||(f&&(f.onAfterTransitionOut(f.id),g.publish("/dojox/mobile/afterTransitionOut",[f,f.id])),this.onAfterTransitionIn(this.id),g.publish("/dojox/mobile/afterTransitionIn",
[this,this.id]))},hide:function(){this.domNode.style.display="none"}})})},"dojo/_base/declare":function(){define("dojo/_base/declare",["./kernel","../has","./lang"],function(h,k,g){function d(a,b){throw Error("declare"+(b?" "+b:"")+": "+a);}function c(a,b,f){var i,e,c,o,n,g,j,l=this._inherited=this._inherited||{};"string"==typeof a&&(i=a,a=b,b=f);f=0;o=a.callee;(i=i||o.nom)||d("can't deduce a name to call inherited()",this.declaredClass);n=this.constructor._meta;c=n.bases;j=l.p;if(i!=C){if(l.c!==
o&&(j=0,g=c[0],n=g._meta,n.hidden[i]!==o)){(e=n.chains)&&"string"==typeof e[i]&&d("calling chained method with inherited: "+i,this.declaredClass);do if(n=g._meta,e=g.prototype,n&&(e[i]===o&&e.hasOwnProperty(i)||n.hidden[i]===o))break;while(g=c[++j]);j=g?j:-1}if(g=c[++j])if(e=g.prototype,g._meta&&e.hasOwnProperty(i))f=e[i];else{o=u[i];do if(e=g.prototype,(f=e[i])&&(g._meta?e.hasOwnProperty(i):f!==o))break;while(g=c[++j])}f=g&&f||u[i]}else{if(l.c!==o&&(j=0,(n=c[0]._meta)&&n.ctor!==o)){e=n.chains;for((!e||
"manual"!==e.constructor)&&d("calling chained constructor with inherited",this.declaredClass);(g=c[++j])&&!((n=g._meta)&&n.ctor===o););j=g?j:-1}for(;(g=c[++j])&&!(f=(n=g._meta)?n.ctor:g););f=g&&f}l.c=f;l.p=j;if(f)return!0===b?f:f.apply(this,b||a)}function m(a,b){return"string"==typeof a?this.__inherited(a,b,!0):this.__inherited(a,!0)}function j(a,b,f){var i=this.getInherited(a,b);if(i)return i.apply(this,f||b||a)}function l(a){for(var b=this.constructor._meta.bases,f=0,i=b.length;f<i;++f)if(b[f]===
a)return!0;return this instanceof a}function e(a,b){for(var f in b)f!=C&&b.hasOwnProperty(f)&&(a[f]=b[f])}function b(a){t.safeMixin(this.prototype,a);return this}function a(a){return t([this].concat(a))}function f(a,b){return function(){var v;var f=arguments,i=f,e=f[0],c,d;d=a.length;var o;if(!(this instanceof f.callee))return p(f);if(b&&(e&&e.preamble||this.preamble)){o=Array(a.length);o[0]=f;for(c=0;;){if(e=f[0])(e=e.preamble)&&(f=e.apply(this,f)||f);e=a[c].prototype;(e=e.hasOwnProperty("preamble")&&
e.preamble)&&(f=e.apply(this,f)||f);if(++c==d)break;o[c]=f}}for(c=d-1;0<=c;--c)e=a[c],(v=(d=e._meta)?d.ctor:e,e=v)&&e.apply(this,o?o[c]:f);(e=this.postscript)&&e.apply(this,i)}}function i(a,b){return function(){var f=arguments,i=f,e=f[0];if(!(this instanceof f.callee))return p(f);if(b){if(e)(e=e.preamble)&&(i=e.apply(this,i)||i);(e=this.preamble)&&e.apply(this,i)}a&&a.apply(this,f);(e=this.postscript)&&e.apply(this,f)}}function o(a){return function(){var v;var b=arguments,f=0,i,e;if(!(this instanceof
b.callee))return p(b);for(;i=a[f];++f)if(v=(e=i._meta)?e.ctor:i,i=v){i.apply(this,b);break}(i=this.postscript)&&i.apply(this,b)}}function n(a,b,f){return function(){var i,e,c=0,d=1;f&&(c=b.length-1,d=-1);for(;i=b[c];c+=d)e=i._meta,(i=(e?e.hidden:i.prototype)[a])&&i.apply(this,arguments)}}function s(a){r.prototype=a.prototype;a=new r;r.prototype=null;return a}function p(a){var b=a.callee,f=s(b);b.apply(f,a);return f}function t(j,h,k){"string"!=typeof j&&(k=h,h=j,j="");var k=k||{},p,r,v,z,G,y,D,H=1,
Q=h;if("[object Array]"==w.call(h)){H=j;v=[];z=[{cls:0,refs:[]}];y={};for(var J=1,L=h.length,F=0,B,K,x,E;F<L;++F){(B=h[F])?"[object Function]"!=w.call(B)&&d("mixin #"+F+" is not a callable constructor.",H):d("mixin #"+F+" is unknown. Did you use dojo.require to pull it in?",H);K=B._meta?B._meta.bases:[B];x=0;for(B=K.length-1;0<=B;--B){E=K[B].prototype;if(!E.hasOwnProperty("declaredClass"))E.declaredClass="uniqName_"+A++;E=E.declaredClass;y.hasOwnProperty(E)||(y[E]={count:0,refs:[],cls:K[B]},++J);
E=y[E];x&&x!==E&&(E.refs.push(x),++x.count);x=E}++x.count;z[0].refs.push(x)}for(;z.length;){x=z.pop();v.push(x.cls);for(--J;r=x.refs,1==r.length;){x=r[0];if(!x||--x.count){x=0;break}v.push(x.cls);--J}if(x)for(F=0,L=r.length;F<L;++F)x=r[F],--x.count||z.push(x)}J&&d("can't build consistent linearization",H);B=h[0];v[0]=B?B._meta&&B===v[v.length-B._meta.bases.length]?B._meta.bases.length:1:0;y=v;v=y[0];H=y.length-v;h=y[H]}else y=[0],h?"[object Function]"==w.call(h)?(v=h._meta,y=y.concat(v?v.bases:h)):
d("base class is not a callable constructor.",j):null!==h&&d("unknown base class. Did you use dojo.require to pull it in?",j);if(h)for(r=H-1;;--r){p=s(h);if(!r)break;v=y[r];(v._meta?e:q)(p,v.prototype);z=new Function;z.superclass=h;z.prototype=p;h=p.constructor=z}else p={};t.safeMixin(p,k);v=k.constructor;if(v!==u.constructor)v.nom=C,p.constructor=v;for(r=H-1;r;--r)(v=y[r]._meta)&&v.chains&&(D=q(D||{},v.chains));p["-chains-"]&&(D=q(D||{},p["-chains-"]));v=!D||!D.hasOwnProperty(C);y[0]=z=D&&"manual"===
D.constructor?o(y):1==y.length?i(k.constructor,v):f(y,v);z._meta={bases:y,hidden:k,chains:D,parents:Q,ctor:k.constructor};z.superclass=h&&h.prototype;z.extend=b;z.createSubclass=a;z.prototype=p;p.constructor=z;p.getInherited=m;p.isInstanceOf=l;p.inherited=I;p.__inherited=c;if(j)p.declaredClass=j,g.setObject(j,z);if(D)for(G in D)if(p[G]&&"string"==typeof D[G]&&G!=C)v=p[G]=n(G,y,"after"===D[G]),v.nom=G;return z}var q=g.mixin,u=Object.prototype,w=u.toString,r=new Function,A=0,C="constructor",I=h.config.isDebug?
j:c;h.safeMixin=t.safeMixin=function(a,b){var f,i;for(f in b)if(i=b[f],(i!==u[f]||!(f in u))&&f!=C){if("[object Function]"==w.call(i))i.nom=f;a[f]=i}return a};return h.declare=t})},"dojox/mobile/transition":function(){define("dojox/mobile/transition",["dojo/_base/Deferred","dojo/_base/config"],function(h,k){if(k.mblCSS3Transition){var g=new h;require([k.mblCSS3Transition],function(d){g.resolve(d)});return g}return null})},"walta/SpeedBugView":function(){define("walta/SpeedBugView","dojo/_base/declare,dojo/_base/array,dojo/_base/lang,dojo/dom-construct,dojox/mobile/parser,dojo/store/Memory,dojox/mobile/View,dojox/mobile/StoreCarousel,walta/AnchorBar".split(","),
function(h,k,g,d,c,m,j,l,e){return h("walta.SpeedBugView",[j],{speedBug:null,"class":"waltaSpeedBug",postMixInProperties:function(){this.inherited(arguments);this._speedBugData=[];k.forEach(this.speedBug.bugsList,this._renderGroupOrBug,this);this._store=new m({data:this._speedBugData})},postCreate:function(){this.addChild(new e({title:"SpeedBug"}));this.addChild(new l({navButton:!1,height:"inherit",pageIndicator:!1,numVisible:2,store:this._store}))},_renderGroupOrBug:function(b){b.groupRef?k.forEach(b.bugs,
this._renderBug,this):this._renderBug(b)},_renderBug:function(b){this._speedBugData.push({type:"walta/SpeedBugTile",props:'image:"'+b.image+'",ref:"'+b.ref+'"'})}})})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(h,k){var g,d={};g=function(e){var b;if(1==e.nodeType){var a=e.ownerDocument.defaultView;b=a.getComputedStyle(e,null);if(!b&&e.style)e.style.display="",b=a.getComputedStyle(e,null)}return b||{}};d.getComputedStyle=g;var c;c=function(e,b){return parseFloat(b)||
0};d.toPixelValue=c;var m={left:!0,top:!0},j=/margin|padding|width|height|max|min|offset/,l={cssFloat:"cssFloat",styleFloat:"cssFloat","float":"cssFloat"};d.get=function(e,b){var a=k.byId(e),f=arguments.length;if(2==f&&"opacity"==b)return g(a).opacity;var b=l[b]||b,i=d.getComputedStyle(a);1==f?a=i:(i=i[b]||a.style[b],f=b.toLowerCase(),f in m||(m[f]=j.test(f)),a=m[f]?c(a,i):i);return a};d.set=function(e,b,a){var f=k.byId(e),i=arguments.length,c="opacity"==b,b=l[b]||b;if(3==i)return c?f.style.opacity=
a:f.style[b]=a;for(var n in b)d.set(e,n,b[n]);return d.getComputedStyle(f)};return d})},"dojo/dom-geometry":function(){define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(h,k,g,d){function c(b,a,f,i,e,c){c=c||"px";b=b.style;if(!isNaN(a))b.left=a+c;if(!isNaN(f))b.top=f+c;if(0<=i)b.width=i+c;if(0<=e)b.height=e+c}function m(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function j(b){return"border-box"==
l.boxModel||"table"==b.tagName.toLowerCase()||m(b)}var l={boxModel:"content-box",getPadExtents:function(b,a){var b=g.byId(b),f=a||d.getComputedStyle(b),i=d.toPixelValue,e=i(b,f.paddingLeft),c=i(b,f.paddingTop),j=i(b,f.paddingRight),f=i(b,f.paddingBottom);return{l:e,t:c,r:j,b:f,w:e+j,h:c+f}},getBorderExtents:function(b,a){var b=g.byId(b),f=d.toPixelValue,i=a||d.getComputedStyle(b),e="none"!=i.borderLeftStyle?f(b,i.borderLeftWidth):0,c="none"!=i.borderTopStyle?f(b,i.borderTopWidth):0,j="none"!=i.borderRightStyle?
f(b,i.borderRightWidth):0,f="none"!=i.borderBottomStyle?f(b,i.borderBottomWidth):0;return{l:e,t:c,r:j,b:f,w:e+j,h:c+f}},getPadBorderExtents:function(b,a){var b=g.byId(b),f=a||d.getComputedStyle(b),i=l.getPadExtents(b,f),f=l.getBorderExtents(b,f);return{l:i.l+f.l,t:i.t+f.t,r:i.r+f.r,b:i.b+f.b,w:i.w+f.w,h:i.h+f.h}},getMarginExtents:function(b,a){var b=g.byId(b),f=a||d.getComputedStyle(b),i=d.toPixelValue,e=i(b,f.marginLeft),c=i(b,f.marginTop),j=i(b,f.marginRight),f=i(b,f.marginBottom);return{l:e,t:c,
r:j,b:f,w:e+j,h:c+f}},getMarginBox:function(b,a){var b=g.byId(b),f=a||d.getComputedStyle(b),f=l.getMarginExtents(b,f),i=b.offsetLeft-f.l,e=b.offsetTop-f.t,c=b.parentNode,j=d.toPixelValue;h("opera")&&c&&(c=d.getComputedStyle(c),i-="none"!=c.borderLeftStyle?j(b,c.borderLeftWidth):0,e-="none"!=c.borderTopStyle?j(b,c.borderTopWidth):0);return{l:i,t:e,w:b.offsetWidth+f.w,h:b.offsetHeight+f.h}},getContentBox:function(b,a){var b=g.byId(b),f=a||d.getComputedStyle(b),i=b.clientWidth,e=l.getPadExtents(b,f),
c=l.getBorderExtents(b,f);i?(f=b.clientHeight,c.w=c.h=0):(i=b.offsetWidth,f=b.offsetHeight);h("opera")&&(e.l+=c.l,e.t+=c.t);return{l:e.l,t:e.t,w:i-e.w-c.w,h:f-e.h-c.h}},setContentSize:function(b,a,f){var b=g.byId(b),i=a.w,a=a.h;j(b)&&(f=l.getPadBorderExtents(b,f),0<=i&&(i+=f.w),0<=a&&(a+=f.h));c(b,NaN,NaN,i,a)}},e={l:0,t:0,w:0,h:0};l.setMarginBox=function(b,a,f){var b=g.byId(b),i=f||d.getComputedStyle(b),f=a.w,o=a.h,n=j(b)?e:l.getPadBorderExtents(b,i),i=l.getMarginExtents(b,i);if(m(b)){var h=b.style;
if(0<=f&&!h.width)h.width="4px";if(0<=o&&!h.height)h.height="4px"}0<=f&&(f=Math.max(f-n.w-i.w,0));0<=o&&(o=Math.max(o-n.h-i.h,0));c(b,a.l,a.t,f,o)};l.isBodyLtr=function(b){b=b||k.doc;return"ltr"==(k.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};l.docScroll=function(b){var b=b||k.doc,a=k.doc.parentWindow||k.doc.defaultView;return"pageXOffset"in a?{x:a.pageXOffset,y:a.pageYOffset}:(a=b.documentElement)&&{x:l.fixIeBiDiScrollLeft(a.scrollLeft||0,b),y:a.scrollTop||0}};l.fixIeBiDiScrollLeft=
function(b){return b};l.position=function(b,a){b=g.byId(b);k.body(b.ownerDocument);var f=b.getBoundingClientRect(),f={x:f.left,y:f.top,w:f.right-f.left,h:f.bottom-f.top};if(a){var i=l.docScroll(b.ownerDocument);f.x+=i.x;f.y+=i.y}return f};l.getMarginSize=function(b,a){var b=g.byId(b),f=l.getMarginExtents(b,a||d.getComputedStyle(b)),i=b.getBoundingClientRect();return{w:i.right-i.left+f.w,h:i.bottom-i.top+f.h}};l.normalizeEvent=function(b){if(!("layerX"in b))b.layerX=b.offsetX,b.layerY=b.offsetY};return l})},
"dojo/Stateful":function(){define("dojo/Stateful",["./_base/declare","./_base/lang","./_base/array","dojo/when"],function(h,k,g,d){return h("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(c){var d=this._attrPairNames;return d[c]?d[c]:d[c]={s:"_"+c+"Setter",g:"_"+c+"Getter"}},postscript:function(c){c&&this.set(c)},_get:function(c,d){return"function"===typeof this[d.g]?this[d.g]():this[c]},get:function(c){return this._get(c,this._getAttrNames(c))},set:function(c,g){if("object"===typeof c){for(var j in c)c.hasOwnProperty(j)&&
"_watchCallbacks"!=j&&this.set(j,c[j]);return this}j=this._getAttrNames(c);var h=this._get(c,j);j=this[j.s];var e;"function"===typeof j?e=j.apply(this,Array.prototype.slice.call(arguments,1)):this[c]=g;if(this._watchCallbacks){var b=this;d(e,function(){b._watchCallbacks(c,h,g)})}return this},_changeAttrValue:function(c,d){var g=this.get(c);this[c]=d;this._watchCallbacks&&this._watchCallbacks(c,g,d);return this},watch:function(c,d){var j=this._watchCallbacks;if(!j)var h=this,j=this._watchCallbacks=
function(a,b,i,e){var c=function(e){if(e)for(var e=e.slice(),c=0,d=e.length;c<d;c++)e[c].call(h,a,b,i)};c(j["_"+a]);e||c(j["*"])};!d&&"function"===typeof c?(d=c,c="*"):c="_"+c;var e=j[c];"object"!==typeof e&&(e=j[c]=[]);e.push(d);var b={};b.unwatch=b.remove=function(){var a=g.indexOf(e,d);-1<a&&e.splice(a,1)};return b}})})},"dojo/dom-prop":function(){define("dojo/dom-prop","exports,./_base/kernel,./sniff,./_base/lang,./dom,./dom-style,./dom-construct,./_base/connect".split(","),function(h,k,g,d,c,
m,j,l){var e={},b=0,a=k._scopeName+"attrid";h.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};h.get=function(a,b){var a=c.byId(a),e=b.toLowerCase();return a[h.names[e]||b]};h.set=function(f,i,g){f=c.byId(f);if(2==arguments.length&&"string"!=typeof i){for(var j in i)h.set(f,j,i[j]);return f}j=i.toLowerCase();j=h.names[j]||i;if("style"==j&&"string"!=typeof g)return m.set(f,g),f;if("innerHTML"==
j)return f[j]=g,f;if(d.isFunction(g)){var k=f[a];k||(k=b++,f[a]=k);e[k]||(e[k]={});var p=e[k][j];if(p)l.disconnect(p);else try{delete f[j]}catch(t){}g?e[k][j]=l.connect(f,j,g):f[j]=null;return f}f[j]=g;return f}})},"walta/XmlDocument":function(){define("walta/XmlDocument",["dojo/_base/declare","dojo/_base/lang","dojo/request/xhr"],function(h,k,g){return h(null,{namespaceMap:null,url:null,_xml:null,_xmlNSResolver:null,constructor:function(d){h.safeMixin(this,d)},load:function(){this._xmlNSResolver=
k.hitch(this,function(d){return this.namespaceMap[d]||null});return g(this.url,{handleAs:"xml"}).then(k.hitch(this,function(d){this._xml=d}))},getString:function(d,c){return this._xml.evaluate(c,null===d?this._xml.documentElement:d,this._xmlNSResolver,XPathResult.STRING_TYPE,null).stringValue},getNumber:function(d,c){return this._xml.evaluate(c,null===d?this._xml.documentElement:d,this._xmlNSResolver,XPathResult.NUMBER_TYPE,null).numberValue},getStringArray:function(d,c){for(var g=this._xml.evaluate(c,
null===d?this._xml.documentElement:d,this._xmlNSResolver,XPathResult.ANY_TYPE,null),j=[],h;h=g.iterateNext();)j.push(h.value);return j},getNode:function(d,c){return this._xml.evaluate(c,null===d?this._xml.documentElement:d,this._xmlNSResolver,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}})})},"walta/TaxonView":function(){define("walta/TaxonView","dojo/_base/declare,dojo/aspect,dojo/_base/lang,dojo/dom-construct,dojox/mobile/View,dojox/mobile/Button,walta/AnchorBar,walta/MediaView".split(","),
function(h,k,g,d,c,m,j,l){return h("walta.TaxonView",[c],{taxon:null,"class":"waltaTaxon waltaFullscreen",onBack:function(){},buildRendering:function(){this.inherited(arguments);this.addChild(new j({title:"ALT Key"}));d.create("h5",{innerHTML:this.taxon.name},this.containerNode);d.create("h5",{innerHTML:"("+this.taxon.commonName+")"},this.containerNode);var e=d.create("div",{"class":"waltaPanel"},this.containerNode);this._buildNamedField(e,"Size","Up to "+this.taxon.size+"mm.");this._buildNamedField(e,
"Habitat",this.taxon.habitat);this._buildNamedField(e,"Movement",this.taxon.movement);this._buildNamedField(e,"Confused with",this.taxon.confusedWith);this._buildNamedField(e,"SIGNAL score",this.taxon.signalScore);this.taxon.mediaUrls[0]&&this.addChild(new l({mediaUrls:this.taxon.mediaUrls}));this._buildButton("Go back and try again","waltaGoBack",g.hitch(this,function(){this.onBack()}));this._buildButton("Photo gallery","waltaGallery",g.hitch(this,function(){this.onBack()}))},_buildNamedField:function(e,
b,a){""!=a&&(e=d.create("p",{},e),d.create("strong",{innerHTML:b+":"},e),d.create("span",{innerHTML:a},e))},_buildButton:function(e,b,a){e=new m({label:e,"class":"waltaActionIcon "+b,duration:500});k.after(e,"onClick",a);this.addChild(e)}})})},"dojo/dom-attr":function(){define("dojo/dom-attr","exports,./sniff,./_base/lang,./dom,./dom-style,./dom-prop".split(","),function(h,k,g,d,c,m){function j(b,a){var f=b.getAttributeNode&&b.getAttributeNode(a);return f&&f.specified}var l={innerHTML:1,className:1,
htmlFor:void 0,value:1},e={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};h.has=function(b,a){var f=a.toLowerCase();return l[m.names[f]||a]||j(d.byId(b),e[f]||a)};h.get=function(b,a){var b=d.byId(b),f=a.toLowerCase(),i=m.names[f]||a,c=b[i];if(l[i]&&"undefined"!=typeof c||"href"!=i&&("boolean"==typeof c||g.isFunction(c)))return c;f=e[f]||a;return j(b,f)?b.getAttribute(f):null};h.set=function(b,a,f){b=d.byId(b);if(2==arguments.length){for(var i in a)h.set(b,i,a[i]);return b}i=
a.toLowerCase();var j=m.names[i]||a,n=l[j];if("style"==j&&"string"!=typeof f)return c.set(b,f),b;if(n||"boolean"==typeof f||g.isFunction(f))return m.set(b,a,f);b.setAttribute(e[i]||a,f);return b};h.remove=function(b,a){d.byId(b).removeAttribute(e[a.toLowerCase()]||a)};h.getNodeProp=function(b,a){var b=d.byId(b),f=a.toLowerCase(),i=m.names[f]||a;if(i in b&&"href"!=i)return b[i];f=e[f]||a;return j(b,f)?b.getAttribute(f):null}})},"dojo/dom-construct":function(){define("dojo/dom-construct","exports,./_base/kernel,./sniff,./_base/window,./dom,./dom-attr,./on".split(","),
function(h,k,g,d,c,m){function j(a,b){var f=b.parentNode;f&&f.insertBefore(a,b)}var l={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},e=/<\s*([\w\:]+)/,b={},a=0,f="__"+k._scopeName+"ToDomId",i;for(i in l)if(l.hasOwnProperty(i))k=l[i],k.pre="option"==i?'<select multiple="multiple">':"<"+k.join("><")+">",k.post="</"+
k.reverse().join("></")+">";h.toDom=function(i,c){var c=c||d.doc,j=c[f];j||(c[f]=j=++a+"",b[j]=c.createElement("div"));var i=i+"",g=i.match(e),h=g?g[1].toLowerCase():"",j=b[j];if(g&&l[h]){g=l[h];j.innerHTML=g.pre+i+g.post;for(g=g.length;g;--g)j=j.firstChild}else j.innerHTML=i;if(1==j.childNodes.length)return j.removeChild(j.firstChild);for(h=c.createDocumentFragment();g=j.firstChild;)h.appendChild(g);return h};h.place=function(a,b,f){b=c.byId(b);"string"==typeof a&&(a=/^\s*</.test(a)?h.toDom(a,b.ownerDocument):
c.byId(a));if("number"==typeof f){var i=b.childNodes;!i.length||i.length<=f?b.appendChild(a):j(a,i[0>f?0:f])}else switch(f){case "before":j(a,b);break;case "after":f=a;(i=b.parentNode)&&(i.lastChild==b?i.appendChild(f):i.insertBefore(f,b.nextSibling));break;case "replace":b.parentNode.replaceChild(a,b);break;case "only":h.empty(b);b.appendChild(a);break;case "first":if(b.firstChild){j(a,b.firstChild);break}default:b.appendChild(a)}return a};h.create=function(a,b,f,i){var e=d.doc;if(f)f=c.byId(f),
e=f.ownerDocument;"string"==typeof a&&(a=e.createElement(a));b&&m.set(a,b);f&&h.place(a,f,i);return a};h.empty=function(a){c.byId(a).innerHTML=""};h.destroy=function(a){if(a=c.byId(a)){var b=a,a=a.parentNode;if(b.firstChild)b.innerHTML="";a&&a.removeChild(b)}}})},"dojox/mobile/parser":function(){define("dojox/mobile/parser","dojo/_base/kernel,dojo/_base/array,dojo/_base/config,dojo/_base/lang,dojo/_base/window,dojo/ready".split(","),function(h,k,g,d,c,m){var j=d.getObject("dojox.mobile",!0),l=new function(){var e=
{},b=function(a,i){if("string"===typeof i){var c=a+":"+i.replace(/ /g,"");return e[c]||(e[c]=b(a).createSubclass(k.map(i.split(/, */),b)))}return e[a]||(e[a]=d.getObject(a)||require(a))},a=function(a){return eval(a)};this.instantiate=function(f,i,e){var i=i||{},e=e||{},c,j=[];if(f){for(c=0;c<f.length;c++){var g=f[c],h=b(g._type,g.getAttribute("data-dojo-mixins")),k=h.prototype,l={},m,r,A;d.mixin(l,a.call(e.propsThis,"({"+(g.getAttribute("data-dojo-props")||"")+"})"));d.mixin(l,e.defaults);d.mixin(l,
i);for(m in k)if(r=(r=g.getAttributeNode(m))&&r.nodeValue,A=typeof k[m],r||!("boolean"!==A||""!==r))d.isArray(k[m])?l[m]=r.split(/\s*,\s*/):"string"===A?l[m]=r:"number"===A?l[m]=r-0:"boolean"===A?l[m]="false"!==r:"object"===A?l[m]=eval("("+r+")"):"function"===A&&(l[m]=d.getObject(r,!1)||new Function(r),g.removeAttribute(m));l["class"]=g.className;if(!l.style)l.style=g.style.cssText;if(r=g.getAttribute("data-dojo-attach-point"))l.dojoAttachPoint=r;if(r=g.getAttribute("data-dojo-attach-event"))l.dojoAttachEvent=
r;h=new h(l,g);j.push(h);(g=g.getAttribute("jsId")||g.getAttribute("data-dojo-id"))&&d.setObject(g,h)}for(c=0;c<j.length;c++)f=j[c],!e.noStart&&f.startup&&!f._started&&f.startup()}return j};this.parse=function(a,i){if(a){if(!i&&a.rootNode)i=a,a=a.rootNode}else a=c.body();var e=a.getElementsByTagName("*"),d,g,j=[];for(d=0;d<e.length;d++){var h=e[d];if(g=h._type=h.getAttribute("dojoType")||h.getAttribute("data-dojo-type"))if(h._skip)h._skip="";else{if(b(g).prototype.stopParser&&(!i||!i.template)){var l=
h.getElementsByTagName("*");for(g=0;g<l.length;g++)l[g]._skip="1"}j.push(h)}}return this.instantiate(j,i&&i.template?{template:!0}:null,i)}};g.parseOnLoad&&m(100,function(){try{require("dojo/parser")||l.parse()}catch(e){l.parse()}});j.parser=l;h.parser=h.parser||l;return l})},"walta/KeyNode":function(){define("walta/KeyNode",["dojo/_base/declare","walta/Question"],function(h,k){var g=h(null,{questions:[],back:null,constructor:function(d,c,h){this.questions=[new k(g,d,c,c.getNode(h,"tax:question[@num=1]")),
new k(g,d,c,c.getNode(h,"tax:question[@num=2]"))];this.back=function(){var j=c.getNode(h,"../..");return"keyNode"==j.tagName?new g(d,c,j):null}}});return g})},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(h,k,g,d){return h("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(c){if(this.disabled)return g.stop(c),!1;var h=!1===this.onClick(c);if(!h&&"submit"==this.type&&!(this.valueNode||
this.focusNode).form)for(var j=this.domNode;j.parentNode;j=j.parentNode){var l=d.byNode(j);if(l&&"function"==typeof l._onSubmit){l._onSubmit(c);h=!0;break}}h&&c.preventDefault();return!h},postCreate:function(){this.inherited(arguments);k.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(c){this._set("label",c);(this.containerNode||this.focusNode).innerHTML=c}})})},"walta/KeyNodeView":function(){define("walta/KeyNodeView","dojo/_base/declare,dojo/_base/lang,dojo/aspect,dojo/dom-construct,dojox/mobile/View,dojox/mobile/Button,dojox/mobile/Container,walta/QuestionView,walta/AnchorBar".split(","),
function(h,k,g,d,c,m,j,l,e){return h("walta.KeyNodeView",[c],{keyNode:null,"class":"waltaFullscreen waltaKey",onChoose:function(){},onBack:function(){},_createAndBindQuestion:function(b,a){var f=new l({question:this.keyNode.questions[b]});g.after(f,"onClick",k.hitch(this,function(){this.onChoose(b)}));a.addChild(f)},buildRendering:function(){this.inherited(arguments);this.addChild(new e({title:"ALT Key"}));d.create("h4",{innerHTML:"Choose the best match"},this.containerNode);for(var b=new j({"class":"waltaQuestionContainer"}),
a=0;a<this.keyNode.questions.length;a++)this._createAndBindQuestion(a,b);this.addChild(b);b=new m({label:"No match? Go back","class":"waltaBackButton",duration:500});g.after(b,"onClick",k.hitch(this,function(){this.onBack()}));this.addChild(b)}})})},"dojo/keys":function(){define("dojo/keys",["./_base/kernel","./sniff"],function(h,k){return h.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:91,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,
UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,
LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:k("mac")?k("safari")?91:224:17}})},"dijit/registry":function(){define("dijit/registry",["dojo/_base/array","dojo/sniff","dojo/_base/unload","dojo/_base/window","./main"],function(h,k,g,d,c){var m={},j={},l={length:0,add:function(e){if(j[e.id])throw Error("Tried to register widget with id=="+e.id+" but that id is already registered");j[e.id]=e;this.length++},remove:function(e){j[e]&&(delete j[e],this.length--)},byId:function(e){return"string"==typeof e?j[e]:e},
byNode:function(e){return j[e.getAttribute("widgetId")]},toArray:function(){var e=[],b;for(b in j)e.push(j[b]);return e},getUniqueId:function(e){var b;do b=e+"_"+(e in m?++m[e]:m[e]=0);while(j[b]);return"dijit"==c._scopeName?b:c._scopeName+"_"+b},findWidgets:function(e,b){function a(i){for(i=i.firstChild;i;i=i.nextSibling)if(1==i.nodeType){var e=i.getAttribute("widgetId");e?(e=j[e])&&f.push(e):i!==b&&a(i)}}var f=[];a(e);return f},_destroyAll:function(){c._curFocus=null;c._prevFocus=null;c._activeStack=
[];h.forEach(l.findWidgets(d.body()),function(e){e._destroyed||(e.destroyRecursive?e.destroyRecursive():e.destroy&&e.destroy())})},getEnclosingWidget:function(e){for(;e;){var b=1==e.nodeType&&e.getAttribute("widgetId");if(b)return j[b];e=e.parentNode}return null},_hash:j};return c.registry=l})},"dojox/mobile/Pane":function(){define("dojox/mobile/Pane",["dojo/_base/array","dojo/_base/declare","dijit/_Contained","dijit/_WidgetBase"],function(h,k,g,d){return k("dojox.mobile.Pane",[d,g],{baseClass:"mblPane",
buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},resize:function(){h.forEach(this.getChildren(),function(c){c.resize&&c.resize()})}})})},"dojox/mobile/common":function(){define("dojox/mobile/common","dojo/_base/array,dojo/_base/config,dojo/_base/connect,dojo/_base/lang,dojo/_base/window,dojo/dom-class,dojo/dom-construct,dojo/ready,dijit/registry,./sniff,./uacss".split(","),function(h,k,g,d,c,m,j,l,e,b){var a=d.getObject("dojox.mobile",!0);
a.getScreenSize=function(){return{h:c.global.innerHeight||c.doc.documentElement.clientHeight,w:c.global.innerWidth||c.doc.documentElement.clientWidth}};a.updateOrient=function(){var b=a.getScreenSize();m.replace(c.doc.documentElement,b.h>b.w?"dj_portrait":"dj_landscape",b.h>b.w?"dj_landscape":"dj_portrait")};a.updateOrient();a.tabletSize=500;a.detectScreenSize=function(b){var f=a.getScreenSize(),e=Math.min(f.w,f.h),d,j;if(e>=a.tabletSize&&(b||!this._sz||this._sz<a.tabletSize))d="phone",j="tablet";
else if(e<a.tabletSize&&(b||!this._sz||this._sz>=a.tabletSize))d="tablet",j="phone";j&&(m.replace(c.doc.documentElement,"dj_"+j,"dj_"+d),g.publish("/dojox/mobile/screenSize/"+j,[f]));this._sz=e};a.detectScreenSize();a.hideAddressBarWait="number"===typeof k.mblHideAddressBarWait?k.mblHideAddressBarWait:1500;a.hide_1=function(){scrollTo(0,1);a._hidingTimer=0==a._hidingTimer?200:2*a._hidingTimer;setTimeout(function(){a.isAddressBarHidden()||a._hidingTimer>a.hideAddressBarWait?(a.resizeAll(),a._hiding=
!1):setTimeout(a.hide_1,a._hidingTimer)},50)};a.hideAddressBar=function(){if(!a.disableHideAddressBar&&!a._hiding){a._hiding=!0;a._hidingTimer=b("iphone")?200:0;var f=screen.availHeight;if(b("android")){f=outerHeight/devicePixelRatio;if(0==f)a._hiding=!1,setTimeout(function(){a.hideAddressBar()},200);f<=innerHeight&&(f=outerHeight);if(3>b("android"))c.doc.documentElement.style.overflow=c.body().style.overflow="visible"}if(c.body().offsetHeight<f)c.body().style.minHeight=f+"px",a._resetMinHeight=!0;
setTimeout(a.hide_1,a._hidingTimer)}};a.isAddressBarHidden=function(){return 1===pageYOffset};a.resizeAll=function(b,f){if(!a.disableResizeAll){g.publish("/dojox/mobile/resizeAll",[b,f]);g.publish("/dojox/mobile/beforeResizeAll",[b,f]);if(a._resetMinHeight)c.body().style.minHeight=a.getScreenSize().h+"px";a.updateOrient();a.detectScreenSize();var d=function(a){var b=a.getParent&&a.getParent();return!(b&&b.resize||!a.resize)},j=function(a){h.forEach(a.getChildren(),function(a){d(a)&&a.resize();j(a)})};
f?(f.resize&&f.resize(),j(f)):h.forEach(h.filter(e.toArray(),d),function(a){a.resize()});g.publish("/dojox/mobile/afterResizeAll",[b,f])}};a.openWindow=function(a,b){c.global.open(a,b||"_blank")};!1!==k.mblApplyPageStyles&&m.add(c.doc.documentElement,"mobile");b("chrome")&&m.add(c.doc.documentElement,"dj_chrome");if(c.global._no_dojo_dm){var d=c.global._no_dojo_dm,f;for(f in d)a[f]=d[f];a.deviceTheme.setDm(a)}b.add("mblAndroidWorkaround",!1!==k.mblAndroidWorkaround&&3>b("android"),void 0,!0);b.add("mblAndroid3Workaround",
!1!==k.mblAndroid3Workaround&&3<=b("android"),void 0,!0);l(function(){a.detectScreenSize(!0);!1!==k.mblAndroidWorkaroundButtonStyle&&b("android")&&j.create("style",{innerHTML:"BUTTON,INPUT[type='button'],INPUT[type='submit'],INPUT[type='reset'],INPUT[type='file']::-webkit-file-upload-button{-webkit-appearance:none;}"},c.doc.head,"first");b("mblAndroidWorkaround")&&j.create("style",{innerHTML:".mblView.mblAndroidWorkaround{position:absolute;top:-9999px !important;left:-9999px !important;}"},c.doc.head,
"last");var f=a.resizeAll;if(!1!==k.mblHideAddressBar&&-1!=navigator.appVersion.indexOf("Mobile")||!0===k.mblForceHideAddressBar)if(a.hideAddressBar(),!0===k.mblAlwaysHideAddressBar)f=a.hideAddressBar;var e=6<=b("iphone");if((b("android")||e)&&void 0!==c.global.onorientationchange){var d=f,f=function(){var a=g.connect(null,"onresize",null,function(b){g.disconnect(a);d(b)})},h=a.getScreenSize(),l=e?20:100,m=null,q=null;e&&(g.connect(null,"onkeyup",null,function(){m=(new Date).getTime()}),q=function(a){if(a&&
1!==a.nodeType)a=a.parentNode;if(!a||1!==a.nodeType)return!1;a=a.tagName;return"SELECT"===a||"INPUT"===a||"TEXTAREA"===a||"BUTTON"===a});g.connect(null,"onresize",null,function(b){var f=a.getScreenSize();if(f.w==h.w&&Math.abs(f.h-h.h)>=l&&(!e||!(m&&400>(new Date).getTime()-m||q(c.doc.activeElement))))e&&1<pageYOffset?a.resizeAll():d(b);h=f})}g.connect(null,void 0!==c.global.onorientationchange?"onorientationchange":"onresize",null,f);c.body().style.visibility="visible"});return a})},"dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",
"dojo/_base/array,dojo/_base/declare,dojo/dom-attr,dojo/dom-style,dojo/_base/lang,dojo/mouse,dojo/sniff,dojo/window,../a11y".split(","),function(h,k,g,d,c,m,j,l){return k("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(e){this._set("disabled",e);g.set(this.focusNode,"disabled",e);this.valueNode&&g.set(this.valueNode,
"disabled",e);this.focusNode.setAttribute("aria-disabled",e?"true":"false");e?(this._set("hovering",!1),this._set("active",!1),e="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",h.forEach(c.isArray(e)?e:[e],function(b){this[b].setAttribute("tabIndex","-1")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(e){if("mouse"==e&&this.isFocusable())var b=this.connect(this.focusNode,"onfocus",function(){this.disconnect(a);
this.disconnect(b)}),a=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(a);this.disconnect(b);this.focused&&this.focus()});this.scrollOnFocus&&this.defer(function(){l.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=d.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(e,b){return"number"==typeof e&&"number"==
typeof b?isNaN(e)&&isNaN(b)?0:e-b:e>b?1:e<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(e,b){if(void 0==this._lastValueReported&&(null===b||!this._onChangeActive))this._resetValue=this._lastValueReported=e;this._pendingOnChange=this._pendingOnChange||typeof e!=typeof this._lastValueReported||0!=this.compare(e,this._lastValueReported);if((this.intermediateChanges||b||void 0===b)&&this._pendingOnChange)if(this._lastValueReported=e,this._pendingOnChange=!1,this._onChangeActive)this._onChangeHandle&&
this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(e)})},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dojo/window":function(){define("dojo/window","./_base/lang,./sniff,./_base/window,./dom,./dom-geometry,./dom-style".split(","),function(h,k,g,d,c,m){var j={getBox:function(d){var d=
d||g.doc,e="BackCompat"==d.compatMode?g.body(d):d.documentElement,b=c.docScroll(d),d=j.get(d);return{l:b.x,t:b.y,w:d.innerWidth||e.clientWidth,h:d.innerHeight||e.clientHeight}},get:function(c){return c.parentWindow||c.defaultView},scrollIntoView:function(j,e){try{var j=d.byId(j),b=j.ownerDocument||g.doc,a=g.body(b),f=b.documentElement||a.parentNode;if((j==a||j==f)&&"undefined"!=typeof j.scrollIntoView)j.scrollIntoView(!1);else{var i="BackCompat"==b.compatMode?a:f,h=i.clientWidth,k=i.clientHeight,
s=!c.isBodyLtr(b),p=e||c.position(j),t=j.parentNode;if("fixed"!=m.get(j,"position").toLowerCase())for(;t;){t==a&&(t=a);var q=c.position(t),u="fixed"==m.get(t,"position").toLowerCase();if(t==a)q.w=h,q.h=k,q.x=0,q.y=0;else{var w=c.getPadBorderExtents(t);q.w-=w.w;q.h-=w.h;q.x+=w.l;q.y+=w.t;var r=t.clientWidth,A=q.w-r;if(0<r&&0<A)q.w=r,q.x+=s&&t.clientLeft>w.l?A:0;r=t.clientHeight;A=q.h-r;if(0<r&&0<A)q.h=r}if(u){if(0>q.y)q.h+=q.y,q.y=0;if(0>q.x)q.w+=q.x,q.x=0;if(q.y+q.h>k)q.h=k-q.y;if(q.x+q.w>h)q.w=h-
q.x}var C=p.x-q.x,I=p.y-Math.max(q.y,0),M=C+p.w-q.w,N=I+p.h-q.h;if(0<M*C){var O=Math[0>C?"max":"min"](C,M);p.x+=t.scrollLeft;t.scrollLeft+=O;p.x-=t.scrollLeft}0<N*I&&(p.y+=t.scrollTop,t.scrollTop+=Math[0>I?"max":"min"](I,N),p.y-=t.scrollTop);t=t!=a&&!u&&t.parentNode}}}catch(P){console.error("scrollIntoView: "+P),j.scrollIntoView(!1)}}};h.setObject("dojo.window",j);return j})},"dojo/mouse":function(){define("dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(h,k,g,d,c){function m(c,
g){var e=function(b,a){return k(b,c,function(f){if(g)return g(f,a);if(!d.isDescendant(f.relatedTarget,b))return a.call(this,f)})};e.bubble=function(b){return m(c,function(a,f){var e=b(a.target),c=a.relatedTarget;if(e&&e!=(c&&1==c.nodeType&&b(c)))return f.call(e,a)})};return e}g.add("events-mousewheel",c.doc&&"onmousewheel"in c.doc);c={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(c,d){return c.button==d},isLeft:function(c){return 0==c.button},isMiddle:function(c){return 1==c.button},isRight:function(c){return 2==
c.button}};h.mouseButtons=c;h=g("events-mousewheel")?"mousewheel":function(c,d){return k(c,"DOMMouseScroll",function(e){e.wheelDelta=-e.detail;d.call(this,e)})};return{_eventHandler:m,enter:m("mouseover"),leave:m("mouseout"),wheel:h,isLeft:c.isLeft,isMiddle:c.isMiddle,isRight:c.isRight}})},"dojo/topic":function(){define("dojo/topic",["./Evented"],function(h){var k=new h;return{publish:function(g,d){return k.emit.apply(k,arguments)},subscribe:function(g,d){return k.on.apply(k,arguments)}}})},"dojo/_base/unload":function(){define("dojo/_base/unload",
["./kernel","./lang","../on"],function(h,k,g){var d=window,c={addOnWindowUnload:function(c,j){if(!h.windowUnloaded)g(d,"unload",h.windowUnloaded=function(){});g(d,"unload",k.hitch(c,j))},addOnUnload:function(c,j){g(d,"beforeunload",k.hitch(c,j))}};h.addOnWindowUnload=c.addOnWindowUnload;h.addOnUnload=c.addOnUnload;return c})},"dojox/mobile/ContentPane":function(){define("dojox/mobile/ContentPane",["dojo/_base/declare","./Container","./_ContentPaneMixin"],function(h,k,g){return h("dojox.mobile.ContentPane",
[k,g],{baseClass:"mblContentPane"})})},"walta/AppController":function(){define("walta/AppController","dojo/_base/declare,dojo/_base/lang,dojo/dom-construct,dojo/aspect,dojo/topic,walta/Key,walta/KeyNode,walta/Taxon,walta/KeyNodeView,walta/TaxonView,walta/HomeView,walta/SpeedBug,walta/SpeedBugView".split(","),function(h,k,g,d,c,m,j,l,e,b,a,f,i){return h(null,{keyUrl:"",divNode:null,_key:null,_speedBug:null,_currentView:null,_views:{},_decisionCounter:0,_decisionViews:[],constructor:function(a){h.safeMixin(this,
a);this._key=new m({url:this.keyUrl})},_startAltKey:function(){this._doTransition(this._createDecisionView(),1)},_questionChosen:function(a){this._key.choose(a);this._doTransition(this._createDecisionView(),1)},_goBack:function(){this._key.back()?this._doTransition(this._createDecisionView(),-1):this._doTransition(this._views.home,-1)},_doTransition:function(a,b){this._currentView.performTransition(a.get("id"),b,"slide");this._currentView=a},_createDecisionView:function(){var a=null,f=g.create("div",
{id:"waltaDecisionView"+this._decisionCounter++},this.divNode);this._key.currentDecision instanceof j?(a=new e({keyNode:this._key.currentDecision},f),d.after(a,"onChoose",k.hitch(this,this._questionChosen),!0),d.after(a,"onBack",k.hitch(this,this._goBack),!0)):this._key.currentDecision instanceof l&&(a=new b({taxon:this._key.currentDecision},f),d.after(a,"onBack",k.hitch(this,this._goBack),!0));a.startup();this._decisionViews.unshift(a);2<this._decisionViews.length&&(this._decisionViews.pop().destroyRecursive(),
this._decisionCounter%=3);return a},_createHomeView:function(){var b=new a({selected:!0},g.create("div",{id:"waltaHomeView"},this.divNode));this._views.home=b;b.startup();this._currentView=b},_createSpeedBug:function(){this._speedBug=new f(this._key.url,this._key._xml);var a=new i({speedBug:this._speedBug},g.create("div",{id:"waltaSpeedBug"},this.divNode));this._views.speedBug=a;a.startup()},startApp:function(){this._key.load().then(k.hitch(this,this._createHomeView)).then(k.hitch(this,this._createSpeedBug));
c.subscribe("anchorbar/home",k.hitch(this,function(){this._doTransition(this._views.home,-1)}));c.subscribe("key/jump",k.hitch(this,function(a){this._key.lookupNode(a);this._doTransition(this._createDecisionView(),1)}));c.subscribe("key/start",k.hitch(this,function(){this._key.reset();this._startAltKey()}));c.subscribe("speedbug/open",k.hitch(this,function(){this._doTransition(this._views.speedBug,1)}))}})})},"dojox/mobile/SwapView":function(){define("dojox/mobile/SwapView","dojo/_base/array,dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-class,dijit/registry,./View,./_ScrollableMixin,./sniff".split(","),
function(h,k,g,d,c,m,j,l){return g("dojox.mobile.SwapView",[j,l],{scrollDir:"f",weight:1.2,buildRendering:function(){this.inherited(arguments);c.add(this.domNode,"mblSwapView");this.setSelectable(this.domNode,!1);this.containerNode=this.domNode;this.subscribe("/dojox/mobile/nextPage","handleNextPage");this.subscribe("/dojox/mobile/prevPage","handlePrevPage");this.noResize=!0},startup:function(){this._started||this.inherited(arguments)},resize:function(){this.inherited(arguments);h.forEach(this.getChildren(),
function(e){e.resize&&e.resize()})},onTouchStart:function(e){var b=this.domNode.offsetTop,a=this.nextView(this.domNode);if(a)a.stopAnimation(),c.add(a.domNode,"mblIn"),a.containerNode.style.paddingTop=b+"px";if(a=this.previousView(this.domNode))a.stopAnimation(),c.add(a.domNode,"mblIn"),a.containerNode.style.paddingTop=b+"px";this.inherited(arguments)},handleNextPage:function(e){this.domNode.parentNode!==(e.refId&&d.byId(e.refId)||e.domNode).parentNode||this.getShowingView()!==this||this.goTo(1)},
handlePrevPage:function(e){this.domNode.parentNode!==(e.refId&&d.byId(e.refId)||e.domNode).parentNode||this.getShowingView()!==this||this.goTo(-1)},goTo:function(e,b){var a=b?m.byId(b):1==e?this.nextView(this.domNode):this.previousView(this.domNode);if(a&&a!==this)this.stopAnimation(),a.stopAnimation(),this.domNode._isShowing=!1,a.domNode._isShowing=!0,this.performTransition(a.id,e,"slide",null,function(){k.publish("/dojox/mobile/viewChanged",[a])})},isSwapView:function(e){return e&&1===e.nodeType&&
c.contains(e,"mblSwapView")},nextView:function(e){for(e=e.nextSibling;e;e=e.nextSibling)if(this.isSwapView(e))return m.byNode(e);return null},previousView:function(e){for(e=e.previousSibling;e;e=e.previousSibling)if(this.isSwapView(e))return m.byNode(e);return null},scrollTo:function(e){if(!this._beingFlipped){var b,a;0>e.x?(b=this.nextView(this.domNode),a=e.x+this.domNode.offsetWidth):(b=this.previousView(this.domNode),a=e.x-this.domNode.offsetWidth);if(b){if("none"===b.domNode.style.display)b.domNode.style.display=
"",b.resize();b._beingFlipped=!0;b.scrollTo({x:a});b._beingFlipped=!1}}this.inherited(arguments)},findDisp:function(e){if(!c.contains(e,"mblSwapView"))return this.inherited(arguments);if(!e.parentNode)return null;for(var b=e.parentNode.childNodes,a=0;a<b.length;a++){var f=b[a];if(1===f.nodeType&&c.contains(f,"mblSwapView")&&!c.contains(f,"mblIn")&&"none"!==f.style.display)return f}return e},slideTo:function(e,b,a,f){if(!this._beingFlipped){var c=this.domNode.offsetWidth,d=f||this.getPos(),g,j;if(0>
d.x)if(g=this.nextView(this.domNode),d.x<-c/4){if(g)e.x=-c,j=0}else g&&(j=c);else if(g=this.previousView(this.domNode),d.x>c/4){if(g)e.x=c,j=0}else g&&(j=-c);if(g)g._beingFlipped=!0,g.slideTo({x:j},b,a),g._beingFlipped=!1,g.domNode._isShowing=g&&0===j;this.domNode._isShowing=!(g&&0===j)}this.inherited(arguments)},onAnimationEnd:function(e){(!e||!e.target||!c.contains(e.target,"mblScrollableScrollTo2"))&&this.inherited(arguments)},onFlickAnimationEnd:function(e){if(!e||!e.target||c.contains(e.target,
"mblScrollableScrollTo2"))if(this.inherited(arguments),this.domNode._isShowing)h.forEach(this.domNode.parentNode.childNodes,function(b){if(this.isSwapView(b)&&(c.remove(b,"mblIn"),!b._isShowing))b.style.display="none",b.style.webkitTransform="",b.style.left="0px"},this),k.publish("/dojox/mobile/viewChanged",[this]),this.containerNode.style.paddingTop=""}})})},"walta/MediaView":function(){define("walta/MediaView","dojo/_base/declare,dojo/_base/array,dojo/on,dojo/aspect,dojo/dom-construct,dojo/_base/lang,dojox/mobile/ContentPane,dojox/mobile/SwapView,dojox/mobile/Carousel".split(","),
function(h,k,g,d,c,m,j,l,e){return h("walta.MediaView",[j],{mediaUrls:[],"class":"waltaImageContainer",_carousel:null,buildRendering:function(){this.inherited(arguments);if(this.mediaUrls[0]){var b=c.create("div",{"class":"waltaImageInner"},this.containerNode);c.create("img",{src:this.mediaUrls[0]},b);c.create("div",{"class":"waltaZoom"},b);g(b,"click",m.hitch(this,function(a){this._openCarousel();a.stopPropagation()}))}},_openCarousel:function(){if(!this._carousel){this._carousel=new e({navButton:!1,
numVisible:1,"class":"waltaCarousel"});k.forEach(this.mediaUrls,m.hitch(this,function(a){this._carousel.addChild(this._buildImageView(a))}));var b=c.create("div",{"class":"waltaCloseButton"},this._carousel.containerNode);g(b,"click",m.hitch(this,function(a){this._carousel.destroyRecursive();this._carousel=null;a.stopPropagation()}));g(this._carousel.domNode,"click",function(a){a.stopPropagation()});this.addChild(this._carousel);this._carousel.startup()}},_buildImageView:function(b){var a=new l({"class":"waltaZoomedImage"});
c.create("img",{src:b},a.containerNode);return a}})})},"dojox/mobile/uacss":function(){define("dojox/mobile/uacss",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/window","./sniff"],function(h,k,g,d){g=g.doc.documentElement;g.className=k.trim(g.className+" "+[d("bb")?"dj_bb":"",d("android")?"dj_android":"",d("iphone")?"dj_iphone":"",d("ipod")?"dj_ipod":"",d("ipad")?"dj_ipad":""].join(" ").replace(/ +/g," "));return h})},"dojox/mobile/ProgressIndicator":function(){define("dojox/mobile/ProgressIndicator",
"dojo/_base/config,dojo/_base/declare,dojo/_base/lang,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dojo/has,dijit/_Contained,dijit/_WidgetBase".split(","),function(h,k,g,d,c,m,j,l,e,b){var a=k("dojox.mobile.ProgressIndicator",[b,e],{interval:100,size:40,removeOnStop:!0,startSpinning:!1,center:!0,colors:null,baseClass:"mblProgressIndicator",constructor:function(){this.colors=[];this._bars=[]},buildRendering:function(){this.inherited(arguments);this.center&&d.add(this.domNode,
"mblProgressIndicatorCenter");this.containerNode=c.create("div",{className:"mblProgContainer"},this.domNode);this.spinnerNode=c.create("div",null,this.containerNode);for(var a=0;12>a;a++)this._bars.push(c.create("div",{className:"mblProg mblProg"+a},this.spinnerNode));this.scale(this.size);this.startSpinning&&this.start()},scale:function(a){var b=a/40;j.set(this.containerNode,{webkitTransform:"scale("+b+")",webkitTransformOrigin:"0 0"});m.setMarginBox(this.domNode,{w:a,h:a});m.setMarginBox(this.containerNode,
{w:a/b,h:a/b})},start:function(){if(this.imageNode){var a=this.imageNode,b=Math.round((this.containerNode.offsetWidth-a.offsetWidth)/2),e=Math.round((this.containerNode.offsetHeight-a.offsetHeight)/2);a.style.margin=e+"px "+b+"px"}else{var c=0,g=this;this.timer=setInterval(function(){c--;c=0>c?11:c;for(var a=g.colors,b=0;12>b;b++){var f=(c+b)%12;a[f]?g._bars[b].style.backgroundColor=a[f]:d.replace(g._bars[b],"mblProg"+f+"Color","mblProg"+(11===f?0:f+1)+"Color")}},this.interval)}},stop:function(){this.timer&&
clearInterval(this.timer);this.timer=null;this.removeOnStop&&this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)},setImage:function(a){if(a)this.imageNode=c.create("img",{src:a},this.containerNode),this.spinnerNode.style.display="none";else{if(this.imageNode)this.containerNode.removeChild(this.imageNode),this.imageNode=null;this.spinnerNode.style.display=""}},destroy:function(){this.inherited(arguments);if(this===a._instance)a._instance=null}});a._instance=null;
a.getInstance=function(b){if(!a._instance)a._instance=new a(b);return a._instance};return a})},"dojox/mobile/CarouselItem":function(){define("dojox/mobile/CarouselItem","dojo/_base/declare,dojo/dom-construct,dojo/dom-geometry,dojo/dom-style,dijit/_Contained,dijit/_WidgetBase".split(","),function(h,k,g,d,c,m){return h("dojox.mobile.CarouselItem",[m,c],{alt:"",src:"",headerText:"",footerText:"",baseClass:"mblCarouselItem",buildRendering:function(){this.inherited(arguments);this.domNode.tabIndex="0";
this.headerTextNode=k.create("div",{className:"mblCarouselItemHeaderText"},this.domNode);this.imageNode=k.create("img",{className:"mblCarouselItemImage"},this.domNode);this.footerTextNode=k.create("div",{className:"mblCarouselItemFooterText"},this.domNode)},startup:function(){this._started||(this.inherited(arguments),this.resize())},resize:function(){var c=g.getMarginBox(this.domNode);if(0!==c.h){var d=g.getMarginBox(this.headerTextNode).h,e=g.getMarginBox(this.footerTextNode).h;g.setMarginBox(this.imageNode,
{h:c.h-d-e})}},select:function(){var c=this.imageNode;d.set(c,"opacity",0.4);setTimeout(function(){d.set(c,"opacity",1)},1E3)},_setAltAttr:function(c){this._set("alt",c);this.imageNode.alt=c},_setSrcAttr:function(c){this._set("src",c);this.imageNode.src=c},_setHeaderTextAttr:function(c){this._set("headerText",c);this.headerTextNode.innerHTML=this._cv?this._cv(c):c},_setFooterTextAttr:function(c){this._set("footerText",c);this.footerTextNode.innerHTML=this._cv?this._cv(c):c}})})},"dojo/selector/lite":function(){define("dojo/selector/lite",
["../has","../_base/kernel"],function(h,k){var g=document.createElement("div"),d=g.matchesSelector||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector,c=g.querySelectorAll,m=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g,j=function(e,b){var a=b?b.ownerDocument||b:k.doc||document,f=(c?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(e),b=b||a;if(f){if(f[2]){var i=k.byId?k.byId(f[2]):a.getElementById(f[2]);
if(!i||f[1]&&f[1]!=i.tagName.toLowerCase())return[];if(b!=a)for(a=i;a!=b;)if(a=a.parentNode,!a)return[];return f[3]?j(f[3],i):[i]}if(f[3]&&b.getElementsByClassName)return b.getElementsByClassName(f[4]);if(f[5])if(i=b.getElementsByTagName(f[5]),f[4]||f[6])e=(f[4]||"")+f[6];else return i}if(c)return 1===b.nodeType&&"object"!==b.nodeName.toLowerCase()?l(b,e,b.querySelectorAll):b.querySelectorAll(e);i||(i=b.getElementsByTagName("*"));for(var f=[],a=0,d=i.length;a<d;a++){var g=i[a];1==g.nodeType&&(void 0)(g,
e,b)&&f.push(g)}return f},l=function(c,b,a){var f=c,i=c.getAttribute("id"),d=i||"__dojo__",g=c.parentNode,j=/^\s*[+~]/.test(b);if(j&&!g)return[];i?d=d.replace(/'/g,"\\$&"):c.setAttribute("id",d);if(j&&g)c=c.parentNode;b=b.match(m);for(g=0;g<b.length;g++)b[g]="[id='"+d+"'] "+b[g];b=b.join(",");try{return a.call(c,b)}finally{i||f.removeAttribute("id")}};j.match=d?function(c,b,a){return a&&9!=a.nodeType?l(a,b,function(a){return d.call(c,a)}):d.call(c,b)}:void 0;return j})},"walta/HomeView":function(){define("walta/HomeView",
"dojo/_base/declare,dojo/on,dojo/topic,dojo/dom-construct,dojo/_base/lang,dojox/mobile/View".split(","),function(h,k,g,d,c,m){return h("walta.HomeView",[m],{"class":"waltaHomeView waltaFullscreen",buildRendering:function(){this.inherited(arguments);var c=d.create("div",{"class":"waltaPanel waltaHeader"},this.domNode);d.create("div",{"class":"waltaLogo"},c);d.create("h1",{innerHTML:"WALTA"},c);d.create("h3",{innerHTML:"Waterbug ALT App"},c);var h=this.domNode,c=d.create("div",{"class":"waltaPanel waltaMenu"},
h);d.create("div",{"class":"waltaMenuIcon waltaSpeedbugLogo"},c);d.create("h2",{innerHTML:"Speedbug"},c);d.create("p",{innerHTML:"Look at silhouettes of bugs to choose the best match."},c);var e=d.create("div",{"class":"waltaPanel waltaMenu"},h);d.create("div",{"class":"waltaMenuIcon waltaAltKeyLogo"},e);d.create("h2",{innerHTML:"ALT key"},e);d.create("p",{innerHTML:"Questions to help identify your waterbug."},e);var b=d.create("div",{"class":"waltaPanel waltaMenu"},h);d.create("div",{"class":"waltaMenuIcon waltaBrowseLogo"},
b);d.create("h2",{innerHTML:"Browse list"},b);d.create("p",{innerHTML:"If you know the name or scientific name of your bug."},b);var a=d.create("div",{"class":"waltaPanel waltaMenu waltaSecondary"},h);d.create("h2",{innerHTML:"Help"},a);d.create("p",{innerHTML:"Info to get you started."},a);var f=d.create("div",{"class":"waltaPanel waltaMenu waltaSecondary"},h);d.create("h2",{innerHTML:"Gallery"},f);d.create("p",{innerHTML:"Browse photos & videos."},f);h=d.create("div",{"class":"waltaPanel waltaMenu waltaSecondary"},
h);d.create("h2",{innerHTML:"About"},h);d.create("p",{innerHTML:"About the app."},h);k(h,"click",function(){g.publish("about/open")});k(a,"click",function(){g.publish("help/open")});k(b,"click",function(){g.publish("browse/open")});k(e,"click",function(){g.publish("key/start")});k(c,"click",function(){g.publish("speedbug/open")})}})})},"dojox/mobile/Container":function(){define("dojox/mobile/Container",["dojo/_base/declare","dijit/_Container","./Pane"],function(h,k,g){return h("dojox.mobile.Container",
[g,k],{baseClass:"mblContainer"})})},"dojox/mobile/StoreCarousel":function(){define("dojox/mobile/StoreCarousel",["dojo/_base/declare","./Carousel","./_StoreMixin"],function(h,k,g){return h("dojox.mobile.StoreCarousel",[k,g],{})})},"walta/Key":function(){define("walta/Key","dojo/_base/declare,dojo/request/xhr,dojo/_base/lang,walta/XmlDocument,walta/KeyNode,walta/Taxon".split(","),function(h,k,g,d,c,m){return h(null,{url:null,name:null,currentDecision:null,_xml:null,_startNode:null,load:function(){this._xml=
new d({url:this.url+"/key.xml",namespaceMap:{tax:"http://thewaterbug.net/taxonomy"}});return this._xml.load().then(g.hitch(this,function(){this.name=this._xml.getString(null,"/tax:key/@name");this._startNode=this.currentDecision=new c(this.url,this._xml,this._xml.getNode(null,"/tax:key/tax:keyNode"))}))},choose:function(c){return this.currentDecision=this.currentDecision.questions[c].outcome()},back:function(){var c=this.currentDecision.back();if(null!=c)this.currentDecision=c;return c},reset:function(){this.currentDecision=
this._startNode},lookupNode:function(d){var d=this._xml.getNode(null,"/tax:key//tax:taxon[@id='"+d+"'] | /tax:key//tax:keyNode[@id='"+d+"']"),g=null;if("taxon"===d.tagName)g=this._xml.getNode(d,".."),g=new m(c,this.url,this._xml,g,d);else if("keyNode"===d.tagName)g=new c(this.url,this._xml,d);else throw"Error: not a taxon or keyNode element!";return this.currentDecision=g},constructor:function(c){h.safeMixin(this,c)}})})},"walta/Taxon":function(){define("walta/Taxon",["dojo/_base/declare","dojo/_base/array",
"dojo/_base/lang","walta/KeyNode"],function(h,k,g){return h(null,{id:null,name:"",commonName:"",size:0,signalScore:0,habitat:"",movement:"",confusedWith:"",mediaUrls:[],back:null,_buildBackFunction:function(d,c,g,h){return function(){return new d(c,g,h)}},constructor:function(d,c,h,j,l){this.id=h.getString(l,"@id");this.name=h.getString(l,"@name");this.commonName=h.getString(l,"@commonName");this.size=h.getNumber(l,"@size");this.signalScore=h.getNumber(l,"@signalScore");this.habitat=h.getString(l,
"tax:habitat");this.movement=h.getString(l,"tax:movement");this.confusedWith=h.getString(l,"tax:confusedWith");this.mediaUrls=[];k.forEach(h.getStringArray(l,"child::tax:mediaRef/@url"),g.hitch(this,function(e){this.mediaUrls.push(c+"/media/"+e)}));this.back=this._buildBackFunction(d,c,h,j)}})})},"dojox/mobile/_ContentPaneMixin":function(){define("dojox/mobile/_ContentPaneMixin","dojo/_base/declare,dojo/_base/Deferred,dojo/_base/lang,dojo/_base/window,dojo/_base/xhr,./_ExecScriptMixin,./ProgressIndicator,./lazyLoadUtils".split(","),
function(h,k,g,d,c,m,j,l){return h("dojox.mobile._ContentPaneMixin",m,{href:"",lazy:!1,content:"",parseOnLoad:!0,prog:!0,executeScripts:!0,constructor:function(){if(this.prog)this._p=j.getInstance()},loadHandler:function(c){this.set("content",c)},errorHandler:function(){this._p&&this._p.stop()},load:function(){this.lazy=!1;this.set("href",this.href)},onLoad:function(){return!0},_setHrefAttr:function(e){if(this.lazy||!e||e===this._loaded)return this.lazy=!1,null;var b=this._p;b&&(d.body().appendChild(b.domNode),
b.start());this._set("href",e);this._loaded=e;return c.get({url:e,handleAs:"text",load:g.hitch(this,"loadHandler"),error:g.hitch(this,"errorHandler")})},_setContentAttr:function(c){this.destroyDescendants();"object"===typeof c?this.containerNode.appendChild(c):(this.executeScripts&&(c=this.execScript(c)),this.containerNode.innerHTML=c);if(this.parseOnLoad){var b=this;return k.when(l.instantiateLazyWidgets(b.containerNode),function(){b._p&&b._p.stop();return b.onLoad()})}this._p&&this._p.stop();return this.onLoad()}})})},
"dojox/mobile/_StoreMixin":function(){define("dojox/mobile/_StoreMixin",["dojo/_base/Deferred","dojo/_base/declare"],function(h,k){return k("dojox.mobile._StoreMixin",null,{store:null,query:null,queryOptions:null,labelProperty:"label",childrenProperty:"children",setStore:function(g,d,c){if(g===this.store)return null;if(g)g.getValue=function(c,d){return c[d]};this.store=g;this._setQuery(d,c);return this.refresh()},setQuery:function(g,d){this._setQuery(g,d);return this.refresh()},_setQuery:function(g,
d){this.query=g;this.queryOptions=d||this.queryOptions},refresh:function(){if(!this.store)return null;var g=this,d=this.store.query(this.query,this.queryOptions);h.when(d,function(c){if(c.items)c=c.items;d.observe&&d.observe(function(c,d,h){if(-1<d)g.onDelete(c,d);else if(-1<h)g.onUpdate(c,h)});g.onComplete(c)},function(c){g.onError(c)});return d}})})},"walta/SpeedBug":function(){define("walta/SpeedBug",["dojo/_base/declare","dojo/_base/array"],function(h,k){return h(null,{bugsList:[],_baseUri:"",
_parseSpeedBugGroup:function(g){var d={groupRef:g.getAttribute("ref")};d.bugs=k.map(this._removeTextNodes(g.childNodes),this._parseSpeedBugLinkOrGroup,this);return d},_parseSpeedBugLink:function(g){return{image:this._baseUri+"/media/"+g.getAttribute("image"),ref:g.getAttribute("ref")}},_parseSpeedBugLinkOrGroup:function(g){if("speedBugGroup"===g.tagName)return this._parseSpeedBugGroup(g);if("speedBugLink"===g.tagName)return this._parseSpeedBugLink(g);throw"Expecting element speedBugGroup or speedBugLink";
},_removeTextNodes:function(g){return k.filter(g,function(d){return d.tagName})},constructor:function(g,d){this._baseUri=g;var c=d.getNode(null,"tax:speedBugIndex");if(c)this.bugsList=k.map(this._removeTextNodes(c.childNodes),this._parseSpeedBugLinkOrGroup,this);else throw"Unable to find tax:speedBugIndex in taxonomy description!";}})})},"walta/QuestionView":function(){define("walta/QuestionView","dojo/_base/declare,dojo/on,dojo/dom-construct,dojo/_base/lang,dojox/mobile/Container,walta/MediaView".split(","),
function(h,k,g,d,c,m){return h("walta.QuestionView",[c],{question:null,onClick:function(){},"class":"waltaQuestion",buildRendering:function(){this.inherited(arguments);g.create("p",{innerHTML:this.question.text},this.containerNode);this.question.mediaUrls[0]&&this.addChild(new m({mediaUrls:this.question.mediaUrls}));k(this.containerNode,"click",d.hitch(this,function(){this.onClick()}))}})})},"walta/Question":function(){define("walta/Question",["dojo/_base/declare","dojo/_base/array","dojo/_base/lang",
"walta/Taxon"],function(h,k,g,d){return h(null,{text:null,mediaUrls:[],outcome:null,constructor:function(c,d,h,l){this.text=h.getString(l,"tax:text");this.mediaUrls=[];k.forEach(h.getStringArray(l,"child::tax:mediaRef/@url"),g.hitch(this,function(c){this.mediaUrls.push(d+"/media/"+c)}));this.outcome=this._buildOutcomeFunction(c,d,h,l,h.getNumber(l,"@num"))},_buildOutcomeFunction:function(c,g,h,k,e){return function(){var b=h.getNode(k,"../tax:outcome[@for="+e+"]/*");if("taxonLink"===b.tagName){var b=
h.getString(b,"@ref"),b=h.getNode(null,"/tax:key//tax:taxon[@id='"+b+"']"),a=h.getNode(k,"..");return new d(c,g,h,a,b)}if("keyNode"===b.tagName)return new c(g,h,b);if("keyNodeLink"===b.tagName)return b=h.getString(b,"@ref"),b=h.getNode(null,"/tax:key//tax:keyNode[@id='"+b+"']"),new c(g,h,b)}}})})},"dojo/store/util/QueryResults":function(){define("dojo/store/util/QueryResults",["../../_base/array","../../_base/lang","../../_base/Deferred"],function(h,k,g){var d=function(c){function m(j){c[j]||(c[j]=
function(){var k=arguments;return g.when(c,function(c){Array.prototype.unshift.call(k,c);return d(h[j].apply(h,k))})})}if(!c)return c;c.then&&(c=k.delegate(c));m("forEach");m("filter");m("map");if(!c.total)c.total=g.when(c,function(c){return c.length});return c};k.setObject("dojo.store.util.QueryResults",d);return d})},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(h,k){return h("dijit._Contained",null,{_getSibling:function(g){var d=this.domNode;
do d=d[g+"Sibling"];while(d&&1!=d.nodeType);return d&&k.byNode(d)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")},getIndexInParent:function(){var g=this.getParent();return!g||!g.getIndexOfChild?-1:g.getIndexOfChild(this)}})})},"dojox/mobile/scrollable":function(){define("dojox/mobile/scrollable","dojo/_base/kernel,dojo/_base/connect,dojo/_base/event,dojo/_base/lang,dojo/_base/window,dojo/dom-class,dojo/dom-construct,dojo/dom-style,./sniff".split(","),
function(h,k,g,d,c,m,j,l,e){var b=d.getObject("dojox.mobile",!0);e.add("translate3d",function(){var a=c.doc.createElement("div");a.style.webkitTransform="translate3d(0px,1px,0px)";c.doc.documentElement.appendChild(a);var b=c.doc.defaultView.getComputedStyle(a,"")["-webkit-transform"],b=b&&0===b.indexOf("matrix");c.doc.documentElement.removeChild(a);return b});h=function(){};d.extend(h,{fixedHeaderHeight:0,fixedFooterHeight:0,isLocalFooter:!1,scrollBar:!0,scrollDir:"v",weight:0.6,fadeScrollBar:!0,
disableFlashScrollBar:!1,threshold:4,constraint:!0,touchNode:null,propagatable:!0,dirLock:!1,height:"",scrollType:0,init:function(a){if(a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=("domNode"==b||"containerNode"==b)&&"string"==typeof a[b]?c.doc.getElementById(a[b]):a[b]);this.touchNode=this.touchNode||this.containerNode;this._v=-1!=this.scrollDir.indexOf("v");this._h=-1!=this.scrollDir.indexOf("h");this._f="f"==this.scrollDir;this._ch=[];this._ch.push(k.connect(this.touchNode,"ontouchstart",this,
"onTouchStart"));this._useTopLeft=this.scrollType?2===this.scrollType:3>e("android");if(!this._useTopLeft)this._useTransformTransition=this.scrollType?3===this.scrollType:6<=e("iphone");if(this._useTopLeft)this._ch.push(k.connect(this.domNode,"webkitTransitionEnd",this,"onFlickAnimationEnd")),this._ch.push(k.connect(this.domNode,"webkitTransitionStart",this,"onFlickAnimationStart"));else{if(this._useTransformTransition)this._ch.push(k.connect(this.domNode,"webkitTransitionEnd",this,"onFlickAnimationEnd")),
this._ch.push(k.connect(this.domNode,"webkitTransitionStart",this,"onFlickAnimationStart"));else{this._ch.push(k.connect(this.domNode,"webkitAnimationEnd",this,"onFlickAnimationEnd"));this._ch.push(k.connect(this.domNode,"webkitAnimationStart",this,"onFlickAnimationStart"));for(a=0;3>a;a++)this.setKeyframes(null,null,a)}e("translate3d")&&l.set(this.containerNode,"webkitTransform","translate3d(0,0,0)")}this._speed={x:0,y:0};this._appFooterHeight=0;this.isTopLevel()&&!this.noResize&&this.resize();var i=
this;setTimeout(function(){i.flashScrollBar()},600)},isTopLevel:function(){return!0},cleanup:function(){if(this._ch){for(var a=0;a<this._ch.length;a++)k.disconnect(this._ch[a]);this._ch=null}},findDisp:function(a){if(!a.parentNode)return null;if(1===a.nodeType&&m.contains(a,"mblSwapView")&&"none"!==a.style.display)return a;for(var b=a.parentNode.childNodes,c=0;c<b.length;c++){var e=b[c];if(1===e.nodeType&&m.contains(e,"mblView")&&"none"!==e.style.display)return e}return a},getScreenSize:function(){return{h:c.global.innerHeight||
c.doc.documentElement.clientHeight||c.doc.documentElement.offsetHeight,w:c.global.innerWidth||c.doc.documentElement.clientWidth||c.doc.documentElement.offsetWidth}},resize:function(){this._appFooterHeight=this.fixedFooterHeight&&!this.isLocalFooter?this.fixedFooterHeight:0;if(this.isLocalHeader)this.containerNode.style.marginTop=this.fixedHeaderHeight+"px";for(var a=0,b=this.domNode;b&&"BODY"!=b.tagName;b=b.offsetParent){b=this.findDisp(b);if(!b)break;a+=b.offsetTop}var c,b=this.getScreenSize().h,
a=b-a-this._appFooterHeight;if("inherit"===this.height)this.domNode.offsetParent&&(c=this.domNode.offsetParent.offsetHeight+"px");else if("auto"===this.height){if(c=this.domNode.offsetParent){this.domNode.style.height="0px";c=c.getBoundingClientRect();var a=this.domNode.getBoundingClientRect(),e=c.bottom-this._appFooterHeight,a=a.bottom>=e?b-(a.top-c.top)-this._appFooterHeight:e-a.bottom}b=Math.max(this.domNode.scrollHeight,this.containerNode.scrollHeight);c=(b?Math.min(b,a):a)+"px"}else if(this.height)c=
this.height;c||(c=a+"px");if("-"!==c.charAt(0)&&"default"!==c)this.domNode.style.height=c;this.onTouchEnd()},onFlickAnimationStart:function(a){g.stop(a)},onFlickAnimationEnd:function(a){var b=a&&a.animationName;if(b&&-1===b.indexOf("scrollableViewScroll2"))if(-1!==b.indexOf("scrollableViewScroll0"))this._scrollBarNodeV&&m.remove(this._scrollBarNodeV,"mblScrollableScrollTo0");else if(-1!==b.indexOf("scrollableViewScroll1"))this._scrollBarNodeH&&m.remove(this._scrollBarNodeH,"mblScrollableScrollTo1");
else{if(this._scrollBarNodeV)this._scrollBarNodeV.className="";if(this._scrollBarNodeH)this._scrollBarNodeH.className=""}else{if(this._useTransformTransition||this._useTopLeft)if(b=a.target,b===this._scrollBarV||b===this._scrollBarH){a="mblScrollableScrollTo"+(b===this._scrollBarV?"0":"1");m.contains(b,a)?m.remove(b,a):b.className="";return}a&&a.srcElement&&g.stop(a);this.stopAnimation();if(this._bounce){var c=this,e=c._bounce;setTimeout(function(){c.slideTo(e,0.3,"ease-out")},0);c._bounce=void 0}else this.hideScrollBar(),
this.removeCover()}},isFormElement:function(a){if(a&&1!==a.nodeType)a=a.parentNode;if(!a||1!==a.nodeType)return!1;a=a.tagName;return"SELECT"===a||"INPUT"===a||"TEXTAREA"===a||"BUTTON"===a},onTouchStart:function(a){if(!(this.disableTouchScroll||this._conn&&500>(new Date).getTime()-this.startTime)){if(!this._conn)this._conn=[],this._conn.push(k.connect(c.doc,"ontouchmove",this,"onTouchMove")),this._conn.push(k.connect(c.doc,"ontouchend",this,"onTouchEnd"));this._aborted=!1;if(m.contains(this.containerNode,
"mblScrollableScrollTo2"))this.abort();else{if(this._scrollBarNodeV)this._scrollBarNodeV.className="";if(this._scrollBarNodeH)this._scrollBarNodeH.className=""}this.touchStartX=a.touches?a.touches[0].pageX:a.clientX;this.touchStartY=a.touches?a.touches[0].pageY:a.clientY;this.startTime=(new Date).getTime();this.startPos=this.getPos();this._dim=this.getDim();this._time=[0];this._posX=[this.touchStartX];this._posY=[this.touchStartY];this._locked=!1;this.isFormElement(a.target)||(this.propagatable?a.preventDefault():
g.stop(a))}},onTouchMove:function(a){if(!this._locked){var b=a.touches?a.touches[0].pageX:a.clientX,a=a.touches?a.touches[0].pageY:a.clientY,c=b-this.touchStartX,e=a-this.touchStartY,d={x:this.startPos.x+c,y:this.startPos.y+e},g=this._dim,c=Math.abs(c),e=Math.abs(e);if(1==this._time.length){if(this.dirLock&&(this._v&&!this._h&&c>=this.threshold&&c>=e||(this._h||this._f)&&!this._v&&e>=this.threshold&&e>=c)){this._locked=!0;return}if(this._v&&this._h){if(e<this.threshold&&c<this.threshold)return}else if(this._v&&
e<this.threshold||(this._h||this._f)&&c<this.threshold)return;this.addCover();this.showScrollBar()}c=this.weight;if(this._v&&this.constraint)if(0<d.y)d.y=Math.round(d.y*c);else if(d.y<-g.o.h)d.y=g.c.h<g.d.h?Math.round(d.y*c):-g.o.h-Math.round((-g.o.h-d.y)*c);if((this._h||this._f)&&this.constraint)if(0<d.x)d.x=Math.round(d.x*c);else if(d.x<-g.o.w)d.x=g.c.w<g.d.w?Math.round(d.x*c):-g.o.w-Math.round((-g.o.w-d.x)*c);this.scrollTo(d);d=this._time.length;if(2<=d){var h,j;this._v&&!this._h?(h=this._posY[d-
1]-this._posY[d-2],j=a-this._posY[d-1]):!this._v&&this._h&&(h=this._posX[d-1]-this._posX[d-2],j=b-this._posX[d-1]);if(0>h*j)this._time=[this._time[d-1]],this._posX=[this._posX[d-1]],this._posY=[this._posY[d-1]],d=1}10==d&&(this._time.shift(),this._posX.shift(),this._posY.shift());this._time.push((new Date).getTime()-this.startTime);this._posX.push(b);this._posY.push(a)}},onTouchEnd:function(a){if(!this._locked){var b=this._speed={x:0,y:0},d=this._dim,g=this.getPos(),h={};if(a){if(!this._conn)return;
for(b=0;b<this._conn.length;b++)k.disconnect(this._conn[b]);this._conn=null;var b=this._time.length,j=!1;this._aborted||(1>=b?j=!0:2==b&&4>Math.abs(this._posY[1]-this._posY[0])&&(j=!0));if(j){this.hideScrollBar();this.removeCover();if(!this.isFormElement(a.target)&&!(4.1<=e("android"))){var l=a.target;if(1!=l.nodeType)l=l.parentNode;var m=c.doc.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,c.global,1,a.screenX,a.screenY,a.clientX,a.clientY);setTimeout(function(){l.dispatchEvent(m)},0)}return}b=
this._speed=this.getSpeed()}else{if(0==g.x&&0==g.y)return;d=this.getDim()}if(this._v)h.y=g.y+b.y;if(this._h||this._f)h.x=g.x+b.x;if(!1!==this.adjustDestination(h,g,d))if("v"==this.scrollDir&&d.c.h<d.d.h)this.slideTo({y:0},0.3,"ease-out");else if("h"==this.scrollDir&&d.c.w<d.d.w)this.slideTo({x:0},0.3,"ease-out");else if(this._v&&this._h&&d.c.h<d.d.h&&d.c.w<d.d.w)this.slideTo({x:0,y:0},0.3,"ease-out");else{var q,j="ease-out",u={};if(this._v&&this.constraint)if(0<h.y)0<g.y?(q=0.3,h.y=0):(h.y=Math.min(h.y,
20),j="linear",u.y=0);else if(-b.y>d.o.h- -g.y)g.y<-d.o.h?(q=0.3,h.y=d.c.h<=d.d.h?0:-d.o.h):(h.y=Math.max(h.y,-d.o.h-20),j="linear",u.y=-d.o.h);if((this._h||this._f)&&this.constraint)if(0<h.x)0<g.x?(q=0.3,h.x=0):(h.x=Math.min(h.x,20),j="linear",u.x=0);else if(-b.x>d.o.w- -g.x)g.x<-d.o.w?(q=0.3,h.x=d.c.w<=d.d.w?0:-d.o.w):(h.x=Math.max(h.x,-d.o.w-20),j="linear",u.x=-d.o.w);this._bounce=void 0!==u.x||void 0!==u.y?u:void 0;if(void 0===q){var w,r;if(this._v&&this._h)r=Math.sqrt(b.x*b.x+b.y*b.y),w=Math.sqrt(Math.pow(h.y-
g.y,2)+Math.pow(h.x-g.x,2));else if(this._v)r=b.y,w=h.y-g.y;else if(this._h)r=b.x,w=h.x-g.x;if(0===w&&!a)return;q=0!==r?Math.abs(w/r):0.01}this.slideTo(h,q,j)}}},adjustDestination:function(){return!0},abort:function(){this.scrollTo(this.getPos());this.stopAnimation();this._aborted=!0},stopAnimation:function(){m.remove(this.containerNode,"mblScrollableScrollTo2");if(this._scrollBarV)this._scrollBarV.className="";if(this._scrollBarH)this._scrollBarH.className="";if(this._useTransformTransition||this._useTopLeft){this.containerNode.style.webkitTransition=
"";if(this._scrollBarV)this._scrollBarV.style.webkitTransition="";if(this._scrollBarH)this._scrollBarH.style.webkitTransition=""}},scrollIntoView:function(a,b,c){if(this._v){for(var e=this.containerNode,d=this.getDim().d.h,g=0,h=a;h!==e;h=h.offsetParent){if(!h||"BODY"===h.tagName)return;g+=h.offsetTop}a=b?Math.max(d-e.offsetHeight,-g):Math.min(0,d-g-a.offsetHeight);c&&"number"===typeof c?this.slideTo({y:a},c,"ease-out"):this.scrollTo({y:a})}},getSpeed:function(){var a=0,b=0,c=this._time.length;if(2<=
c&&500>(new Date).getTime()-this.startTime-this._time[c-1])var a=this._posX[c-(3<c?2:1)]-this._posX[0<=c-6?c-6:0],e=this._time[c-(3<c?2:1)]-this._time[0<=c-6?c-6:0],b=this.calcSpeed(this._posY[c-(3<c?2:1)]-this._posY[0<=c-6?c-6:0],e),a=this.calcSpeed(a,e);return{x:a,y:b}},calcSpeed:function(a,b){return 4*Math.round(100*(a/b))},scrollTo:function(a,b,c){c=(c||this.containerNode).style;if(this._useTopLeft){c.webkitTransition="";if(this._v)c.top=a.y+"px";if(this._h||this._f)c.left=a.x+"px"}else{if(this._useTransformTransition)c.webkitTransition=
"";c.webkitTransform=this.makeTranslateStr(a)}b||this.scrollScrollBarTo(this.calcScrollBarPos(a))},slideTo:function(a,b,c){this._runSlideAnimation(this.getPos(),a,b,c,this.containerNode,2);this.slideScrollBarTo(a,b,c)},makeTranslateStr:function(a){var b=this._v&&"number"==typeof a.y?a.y+"px":"0px",a=(this._h||this._f)&&"number"==typeof a.x?a.x+"px":"0px";return e("translate3d")?"translate3d("+a+","+b+",0px)":"translate("+a+","+b+")"},getPos:function(){var a=c.doc.defaultView.getComputedStyle(this.containerNode,
"");if(this._useTopLeft)return{x:parseInt(a.left)||0,y:parseInt(a.top)||0};return(a=a["-webkit-transform"])&&0===a.indexOf("matrix")?(a=a.split(/[,\s\)]+/),{y:a[5]-0,x:a[4]-0}):{x:0,y:0}},getDim:function(){var a={};a.c={h:this.containerNode.offsetHeight,w:this.containerNode.offsetWidth};a.v={h:this.domNode.offsetHeight+this._appFooterHeight,w:this.domNode.offsetWidth};a.d={h:a.v.h-this.fixedHeaderHeight-this.fixedFooterHeight,w:a.v.w};a.o={h:a.c.h-a.v.h+this.fixedHeaderHeight+this.fixedFooterHeight,
w:a.c.w-a.v.w};return a},showScrollBar:function(){if(this.scrollBar){var a=this._dim;if(!("v"==this.scrollDir&&a.c.h<=a.d.h||"h"==this.scrollDir&&a.c.w<=a.d.w))if(!this._v||!this._h||!(a.c.h<=a.d.h&&a.c.w<=a.d.w)){a=function(a,b){var c=a["_scrollBarNode"+b];if(!c){var c=j.create("div",null,a.domNode),e={position:"absolute",overflow:"hidden"};"V"==b?(e.right="2px",e.width="5px"):(e.bottom=(a.isLocalFooter?a.fixedFooterHeight:0)+2+"px",e.height="5px");l.set(c,e);c.className="mblScrollBarWrapper";a["_scrollBarWrapper"+
b]=c;c=j.create("div",null,c);l.set(c,{opacity:0.6,position:"absolute",backgroundColor:"#606060",fontSize:"1px",webkitBorderRadius:"2px",MozBorderRadius:"2px",webkitTransformOrigin:"0 0",zIndex:2147483647});l.set(c,"V"==b?{width:"5px"}:{height:"5px"});a["_scrollBarNode"+b]=c}return c};if(this._v&&!this._scrollBarV)this._scrollBarV=a(this,"V");if(this._h&&!this._scrollBarH)this._scrollBarH=a(this,"H");this.resetScrollBar()}}},hideScrollBar:function(){if(this.fadeScrollBar&&!b._fadeRule){var a=j.create("style",
null,c.doc.getElementsByTagName("head")[0]);a.textContent=".mblScrollableFadeScrollBar{  -webkit-animation-duration: 1s;  -webkit-animation-name: scrollableViewFadeScrollBar;}@-webkit-keyframes scrollableViewFadeScrollBar{  from { opacity: 0.6; }  to { opacity: 0; }}";b._fadeRule=a.sheet.cssRules[1]}if(this.scrollBar){a=function(a,b){l.set(a,{opacity:0,webkitAnimationDuration:""});if(!b._useTopLeft||!e("android"))a.className="mblScrollableFadeScrollBar"};if(this._scrollBarV)a(this._scrollBarV,this),
this._scrollBarV=null;if(this._scrollBarH)a(this._scrollBarH,this),this._scrollBarH=null}},calcScrollBarPos:function(a){var b={},c=this._dim,e=function(a,b,c,f,e){c=Math.round((f-b-8)/(f-e)*c);c<-b+5&&(c=-b+5);c>a-5&&(c=a-5);return c};if("number"==typeof a.y&&this._scrollBarV)b.y=e(this._scrollBarWrapperV.offsetHeight,this._scrollBarV.offsetHeight,a.y,c.d.h,c.c.h);if("number"==typeof a.x&&this._scrollBarH)b.x=e(this._scrollBarWrapperH.offsetWidth,this._scrollBarH.offsetWidth,a.x,c.d.w,c.c.w);return b},
scrollScrollBarTo:function(a){if(this.scrollBar){if(this._v&&this._scrollBarV&&"number"==typeof a.y)if(this._useTopLeft)l.set(this._scrollBarV,{webkitTransition:"",top:a.y+"px"});else{if(this._useTransformTransition)this._scrollBarV.style.webkitTransition="";this._scrollBarV.style.webkitTransform=this.makeTranslateStr({y:a.y})}if(this._h&&this._scrollBarH&&"number"==typeof a.x)if(this._useTopLeft)l.set(this._scrollBarH,{webkitTransition:"",left:a.x+"px"});else{if(this._useTransformTransition)this._scrollBarH.style.webkitTransition=
"";this._scrollBarH.style.webkitTransform=this.makeTranslateStr({x:a.x})}}},slideScrollBarTo:function(a,b,c){if(this.scrollBar){var e=this.calcScrollBarPos(this.getPos()),a=this.calcScrollBarPos(a);this._v&&this._scrollBarV&&this._runSlideAnimation({y:e.y},{y:a.y},b,c,this._scrollBarV,0);this._h&&this._scrollBarH&&this._runSlideAnimation({x:e.x},{x:a.x},b,c,this._scrollBarH,1)}},_runSlideAnimation:function(a,b,c,e,d,g){if(this._useTopLeft)l.set(d,{webkitTransitionProperty:"top, left",webkitTransitionDuration:c+
"s",webkitTransitionTimingFunction:e}),setTimeout(function(){l.set(d,{top:(b.y||0)+"px",left:(b.x||0)+"px"})},0),m.add(d,"mblScrollableScrollTo"+g);else if(this._useTransformTransition){if(void 0===b.x)b.x=a.x;if(void 0===b.y)b.y=a.y;if(b.x!==a.x||b.y!==a.y){l.set(d,{webkitTransitionProperty:"-webkit-transform",webkitTransitionDuration:c+"s",webkitTransitionTimingFunction:e});var h=this.makeTranslateStr(b);setTimeout(function(){l.set(d,{webkitTransform:h})},0);m.add(d,"mblScrollableScrollTo"+g)}else this.hideScrollBar(),
this.removeCover()}else this.setKeyframes(a,b,g),l.set(d,{webkitAnimationDuration:c+"s",webkitAnimationTimingFunction:e}),m.add(d,"mblScrollableScrollTo"+g),2==g?this.scrollTo(b,!0,d):this.scrollScrollBarTo(b)},resetScrollBar:function(){var a=function(a,b,c,f,e,d){if(b){var g={};g[d?"top":"left"]=e+4+"px";e=0>=c-8?1:c-8;g[d?"height":"width"]=e+"px";l.set(a,g);a=Math.round(c*c/f);a=Math.min(Math.max(a-8,5),e);b.style[d?"height":"width"]=a+"px";l.set(b,{opacity:0.6})}},b=this.getDim();a(this._scrollBarWrapperV,
this._scrollBarV,b.d.h,b.c.h,this.fixedHeaderHeight,!0);a(this._scrollBarWrapperH,this._scrollBarH,b.d.w,b.c.w,0);this.createMask()},createMask:function(){var a;if(this._scrollBarWrapperV){var b=this._scrollBarWrapperV.offsetHeight;a=c.doc.getCSSCanvasContext("2d","scrollBarMaskV",5,b);a.fillStyle="rgba(0,0,0,0.5)";a.fillRect(1,0,3,2);a.fillRect(0,1,5,1);a.fillRect(0,b-2,5,1);a.fillRect(1,b-1,3,2);a.fillStyle="rgb(0,0,0)";a.fillRect(0,2,5,b-4);this._scrollBarWrapperV.style.webkitMaskImage="-webkit-canvas(scrollBarMaskV)"}if(this._scrollBarWrapperH)b=
this._scrollBarWrapperH.offsetWidth,a=c.doc.getCSSCanvasContext("2d","scrollBarMaskH",b,5),a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,1,2,3),a.fillRect(1,0,1,5),a.fillRect(b-2,0,1,5),a.fillRect(b-1,1,2,3),a.fillStyle="rgb(0,0,0)",a.fillRect(2,0,b-4,5),this._scrollBarWrapperH.style.webkitMaskImage="-webkit-canvas(scrollBarMaskH)"},flashScrollBar:function(){if(!this.disableFlashScrollBar&&this.domNode&&(this._dim=this.getDim(),!(0>=this._dim.d.h))){this.showScrollBar();var a=this;setTimeout(function(){a.hideScrollBar()},
300)}},addCover:function(){},removeCover:function(){},setKeyframes:function(a,e,d){if(!b._rule)b._rule=[];if(!b._rule[d]){var g=j.create("style",null,c.doc.getElementsByTagName("head")[0]);g.textContent=".mblScrollableScrollTo"+d+"{-webkit-animation-name: scrollableViewScroll"+d+";}@-webkit-keyframes scrollableViewScroll"+d+"{}";b._rule[d]=g.sheet.cssRules[1]}if(d=b._rule[d])if(a&&(d.deleteRule("from"),d.insertRule("from { -webkit-transform: "+this.makeTranslateStr(a)+"; }")),e){if(void 0===e.x)e.x=
a.x;if(void 0===e.y)e.y=a.y;d.deleteRule("to");d.insertRule("to { -webkit-transform: "+this.makeTranslateStr(e)+"; }")}},setSelectable:function(a,b){a.style.KhtmlUserSelect=b?"auto":"none";a.style.MozUserSelect=b?"":"none";a.onselectstart=b?null:function(){return!1}}});d.setObject("dojox.mobile.scrollable",h);return h})},"dojox/mobile/PageIndicator":function(){define("dojox/mobile/PageIndicator","dojo/_base/connect,dojo/_base/declare,dojo/dom,dojo/dom-class,dojo/dom-construct,dijit/registry,dijit/_Contained,dijit/_WidgetBase".split(","),
function(h,k,g,d,c,m,j,l){return k("dojox.mobile.PageIndicator",[l,j],{refId:"",baseClass:"mblPageIndicator",buildRendering:function(){this.inherited(arguments);this._tblNode=c.create("table",{className:"mblPageIndicatorContainer"},this.domNode);this._tblNode.insertRow(-1);this._clickHandle=this.connect(this.domNode,"onclick","_onClick");this.subscribe("/dojox/mobile/viewChanged",function(){this.reset()})},startup:function(){var c=this;setTimeout(function(){c.reset()},0)},reset:function(){var e=this._tblNode.rows[0],
b,a,f=[],h=(this.refId&&g.byId(this.refId)||this.domNode).parentNode.childNodes;for(b=0;b<h.length;b++)a=h[b],this.isView(a)&&f.push(a);if(e.cells.length!==f.length){c.empty(e);for(b=0;b<f.length;b++)a=c.create("div",{className:"mblPageIndicatorDot"}),e.insertCell(-1).appendChild(a)}if(0!==f.length){h=m.byNode(f[0]).getShowingView();for(b=0;b<e.cells.length;b++)a=e.cells[b].firstChild,f[b]===h.domNode?d.add(a,"mblPageIndicatorDotSelected"):d.remove(a,"mblPageIndicatorDotSelected")}},isView:function(c){return c&&
1===c.nodeType&&d.contains(c,"mblView")},_onClick:function(c){!1===this.onClick(c)||c.target!==this.domNode||(c.layerX<this._tblNode.offsetLeft?h.publish("/dojox/mobile/prevPage",[this]):c.layerX>this._tblNode.offsetLeft+this._tblNode.offsetWidth&&h.publish("/dojox/mobile/nextPage",[this]))},onClick:function(){}})})},"dojo/dom-class":function(){define("dojo/dom-class",["./_base/lang","./_base/array","./dom"],function(h,k,g){function d(c){if("string"==typeof c||c instanceof String){if(c&&!m.test(c))return j[0]=
c,j;c=c.split(m);c.length&&!c[0]&&c.shift();c.length&&!c[c.length-1]&&c.pop();return c}return!c?[]:k.filter(c,function(b){return b})}var c,m=/\s+/,j=[""],l={};return c={contains:function(c,b){return 0<=(" "+g.byId(c).className+" ").indexOf(" "+b+" ")},add:function(c,b){var c=g.byId(c),b=d(b),a=c.className,f,a=a?" "+a+" ":" ";f=a.length;for(var h=0,j=b.length,k;h<j;++h)(k=b[h])&&0>a.indexOf(" "+k+" ")&&(a+=k+" ");f<a.length&&(c.className=a.substr(1,a.length-2))},remove:function(c,b){var c=g.byId(c),
a;if(void 0!==b){b=d(b);a=" "+c.className+" ";for(var f=0,i=b.length;f<i;++f)a=a.replace(" "+b[f]+" "," ");a=h.trim(a)}else a="";c.className!=a&&(c.className=a)},replace:function(d,b,a){d=g.byId(d);l.className=d.className;c.remove(l,a);c.add(l,b);d.className!==l.className&&(d.className=l.className)},toggle:function(e,b,a){e=g.byId(e);if(void 0===a)for(var b=d(b),f=0,h=b.length,j;f<h;++f)j=b[f],c[c.contains(e,j)?"remove":"add"](e,j);else c[a?"add":"remove"](e,b);return a}}})},"dijit/main":function(){define("dijit/main",
["dojo/_base/kernel"],function(h){return h.dijit})},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(h,k,g){return g("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){h.forEach(arguments,function(d){var c="destroyRecursive"in d?"destroyRecursive":"destroy"in d?"destroy":"remove",g=k.before(this,"destroy",function(g){d[c](g)}),h=k.after(d,c,function(){g.remove();h.remove()},!0)},this);return arguments}})})},
"dojox/mobile/deviceTheme":function(){("undefined"===typeof define?function(h,k){k()}:define)(["dojo/_base/config","dojo/_base/lang","dojo/_base/window","require"],function(h,k,g,d){var c=k&&k.getObject("dojox.mobile",!0)||{},k=new function(){if(!g)g=window,g.doc=document,g._no_dojo_dm=c;h=h||g.mblConfig||{};for(var k=g.doc.getElementsByTagName("script"),j=0;j<k.length;j++){var l=k[j],e=l.getAttribute("src")||"";if(e.match(/\/deviceTheme\.js/i)){h.baseUrl=e.replace("deviceTheme.js","../../dojo/");
if(k=l.getAttribute("data-dojo-config")||l.getAttribute("djConfig")){var k=eval("({ "+k+" })"),b;for(b in k)h[b]=k[b]}break}else if(e.match(/\/dojo\.js/i)){h.baseUrl=e.replace("dojo.js","");break}}this.loadCssFile=function(a){var b=g.doc.createElement("link");b.href=a;b.type="text/css";b.rel="stylesheet";a=g.doc.getElementsByTagName("head")[0];a.insertBefore(b,a.firstChild);c.loadedCssFiles.push(b)};this.toUrl=function(a){return d?d.toUrl(a):h.baseUrl+"../"+a};this.setDm=function(a){c=a};this.themeMap=
h.themeMap||[["Android","android",[]],["BlackBerry","blackberry",[]],["BB10","blackberry",[]],["iPhone","iphone",[]],["iPad","iphone",[this.toUrl("dojox/mobile/themes/iphone/ipad.css")]],["Custom","custom",[]],[".*","iphone",[]]];c.loadedCssFiles=[];this.loadDeviceTheme=function(a){var b=h.mblThemeFiles||c.themeFiles||["@theme"],d,e;e=this.themeMap;var j=a||h.mblUserAgent||(location.search.match(/theme=(\w+)/)?RegExp.$1:navigator.userAgent);for(d=0;d<e.length;d++)if(j.match(RegExp(e[d][0]))){var j=
e[d][1],k=g.doc.documentElement.className,k=k.replace(RegExp(" *"+c.currentTheme+"_theme"),"")+" "+j+"_theme";g.doc.documentElement.className=k;c.currentTheme=j;d=[].concat(e[d][2]);for(e=0;e<b.length;e++){var l=b[e]instanceof Array||"array"==typeof b[e];!l&&-1!==b[e].indexOf("/")?k=b[e]:(k=l?(b[e][0]||"").replace(/\./g,"/"):"dojox/mobile",l=(l?b[e][1]:b[e]).replace(/\./g,"/"),k=k+"/"+("themes/"+j+"/"+("@theme"===l?j:l)+".css"));d.unshift(this.toUrl(k))}for(b=0;b<c.loadedCssFiles.length;b++)j=c.loadedCssFiles[b],
j.parentNode.removeChild(j);c.loadedCssFiles=[];for(e=0;e<d.length;e++)this.loadCssFile(d[e].toString());a&&c.loadCompatCssFiles&&c.loadCompatCssFiles();break}}};k.loadDeviceTheme();return window.deviceTheme=c.deviceTheme=k})},"dojo/_base/event":function(){define("dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(h,k,g,d){if(k._fixEvent){var c=k._fixEvent;k._fixEvent=function(g,h){(g=c(g,h))&&d.normalizeEvent(g);return g}}g={fix:function(c,d){return k._fixEvent?k._fixEvent(c,
d):c},stop:function(c){c.preventDefault();c.stopPropagation()}};h.fixEvent=g.fix;h.stopEvent=g.stop;return g})},"dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(h,k,g){return k("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode)this.containerNode=this.domNode},addChild:function(d,c){var h=this.containerNode;if(c&&"number"==typeof c){var j=this.getChildren();if(j&&j.length>=
c)h=j[c-1].domNode,c="after"}g.place(d.domNode,h,c);this._started&&!d._started&&d.startup()},removeChild:function(d){"number"==typeof d&&(d=this.getChildren()[d]);if(d)(d=d.domNode)&&d.parentNode&&d.parentNode.removeChild(d)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(d,c){var g=this.getChildren(),j=h.indexOf(this.getChildren(),d);return g[j+c]},getIndexOfChild:function(d){return h.indexOf(this.getChildren(),d)}})})},"dojo/_base/connect":function(){define("dojo/_base/connect",
"./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),function(h,k,g,d,c,m,j,l){function e(a,b,c,e,f){e=l.hitch(c,e);if(!a||!a.addEventListener&&!a.attachEvent)return d.after(a||h.global,b,e,!0);"string"==typeof b&&"on"==b.substring(0,2)&&(b=b.substring(2));if(!a)a=h.global;if(!f)switch(b){case "keypress":b=o;break;case "mouseenter":b=m.enter;break;case "mouseleave":b=m.leave}return k(a,b,e,f)}function b(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):"";a.charOrCode=
a.keyChar||a.keyCode}var a={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},f=j("mac")?"metaKey":"ctrlKey",i=function(a,c){var d=l.mixin({},a,c);b(d);d.preventDefault=function(){a.preventDefault()};d.stopPropagation=function(){a.stopPropagation()};return d},o;o=function(b,c){var d=k(b,"keydown",function(b){var d=b.keyCode,e=13!=d&&32!=d&&(48>d||90<d)&&(96>d||111<d)&&(186>d||192<d)&&(219>d||222<d)&&229!=d;if(e||b.ctrlKey){e=e?0:d;if(b.ctrlKey){if(3==
d||13==d)return c.call(b.currentTarget,b);e=95<e&&106>e?e-48:!b.shiftKey&&65<=e&&90>=e?e+32:a[e]||e}d=i(b,{type:"keypress",faux:!0,charCode:e});c.call(b.currentTarget,d)}}),e=k(b,"keypress",function(a){var b=a.charCode,a=i(a,{charCode:32<=b?b:0,faux:!0});return c.call(this,a)});return{remove:function(){d.remove();e.remove()}}};var n={_keypress:o,connect:function(a,b,c,d,f){var g=arguments,h=[],i=0;h.push("string"==typeof g[0]?null:g[i++],g[i++]);var j=g[i+1];h.push("string"==typeof j||"function"==
typeof j?g[i++]:null,g[i++]);for(j=g.length;i<j;i++)h.push(g[i]);return e.apply(this,h)},disconnect:function(a){a&&a.remove()},subscribe:function(a,b,c){return g.subscribe(a,l.hitch(b,c))},publish:function(a,b){return g.publish.apply(g,[a].concat(b))},connectPublisher:function(a,b,c){var d=function(){n.publish(a,arguments)};return c?n.connect(b,c,d):n.connect(b,d)},isCopyKey:function(a){return a[f]}};n.unsubscribe=n.disconnect;l.mixin(h,n);return n})},"dojo/ready":function(){define("dojo/ready",["./_base/kernel",
"./has","require","./domReady","./_base/lang"],function(h,k,g,d,c){var m=0,j,l=[],e=0,b=function(){if(m&&!e&&l.length){e=1;var a=l.shift();try{a()}finally{e=0}e=0;l.length&&j(b)}};g.on("idle",b);j=function(){g.idle()&&b()};var k=h.ready=h.addOnLoad=function(a,b,d){var e=c._toArray(arguments);"number"!=typeof a?(d=b,b=a,a=1E3):e.shift();d=d?c.hitch.apply(h,e):function(){b()};d.priority=a;for(e=0;e<l.length&&a>=l[e].priority;e++);l.splice(e,0,d);j()},a=h.config.addOnLoad;if(a)k[c.isArray(a)?"apply":
"call"](h,a);h.config.parseOnLoad&&!h.isAsync&&k(99,function(){h.parser||(h.deprecated("Add explicit require(['dojo/parser']);","","2.0"),g(["dojo/parser"]))});d(function(){m=1;h._postLoad=h.config.afterOnLoad=!0;l.length&&j(b)});return k})},"walta/AnchorBar":function(){define("walta/AnchorBar","dojo/_base/declare,dojo/on,dojo/dom-construct,dojo/_base/lang,dojo/topic,dojox/mobile/Container".split(","),function(h,k,g,d,c,m){return h("walta.AnchorBar",[m],{title:"","class":"waltaAnchorBar",buildRendering:function(){this.inherited(arguments);
var h=g.create("div",{"class":"waltaAnchorBarIcon waltaHome"},this.containerNode),l=g.create("div",{"class":"waltaAnchorBarIcon waltaInfo"},this.containerNode),e=g.create("div",{"class":"waltaAnchorBarIcon waltaSettings"},this.containerNode);g.create("h1",{innerHTML:this.title},this.containerNode);k(h,"click",d.hitch(this,function(){c.publish("anchorbar/home")}));k(e,"click",d.hitch(this,function(){c.publish("anchorbar/settings")}));k(l,"click",d.hitch(this,function(){c.publish("anchorbar/info")}))}})})}}});
define("walta/walta",[],1);
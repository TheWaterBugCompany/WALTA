//>>built
define("dojox/html/format",["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(g,u,y,z){var m=g.getObject("dojox.html.format",!0);m.prettyPrint=function(m,k,l,v,A){var f=[],h=0,r=[],j="\t",e="",w=[],s,B=/[=]([^"']+?)(\s|>)/g,C=/style=("[^"]*"|'[^']*'|\S*)/gi,D=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(k&&0<k&&10>k){j="";for(s=0;s<k;s++)j+=" "}k=z.doc.createElement("div");k.innerHTML=m;var E=u.encode,F=u.decode,t=k.ownerDocument.createElement("div"),G=function(a){a=
a.cloneNode(!1);t.appendChild(a);a=t.innerHTML;t.innerHTML="";return a},n=function(){var a;for(a=0;a<h;a++)f.push(j)},o=function(){f.push("\n")},p=function(a){var b,c,a=a.split("\n");for(b=0;b<a.length;b++)a[b]=g.trim(a[b]);a=a.join(" ");a=g.trim(a);if(""!==a){var d=[];if(l&&0<l){var i="";for(b=0;b<h;b++)i+=j;b=i.length;i=l;for(l>b&&(i-=b);a;)if(a.length>l){for(b=i;0<b&&" "!==a.charAt(b);b--);if(!b)for(b=i;b<a.length&&" "!==a.charAt(b);b++);var e=a.substring(0,b),e=g.trim(e),a=g.trim(a.substring(b==
a.length?a.length:b+1,a.length));if(e){c="";for(b=0;b<h;b++)c+=j;e=c+e+"\n"}d.push(e)}else{c="";for(b=0;b<h;b++)c+=j;a=c+a+"\n";d.push(a);a=null}return d.join("")}c="";for(b=0;b<h;b++)c+=j;return c+a+"\n"}return""},H=function(a){if(a){var b=a;b&&(b=b.replace(/&quot;/gi,'"'),b=b.replace(/&gt;/gi,">"),b=b.replace(/&lt;/gi,"<"),b=b.replace(/&amp;/gi,"&"));for(var c,d,a=0,i=b.split("\n"),e=[],b=0;b<i.length;b++){var f=i[b],q=-1<f.indexOf("\n");if(f=g.trim(f)){q=a;for(c=0;c<f.length;c++)d=f.charAt(c),
"{"===d?a++:"}"===d&&(a--,q=a);d="";for(c=0;c<h+q;c++)d+=j;e.push(d+f+"\n")}else q&&0===b&&e.push("\n")}a=e.join("")}return a},I=function(a){var b=a.nodeName.toLowerCase(),c=g.trim(G(a)),a=c.substring(0,c.indexOf(">")+1),a=a.replace(B,'="$1"$2'),a=a.replace(C,function(a){var b=a.substring(0,6),a=a.substring(6,a.length),c=a.charAt(0),a=g.trim(a.substring(1,a.length-1)),a=a.split(";"),d=[];y.forEach(a,function(a){if(a=g.trim(a))a=a.substring(0,a.indexOf(":")).toLowerCase()+a.substring(a.indexOf(":"),
a.length),d.push(a)});var d=d.sort(),a=d.join("; "),e=g.trim(a);return!e||";"===e?"":b+c+(a+";")+c}),d=[],a=a.replace(D,function(a){d.push(g.trim(a));return""}),d=d.sort(),a="<"+b;d.length&&(a+=" "+d.join(" "));-1!=c.indexOf("</")?(r.push(b),a+=">"):(a=A?a+" />":a+">",r.push(!1));a:switch(b){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":b=!0;break a;default:b=!1}w.push(b);
e&&!b&&(f.push(p(e)),e="");b?e+=a:(n(),f.push(a),o(),h++)},x=function(a){if(a=a.childNodes){var b;for(b=0;b<a.length;b++){var c=a[b];if(1===c.nodeType){var d=g.trim(c.tagName.toLowerCase());if(!(d&&"/"===d.charAt(0)))I(c),"script"===d?f.push(H(c.innerHTML)):"pre"===d?(c=c.innerHTML,"\n"!==c.charAt(c.length-1)&&(c+="\n"),f.push(c)):x(c),c=w.pop(),e&&!c&&(f.push(p(e)),e=""),(d=r.pop())?(d="</"+d+">",c?e+=d:(h--,n(),f.push(d),o())):h--}else 3===c.nodeType||4===c.nodeType?e+=E(c.nodeValue,v):8===c.nodeType&&
(c=F(c.nodeValue,v),n(),f.push("<\!--"),o(),h++,f.push(p(c)),h--,n(),f.push("--\>"),o())}}};x(k);e&&(f.push(p(e)),e="");return f.join("")};return m});
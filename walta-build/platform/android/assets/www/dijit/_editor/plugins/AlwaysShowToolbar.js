//>>built
define("dijit/_editor/plugins/AlwaysShowToolbar","dojo/_base/declare,dojo/dom-class,dojo/dom-construct,dojo/dom-geometry,dojo/_base/lang,dojo/sniff,dojo/_base/window,../_Plugin".split(","),function(f,j,k,d,g,h,l,i){return f("dijit._editor.plugins.AlwaysShowToolbar",i,{_handleScroll:!0,setEditor:function(a){a.iframe?(this.editor=a,a.onLoadDeferred.then(g.hitch(this,this.enable))):console.log("Port AlwaysShowToolbar plugin to work with Editor without iframe")},enable:function(a){this._updateHeight();
this.connect(window,"onscroll","globalOnScrollHandler");this.connect(this.editor,"onNormalizedDisplayChanged","_updateHeight");return a},_updateHeight:function(){var a=this.editor;if(a.isLoaded&&!a.height){var b=d.getMarginSize(a.editNode).h;if(h("opera"))b=a.editNode.scrollHeight;if(!b)b=d.getMarginSize(a.document.body).h;if(0==b)console.debug("Can not figure out the height of the editing area!");else if(b!=this._lastHeight)this._lastHeight=b,d.setMarginBox(a.iframe,{h:this._lastHeight})}},_lastHeight:0,
globalOnScrollHandler:function(){if(this._handleScroll){var a=this.editor.header;if(!this._scrollSetUp)this._scrollSetUp=!0,this._scrollThreshold=d.position(a,!0).y;var b=d.docScroll(this.editor.ownerDocument).y,c=a.style;if(b>this._scrollThreshold&&b<this._scrollThreshold+this._lastHeight){if(!this._fixEnabled){var e=d.getMarginSize(a);this.editor.iframe.style.marginTop=e.h+"px";c.position="fixed";c.top="0px";d.setMarginBox(a,{w:e.w});c.zIndex=2E3;this._fixEnabled=!0}a=this.height?parseInt(this.editor.height):
this.editor._lastHeight;c.display=b>this._scrollThreshold+a?"none":""}else if(this._fixEnabled)this.editor.iframe.style.marginTop="",c.position="",c.top="",c.zIndex="",c.display="",c.width="",this._fixEnabled=!1}},destroy:function(){this._IEOriginalPos=null;this._handleScroll=!1;this.inherited(arguments)}})});
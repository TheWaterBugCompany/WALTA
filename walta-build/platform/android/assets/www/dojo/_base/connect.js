//>>built
define("dojo/_base/connect","./kernel,../on,../topic,../aspect,./event,../mouse,./sniff,./lang,../keys".split(","),function(j,k,l,q,w,n,r,g){function s(a,c,e,f,o){f=g.hitch(e,f);if(!a||!a.addEventListener&&!a.attachEvent)return q.after(a||j.global,c,f,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));if(!a)a=j.global;if(!o)switch(c){case "keypress":c=m;break;case "mouseenter":c=n.enter;break;case "mouseleave":c=n.leave}return k(a,c,f,o)}function t(a){a.keyChar=a.charCode?String.fromCharCode(a.charCode):
"";a.charOrCode=a.keyChar||a.keyCode}var u={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},v=r("mac")?"metaKey":"ctrlKey",p=function(a,c){var e=g.mixin({},a,c);t(e);e.preventDefault=function(){a.preventDefault()};e.stopPropagation=function(){a.stopPropagation()};return e},m;m=function(a,c){var e=k(a,"keydown",function(a){var b=a.keyCode,d=13!=b&&32!=b&&(48>b||90<b)&&(96>b||111<b)&&(186>b||192<b)&&(219>b||222<b)&&229!=b;if(d||a.ctrlKey){d=d?0:b;
if(a.ctrlKey){if(3==b||13==b)return c.call(a.currentTarget,a);d=95<d&&106>d?d-48:!a.shiftKey&&65<=d&&90>=d?d+32:u[d]||d}b=p(a,{type:"keypress",faux:!0,charCode:d});c.call(a.currentTarget,b)}}),f=k(a,"keypress",function(a){var b=a.charCode,a=p(a,{charCode:32<=b?b:0,faux:!0});return c.call(this,a)});return{remove:function(){e.remove();f.remove()}}};var i={_keypress:m,connect:function(a,c,e,f,i){var b=arguments,d=[],h=0;d.push("string"==typeof b[0]?null:b[h++],b[h++]);var g=b[h+1];d.push("string"==typeof g||
"function"==typeof g?b[h++]:null,b[h++]);for(g=b.length;h<g;h++)d.push(b[h]);return s.apply(this,d)},disconnect:function(a){a&&a.remove()},subscribe:function(a,c,e){return l.subscribe(a,g.hitch(c,e))},publish:function(a,c){return l.publish.apply(l,[a].concat(c))},connectPublisher:function(a,c,e){var f=function(){i.publish(a,arguments)};return e?i.connect(c,e,f):i.connect(c,f)},isCopyKey:function(a){return a[v]}};i.unsubscribe=i.disconnect;g.mixin(j,i);return i});